    1                                  Прогр sapun { 
    2          
    3          
    4          /*###########################################################*/
    5          /*#########                     #############################*/
    6          /*#########  ОПИСАНИЕ КОНСТАНТ  #############################*/
    7          /*#########                     #############################*/
    8          /*###########################################################*/
    9          /* ?????????????? Таймауты взяты с потолка */
   10          ТАКТ     50;    /* такт равен 500 миллисекундам */
   11          КОНСТ Т0_1                       0;  /* Константа обеспечивающая паузу в 0.5 сек */
   12          КОНСТ ОДНА_СЕКУНДА               10;  /* Константа обеспечивающая паузу в 1 сек */
   13          КОНСТ ДВЕ_СЕКУНДЫ             2*ОДНА_СЕКУНДА;
   14          КОНСТ ТРИ_СЕКУНДЫ             3*ОДНА_СЕКУНДА;
   15          КОНСТ ТАЙМАУТ_НА_ДОСТОВЕРНОСТЬ ДВЕ_СЕКУНДЫ;
   16          КОНСТ ПЯТЬ_СЕКУНД             5*ОДНА_СЕКУНДА;
   17          КОНСТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ ПЯТЬ_СЕКУНД;
   18          
   19          КОНСТ ДЕСЯТЬ_СЕКУНД          10*ОДНА_СЕКУНДА;
   20          КОНСТ ДВАДЦАТЬ_СЕКУНД        20*ОДНА_СЕКУНДА;
   21          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ЗАТ_ВАК			ПЯТЬ_СЕКУНД;	/* изменено 9 декабря*/
   22          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_САПУНА           	ТРИ_СЕКУНДЫ;   /* изменено 9 декабря*/
   23          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_УСТР_ПЛАВ_ПУСКА   3*ОДНА_СЕКУНДА;
   24          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВАК_НАСОСА 		3*ОДНА_СЕКУНДА;
   25          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВЕНТИЛЯТОРА		ПЯТЬ_СЕКУНД;
   26          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_Т				3*ОДНА_СЕКУНДА;
   27          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_УР			3*ОДНА_СЕКУНДА;
   28          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_НАСОС_ОХЛ			3*ОДНА_СЕКУНДА;
   29          КОНСТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ  ДЕСЯТЬ_СЕКУНД;
   30          КОНСТ ОДНА_МИНУТА          60*ОДНА_СЕКУНДА;
   31          КОНСТ ДВЕ_МИНУТЫ          2*ОДНА_МИНУТА;
   32          КОНСТ ПЯТЬ_МИНУТ          5*60*ОДНА_СЕКУНДА;
   33          КОНСТ ДЕСЯТЬ_МИНУТ			10*ОДНА_МИНУТА;
   34          /* КОНСТ ТАЙМАУТ_ВАКУУМИРОВАНИЯ_ТРУБЫ  30*ОДНА_МИНУТА;*/
   35          КОНСТ ТРИДЦАТЬ_МИНУТ          30*ОДНА_МИНУТА;
   36          КОНСТ ПЯТНАДЦАТЬ_МИНУТ          15*ОДНА_МИНУТА;
   37          КОНСТ ТАЙМАУТ_ЗАДЕРЖКА_НА_ОТКАЧКУ ДЕСЯТЬ_СЕКУНД;
   38          
   39          КОНСТ ВКЛ                1;
   40          КОНСТ ВЫК               0;
   41          КОНСТ ОТКР              1;
   42          КОНСТ ЗАКР          	0;
   43          КОНСТ ЕСТЬ               1;
   44          КОНСТ НЕТ                0;
   45          КОНСТ НИЖЕ_НОРМЫ		0;
   46          КОНСТ НОРМА              1;
   47          КОНСТ ВЫШЕ_НОРМЫ		2;
   48          КОНСТ ВНЕ_НОРМЫ			0;
   49          КОНСТ ДОСТОВЕРНО                1;
   50          КОНСТ НЕДОСТОВЕРНО               0;
   51          КОНСТ Не_проверяются       0;  /*   доб.16 января 2014*/
   52          КОНСТ Проверяются      1;
   53          
   54          КОНСТ ТАЙМАУТ_НА_ДИАГНОСТИКУ_РАЗРЫВА_СВЯЗИ 5*ОДНА_СЕКУНДА;
   55          
   56          КОНСТ Т_ПредельнаяВрубашкеОхлаждения          85.0; 
   57          КОНСТ Т_ПредельнаяВбакеОхлаждения          65.0; 
   58          
   59          /*===========================================================*/
   60          /*=== КОДЫ СООБЩЕНИЙ ПРОЦЕССОВ КОНТРОЛЯ                     =*/
   61          /*===========================================================*/
   62          ПЕРЕЧИСЛЕНИЕ {
   63              ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКИЙ,
   64              ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКИЙ,
   65          	ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ,
   66          	ПК_ГУИ_ОТКАЗ_ДАТЧИКОВ_УРОВНЯ,  
   67          	
   68          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКАЯ,
   69          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКАЯ,
   70          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ,
   71          
   72              ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_НИЗКАЯ,
   73          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_ВЫСОКАЯ,
   74          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ,
   75          
   76          	ПК_ГУИ_ДАВЛЕНИЕ_В_ВАКУУМНОЙ_ТРУБЕ_В_НОРМЕ,
   77          	ПК_ГУИ_ДАВЛЕНИЕ_В_ВАКУУМНОЙ_ТРУБЕ_ВНЕ_НОРМЫ,
   78          	
   79          	ПК_ГУИ_СКОРОСТЬ_ОТКАЧКИ_В_НОРМЕ,
   80          	ПК_ГУИ_СКОРОСТЬ_ОТКАЧКИ_НИЖЕ_НОРМЫ, /*  ????может заменить на нет откачки??? */
   81          
   82          		
   83          	ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_В_НОРМЕ,
   84          	ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_ВЫШЕ_НОРМЫ,  /* 6 декабря  */
   85              ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_НИЖЕ_НОРМЫ,
   86          	
   87          	/* 23 сентября 2014 Лях */
   88          	ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ_ОТКАЗ_ОБОРУДОВАНИЯ,
   89          	ПК_ГУИ_СТАРТ_ВЫКЛЮЧЕНИЯ_ВАКУУМИРОВАНИЯ_ТРУБЫ,
   90          	ПК_ГУИ_СТАРТ_ВЫКЛЮЧЕНИЯ_ВАКУУМНОГО_НАСОСА
   91          	
   92          };
   93          /*===========================================================*/
   94          /*========= КОМАНДЫ ОПЕРАТОРА =============15================*/
   95          /*===========================================================*/
   96          ПЕРЕЧИСЛЕНИЕ {
   97               КОМ_ГУИ_ОТКР_ЗАТВОР_ВАК= ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_НИЖЕ_НОРМЫ + 1,
   98               КОМ_ГУИ_ЗАКР_ЗАТВОР_ВАК    	,
   99               КОМ_ГУИ_ОТКР_САПУН			    ,
  100               КОМ_ГУИ_ЗАКР_САПУН			    ,
  101               КОМ_ГУИ_ВКЛ_УСТР_ПЛАВ_ПУСКА    ,
  102               КОМ_ГУИ_ВЫК_УСТР_ПЛАВ_ПУСКА    ,
  103          /*	 КОМ_ГУИ_ВКЛ_ПИТ_ВАК_НАСОСА     ,  */ /*  меняем на*/
  104           	 КОМ_ГУИ_ВКЛ_ПИТ_УПП_ВАК_НАСОСА     ,
  105          	 КОМ_ГУИ_ВЫК_ПИТ_УПП_ВАК_НАСОСА     ,
  106          	 КОМ_ГУИ_ВКЛ_ПИТ_ВЕНТИЛЯТОР    ,
  107          	 КОМ_ГУИ_ВЫК_ПИТ_ВЕНТИЛЯТОР    ,
  108               КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_Т    ,
  109          	 КОМ_ГУИ_ВЫК_ПИТ_РЕГ_Т    ,
  110               КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_УР     ,
  111          	 КОМ_ГУИ_ВЫК_ПИТ_РЕГ_УР     , 
  112          	 КОМ_ГУИ_ВКЛ_ПИТ_НАС_ОХЛ ,
  113          	 КОМ_ГУИ_ВЫК_ПИТ_НАС_ОХЛ    , 
  114          	 КОМ_ГУИ_ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ,
  115          	 КОМ_ГУИ_ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ, /*14 декабря	*/
  116          	 КОМ_ГУИ_ВКЛ_ВАКУУМНЫЙ_НАСОС ,/*  у нас  нет этой кнопки ?????	*/
  117          /*	 КОМ_ГУИ_ВЫК_ВАКУУМНЫЙ_НАСОС,  */   /*  14 декабря */
  118               КОМАНДЫ_ОТ_ГУИ = КОМ_ГУИ_ВКЛ_ВАКУУМНЫЙ_НАСОС 
  119          	
  120          };
  121          
  122          
  123          /*===========================================================*/
  124          /*========= КОМАНДЫ ИЗМЕНЕНИЯ ФАКТИЧЕСКИХ ПАРАМЕТРОВ ========*/
  125          /*===========================================================*/
  126          
  127          
  128          ПЕРЕЧИСЛЕНИЕ {
  129          	ИЗМН_ФП_P_ВбакеКомпрессора = КОМАНДЫ_ОТ_ГУИ + 1,
  130          	ИЗМН_ФП_P_Впатрубке,
  131          	ИЗМН_ФП_T_Врубашке,	
  132          	ИЗМН_ФП_T_Вбаке,	
  133              ИЗМН_ФП_P_ВтрубеСидер,
  134              КОМАНДЫ_ИЗМ_ФП = ИЗМН_ФП_P_ВтрубеСидер  /*  42 */
  135          };
  136          
  137          /*===========================================================*/
  138          /*===========================================================*/
  139          /*============= КОДЫ СООБЩЕНИЙ ВАКУУМНОЙ СИСТЕМЫ ============*/
  140          /*===========================================================*/
  141          /*===========================================================*/
  142          ПЕРЕЧИСЛЕНИЕ {                    
  143                ПК_ГУИ_ОТКАЗ_ОТКРЫТИЯ_ЗАТВОРА_ВАКУУМНОГО = КОМАНДЫ_ИЗМ_ФП + 1,
  144                ПК_ГУИ_ОТКАЗ_ЗАКРЫТИЯ_ЗАТВОРА_ВАКУУМНОГО,
  145                ПК_ГУИ_ОТКАЗ_ОТКРЫТИЯ_САПУНА,
  146                ПК_ГУИ_ОТКАЗ_ЗАКРЫТИЯ_САПУНА,
  147          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ВЕНТИЛЯТОРА,
  148          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ВЕНТИЛЯТОРА,
  149          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_УСТР_ПЛАВ_ПУСКА,
  150          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_УСТР_ПЛАВ_ПУСКА,
  151          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ,
  152          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ,
  153          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_РЕГУЛЯТОРА_УРОВНЯ,
  154          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_РЕГУЛЯТОРА_УРОВНЯ,
  155          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_НАСОСА_ОХЛАЖДЕНИЯ,
  156          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_НАСОСА_ОХЛАЖДЕНИЯ,
  157          	  ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ,
  158          	  ПК_ГУИ_НЕТ_УСЛОВИЙ_ДЛЯ_ВЫПОЛНЕНИЯ_КОМАНДЫ,
  159          	  ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВНЕ_НОРМЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ, 				
  160          	  ПК_ГУИ_ОТРИЦАТЕЛЬНАЯ_ТЕМПЕРАТУРА_ВОДЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ,
  161          	  ПК_ГУИ_ДАВЛЕНИЕ_В_ПАТРУБКЕ_НЕ_УМЕНЬШАЕТСЯ,
  162          	  ПК_ГУИ_ДАВЛЕНИЕ_В_ВАК_ТРУБЕ_НЕ_УМЕНЬШАЕТСЯ,
  163          	  ПК_ГУИ_ВАКУУМИРОВАНИЕ_УСПЕШНО_ЗАВЕРШЕНО,	  
  164          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ПИТАНИЯ_УПП_ВАКУУМНОГО_НАСОСА,   
  165          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ПИТАНИЯ_УПП_ВАКУУМНОГО_НАСОСА,  
  166          	  ПК_ГУИ_НЕДОСТОВЕРНЫЕ_ДАННЫЕ_ОБОРУДОВАНИЯ_ВАК_СИСТЕМЫ,
  167          	  
  168          
  169          		ПК_ГУИ_АВАРИЯ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_МЕНЬШЕ_2х_АТМОСФЕР, /* 18 августа 2014 */
  170          		ПК_ГУИ_АВАРИЯ__СРОЧНО_ВЫКЛЮЧИТЬ_ВАК_СИСТЕМУ_В_РУЧНОМ_РЕЖИМЕ,	/* 18 августа 2014 */
  171          		ПК_ГУИ_АВАРИЯ_ПЕРЕГРЕВ_РУБАШКИ_ОХЛАЖДЕНИЯ,				/* 21 августа 2014 */
  172          		ПК_ГУИ_АВАРИЯ_ПЕРЕГРЕВ_БАКА_ОХЛАЖДЕНИЯ_НАСОСА,					/* 18 августа 2014 */
  173          		
  174          
  175          	  ПК_ГУИ_РЕСТАРТ_НЕДОСТОВЕРНЫЕ_ДАННЫЕ_ОБОРУДОВАНИЯ_ВАК_СИСТЕМЫ, /* добавить в гуи 28 января 2014 */
  176          	  ПК_ГУИ_ЕСТЬ_ПИТАНИЕ_ШКАФА_ВС_380,	/* добавить в гуи 27 января 2014 */
  177          	  ПК_ГУИ_НЕТ_ПИТАНИЕ_ШКАФА_ВС_380,	/* добавить в гуи 27 января 2014 */
  178          	  ПК_ГУИ_ВЕНТИЛЯТОР_ВКЛЮЧЕН,
  179          	  ПК_ГУИ_ВЕНТИЛЯТОР_ВЫКЛЮЧЕН,
  180          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_ВЕНТИЛЯТОРА,
  181          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_ВЕНТИЛЯТОРА,
  182          	  ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ОТКРЫТ,
  183          	  ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ЗАКРЫТ,
  184          	  ПК_ГУИ_СРЕДНЕЕ_СОСТОЯНИЕ_ЗАТВОРА_ВАКУУМНОГО,
  185          	  ПК_ГУИ_СОСТОЯНИЕ_ОШИБКИ_ЗАТВОРА_ВАКУУМНОГО,
  186          	  ПК_ГУИ_СПОНТАННОЕ_ОТКРЫТИЕ_ЗАТ_ВАКУУМНОГО,
  187          	  ПК_ГУИ_СПОНТАННОЕ_ЗАКРЫТИЕ_ЗАТ_ВАКУУМНОГО,
  188          	  ПК_ГУИ_САПУН_ОТКРЫТ,
  189          	  ПК_ГУИ_САПУН_ЗАКРЫТ,
  190          	  ПК_ГУИ_СПОНТАННОЕ_ОТКРЫТИЕ_САПУНА,
  191          	  ПК_ГУИ_СПОНТАННОЕ_ЗАКРЫТИЕ_САПУНА,
  192          	  ПК_ГУИ_ПИТАНИЕ_УПП_ВАКУУМНОГО_НАСОСА_ВКЛЮЧЕНО,  /* беда*/
  193          	  ПК_ГУИ_ПИТАНИЕ_УПП_ВАКУУМНОГО_НАСОСА_ВЫКЛЮЧЕНО,  /* беда*/
  194          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_УПП_ВАКУУМНОГО_НАСОСА,
  195          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_УПП_ВАКУУМНОГО_НАСОСА,
  196          	  ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ_ВКЛЮЧЕНО,
  197          	  ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ_ВЫКЛЮЧЕНО,
  198            	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ,
  199          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ,
  200          	  ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_УРОВНЯ_ВКЛЮЧЕНО,
  201          	  ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_УРОВНЯ_ВЫКЛЮЧЕНО,
  202          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_РЕГУЛЯТОРА_УРОВНЯ,
  203          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_РЕГУЛЯТОРА_УРОВНЯ,
  204          	  ПК_ГУИ_ПИТАНИЕ_НАСОСА_ОХЛАЖДЕНИЯ_ВКЛЮЧЕНО,
  205          	  ПК_ГУИ_ПИТАНИЕ_НАСОСА_ОХЛАЖДЕНИЯ_ВЫКЛЮЧЕНО,
  206          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_НАСОСА_ОХЛАЖДЕНИЯ,
  207          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_НАСОСА_ОХЛАЖДЕНИЯ,
  208          	  ПК_ГУИ_УСТРОЙСТВО_ПЛАВНОГО_ПУСКА_ВКЛЮЧЕНО,
  209          	  ПК_ГУИ_УСТРОЙСТВО_ПЛАВНОГО_ПУСКА_ВЫКЛЮЧЕНО,
  210          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_УСТРОЙСТВА_ПЛАВНОГО_ПУСКА,
  211          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_УСТРОЙСТВА_ПЛАВНОГО_ПУСКА,
  212          	  ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ,
  213          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ВАКУУМНОЙ_ПОДСИСТЕМЫ,
  214          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ВАКУУМНОЙ_ПОДСИСТЕМЫ,
  215          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_КОНЦ_ОТКРЫТИЯ_ЗАТВ_ВАКУУМНОГО,
  216                ПК_ГУИ_НЕТ_СВЯЗИ_С_КОНЦ_ОТКРЫТИЯ_ЗАТВ_ВАКУУМНОГО,
  217          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_КОНЦ_ЗАКРЫТИЯ_ЗАТВ_ВАКУУМНОГО,
  218          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_КОНЦ_ЗАКРЫТИЯ_ЗАТВ_ВАКУУМНОГО,
  219                ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_САПУНОМ,
  220          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_САПУНОМ,
  221          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПЛАВНЫМ_ПУСКОМ,
  222          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ПЛАВНЫМ_ПУСКОМ,
  223          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПИТАНИЕМ_ВАК_НАСОСА, 
  224          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ПИТАНИЕМ_ВАК_НАСОСА,	
  225          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ВЕНТИЛЯТОРОМ,
  226          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ВЕНТИЛЯТОРОМ,
  227          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_РЕГ_ТЕМПЕРАТУРЫ,  
  228          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_РЕГ_ТЕМПЕРАТУРЫ,
  229          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_РЕГ_УРОВНЯ,
  230          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_РЕГ_УРОВНЯ,
  231          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_НИЖНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ,
  232          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_НИЖНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ,
  233          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ВЕРХНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ,
  234          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ВЕРХНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ,
  235          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_НАСОСОСОМ_ОХЛ,
  236          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_НАСОСОСОМ_ОХЛ,
  237          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПИТАНИЕМ_ШКАФА_380,   /* добавить в гуи 27 января 2014 */
  238          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ПИТАНИЕМ_ШКАФА_380,		/* добавить в гуи 27 января 2014 */
  239          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_БАКЕ_КОМПРЕССОРА,
  240          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_БАКЕ_КОМПРЕССОРА,
  241          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_ПАТРУБКЕ,		/* добавить сообщения 3 мая 2014 */
  242          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_ПАТРУБКЕ,		/* добавить сообщения 3 мая 2014 */
  243          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ТЕМПЕРАТУРОЙ_В_РУБАШКЕ_ОХЛ,	/* добавить сообщения 3 мая 2014 */
  244          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ТЕМПЕРАТУРОЙ_В_РУБАШКЕ_ОХЛ,	/* добавить сообщения 3 мая 2014 */
  245          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ТЕМПЕРАТУРОЙ_В_БАКЕ_ОХЛ,		/* добавить сообщения 3 мая 2014 */
  246          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ТЕМПЕРАТУРОЙ_В_БАКЕ_ОХЛ,		/* добавить сообщения 3 мая 2014 */
  247          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_ТРУБЕ_СИД,	/* добавить сообщения 3 мая 2014 */
  248          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_ТРУБЕ_СИД,	/* добавить сообщения 3 мая 2014 */
  249          	  ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВКЛЮЧЕНО,
  250          	  ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВЫКЛЮЧЕНО
  251          };
  252          
  253          
  254          /*===========================================================*/
  255          /*========= КОДЫ СООБЩЕНИЙ ИЗМЕНЕНИЙ ФП         =============*/
  256          /*===========================================================*/
  257          ПЕРЕЧИСЛЕНИЕ {                    
  258                ПК_ГУИ_ФП_P_ВбакеКомпрессора = ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВЫКЛЮЧЕНО + 1,
  259                ПК_ГУИ_ФП_P_Впатрубке,
  260                ПК_ГУИ_ФП_T_Врубашке,
  261                ПК_ГУИ_ФП_T_Вбаке,
  262                ПК_ГУИ_ФП_P_ВтрубеСидер
  263                
  264          };
  265          /*===========================================================*/
  266          /*= КОДЫ КОМАНД ИЗМЕНЕНИЯ НАСТРОЕЧНЫХ ПАРАМЕТРОВ   ==========*/
  267          /*===========================================================*/
  268          
  269          ПЕРЕЧИСЛЕНИЕ {
  270          ИЗМН_НП_1 = ПК_ГУИ_ФП_P_ВтрубеСидер + 1,
  271          ИЗМН_НП_ЗД_P_ВбакеКомпрессора = ИЗМН_НП_1,
  272          ИЗМН_НП_ЗД_Pатмосф,
  273          ИЗМН_НП_ЗД_P_ВтрубеСидер,	
  274          ИЗМН_НП_ЗД_T_ВрубашкеНижняя,		/* добавлено 20 января 2014 */
  275          ИЗМН_НП_ЗД_T_ВрубашкеВерхняя,	/* добавлено 20 января 2014 */
  276          ИЗМН_НП_ЗД_T_ВбакеНижняя,/* добавлено 20 января 2014 */
  277          ИЗМН_НП_ЗД_T_ВбакеВерхняя,/* добавлено 20 января 2014 */
  278          
  279          ИЗМН_НП_ЗД_ПериодаКонтрP_ПриОткачке,  /* добавлено 7 января 2014 */
  280          ИЗМН_НП_ЗД_ПериодаКонтрP_ПриНатекании, /* добавлено 7 января 2014 */
  281          
  282          ИЗМН_НП_ЗД_Гист_T_Вбаке,
  283          ИЗМН_НП_ЗД_Гист_T_Врубашке,
  284          ИЗМН_НП_ЗД_Гист_P_ВбакеКомпрессора,
  285          ИЗМН_НП_ЗД_Гист_P_ВтрубеСидерВерх,
  286          ИЗМН_НП_ЗД_Гист_P_ВтрубеСидерНиж,
  287          
  288          ИЗМН_НП_N
  289          };
  290          
  291          /*===========================================================*/
  292          /*========= КОДЫ СООБЩЕНИЙ  О НЕВЕРНОЙ КОМАНДЕ ==============*/
  293          /*===========================================================*/
  294          
  295          
  296          ПЕРЕЧИСЛЕНИЕ {
  297               ПК_ГУИ_ОШИБКА_КОДА_КОМАНДЫ_ОТ_ГУИ = ИЗМН_НП_N + 1  
  298          }; 
  299          
  300          /*###########################################################*/
  301          /*###########################################################*/
  302          /*########                                          #########*/
  303          /*########  ОПИСАНИЕ ФУНКЦИЙ                        #########*/
  304          /*########                                          #########*/
  305          /*########                                          #########*/
  306          /*###########################################################*/
  307          
  308          /*:::::::::Функции для работы  с ГУИ :::::::::::::::::::::   */
  309          
  310          /*чтение кода и параметра события от ПИВ из кольцевого буфера в память */
  311          ФУНКЦИЯ ЦЕЛ GetNextMsgGUI(ПУСТО);
  312          
  313          ФУНКЦИЯ ЦЕЛ  GetMsgGUICode        (ПУСТО);  /*чтение из памяти кода события */
  314          ФУНКЦИЯ ПЛАВ GetFloatParamGUI     (ПУСТО);  /*чтение из памяти параметра события  используется */
  315          /* ФУНКЦИЯ КЦЕЛ GetShortParamGUI     (ПУСТО); */
  316          ФУНКЦИЯ ЦЕЛ  GetIntParamGUI       (ПУСТО);  /*чтение с экрана гуи - не исползуется */
  317          ФУНКЦИЯ ДЦЕЛ GetLongParamGUI      (ПУСТО);  /*чтение с экрана гуи - исползуется */
  318          
  319          ФУНКЦИЯ ЦЕЛ  SendMsgGUICode       (ЦЕЛ);
  320          ФУНКЦИЯ ЦЕЛ  SendMsgFloatParamGUI (ЦЕЛ, ПЛАВ);
  321          /* ФУНКЦИЯ ЦЕЛ  SendMsgShortParamGUI (ЦЕЛ, КЦЕЛ); */
  322          /* ФУНКЦИЯ ЦЕЛ  SendMsgIntParamGUI   (ЦЕЛ, ЦЕЛ); */
  323          ФУНКЦИЯ ЦЕЛ  SendMsgLongParamGUI  (ЦЕЛ, ДЦЕЛ);
  324          
  325          ФУНКЦИЯ ЦЕЛ  InitChannelStatus_GUI (ПУСТО); /* инициализация статуса,
  326          /*обнуление числа ошибок */
  327          ФУНКЦИЯ ЦЕЛ  GetChannelStatus_GUI  (ПУСТО);  /* чтение статуса канала 0/1 - не исползуется*/
  328          ФУНКЦИЯ ЦЕЛ  GetErrorNumberCS_GUI  (ПУСТО);  /* чтение числа ошибок КС  - не исползуется*/
  329          ФУНКЦИЯ ЦЕЛ  GetErrorNumberTO_GUI  (ПУСТО);  /* чтение числа ошибок по тайм ауту - не исползуется*/
  330          ФУНКЦИЯ ЦЕЛ  GetInpMsgNumber_GUI (ПУСТО);  /* чтение числа сообщ. во входн. буфере - не исползуется*/
  331          ФУНКЦИЯ ЦЕЛ  GetOutMsgNumber_GUI (ПУСТО); /* чтение числа сообщ. в выходн. буфере -  не исползуется*/
  332          
  333          ФУНКЦИЯ ПЛАВ GetFP_P_BAK_COMPRESSOR		(ПУСТО);	/* чтение давления в баке компрессора */ 
  334          ФУНКЦИЯ ПЛАВ GetFP_P_PATRUBKA			(ПУСТО);   /* чтение давления  в патрубке      */
  335          ФУНКЦИЯ ПЛАВ GetFP_T_RUBACHKA			(ПУСТО);	/* чтение температуры воды в рубашке охлаждения */
  336          ФУНКЦИЯ ПЛАВ GetFP_T_BAK				(ПУСТО);	/* чтение температуры воды в баке охлаждения */ 
  337          ФУНКЦИЯ ПЛАВ GetFP_P_TRUBA				(ПУСТО);	/* чтение давления в трубе сидера */
  338          
  339          
  340          /*###########################################################*/
  341          /*########                                          #########*/
  342          /*########  ОПИСАНИЕ РЕГИСТРОВ МОДУЛЕЙ УСО          #########*/
  343          /*########  (устройство связи с объектом)           #########*/
  344          /*###########################################################*/
  345          
  346          ВХОД  К_ЛОГ_ВХОД_ОТКР_ЗАТВОР_ВАК  	0 0 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  347          ВХОД  К_ЛОГ_ВХОД_ЗАКР_ЗАТВОР_ВАК  	0 1 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  348          ВХОД  К_ЛОГ_ВХОД_САПУН  			0 2 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  349          ВХОД  К_ЛОГ_ВХОД_УСТР_ПЛАВ_ПУСКА  	0 3 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  350          ВХОД  К_ЛОГ_ВХОД_ПИТ_УПП_ВАК_НАСОСА  	0 4 8; /* имя, базовый адрес, доп. адр. порта, 8бит */ 
  351          ВХОД  К_ЛОГ_ВХОД_ПИТ_ВЕНТИЛЯТОРА  	0 5 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  352          ВХОД  К_ЛОГ_ВХОД_ПИТ_РЕГ_Т  		0 6 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  353          ВХОД  К_ЛОГ_ВХОД_ПИТ_РЕГ_УР  		0 7 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  354          ВХОД  К_ЛОГ_ВХОД_УР_ВОДЫ_MIN  		0 8 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  355          ВХОД  К_ЛОГ_ВХОД_УР_ВОДЫ_MAX  		0 9 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  356          ВХОД  К_ЛОГ_ВХОД_ПИТ_НАСОС_ОХЛ  	0 10 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  357          ВХОД  К_ЛОГ_ВХОД_ШКАФ_ВС_380		0 11 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 23 января 2014 */
  358          /* входы для достоверностей фактических значений */
  359          ВХОД  К_ЛОГ_ВХОД_P_ВбакеКомпрессора	0 12 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  360          ВХОД  К_ЛОГ_ВХОД_P_Впатрубке		0 13 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  361          ВХОД  К_ЛОГ_ВХОД_T_Врубашке			0 14 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  362          ВХОД  К_ЛОГ_ВХОД_T_Вбаке			0 15 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  363          ВХОД  К_ЛОГ_ВХОД_P_ВтрубеСидер		0 16 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  364          
  365          
  366          
  367          
  368          /* ВХОД АЦП_T_Вбаке		 			0 66 16; */  /* регистр АЦП */
  369          /*ВХОД АЦП_T_Врубашке	 			0 67 16; */ /* регистр АЦП */
  370          /*ВХОД АЦП_P_ВтрубеСидер	 		0 68 16; */ /* регистр АЦП */
  371          /*ВХОД АЦП_P_Впатрубке 				0 69 16; */ /*   регистр АЦП */
  372          /*ВХОД АЦП_P_ВбакеКомпрессора 		0 70 16; */ /* регистр АЦП */
  373          
  374          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_ВЕНТИЛЯТОРА  1 0 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  375          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_РЕГ_Т		1 1 8;
  376          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_НАС_ОХЛ		1 2 8;
  377          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_УПП_ВАК_НАСОСА	1 3 8;  
  378          ВЫХОД  У_ЛОГ_ВЫХОД_ЗАТВОР_ВАК		1 4 8;
  379          ВЫХОД  У_ЛОГ_ВЫХОД_САПУН			1 5 8;
  380          ВЫХОД  У_ЛОГ_ВЫХОД_УСТР_ПЛАВ_ПУСКА	1 6 8;
  381          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_РЕГ_УР		1 7 8;
  382          
  383          
  384          /*ВЫХОД  ЛОГ_ВЫХОД_GPIO21  1 1 8; */ /* имя, базовый адрес, доп. адр. порта, 8бит */
  385          
  386          
  387          /*###########################################################*/
  388          /*########                                          #########*/
  389          /*########  ПРОЦЕССЫ                                #########*/
  390          /*########                                          #########*/
  391          /*###########################################################*/
  392          
  393          /*
  394           * Процесс Инициализация. Служит для
  395           * развертывания программы. Этот процесс (описанный
  396           * первым) - единственно активный процесс по запуску.
  397           * Кроме этого, процесс Инициализация содержит описание 
  398           * переменных для ссылок из других
  399           * процессов. Это удобно: описания локализованы в одном
  400           * месте.
  401          */
  402          
  403          ПРОЦ Инициализация{
  404          /*===========================================================*/
  405          /*=========== ОПИСАНИЕ ПЕРЕМЕННЫХ ===========================*/
  406          /*===========================================================*/
  407          
  408          /* ВХОДНЫЕ СИГНАЛЫ: */
  409          /*-----------------*/
  410          
  411          
  412          ЛОГ К_ОТКР_ЗАТВОР_ВАК          	= {К_ЛОГ_ВХОД_ОТКР_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ; /*  концевик затвора вакуумного*/
  413          ЛОГ Д_ОТКР_ЗАТВОР_ВАК          	= {К_ЛОГ_ВХОД_ОТКР_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ; /*  достоверность*/
  414          
  415          ЛОГ К_ЗАКР_ЗАТВОР_ВАК          	= {К_ЛОГ_ВХОД_ЗАКР_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ; /*  концевик затвора вакуумного*/
  416          ЛОГ Д_ЗАКР_ЗАТВОР_ВАК          	= {К_ЛОГ_ВХОД_ЗАКР_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ;
  417          
  418          ЛОГ К_САПУН                     = {К_ЛОГ_ВХОД_САПУН[1]} ДЛЯ ВСЕХ;
  419          ЛОГ Д_САПУН                     = {К_ЛОГ_ВХОД_САПУН[1]} ДЛЯ ВСЕХ;
  420          
  421          ЛОГ К_УСТР_ПЛАВ_ПУСКА			= {К_ЛОГ_ВХОД_УСТР_ПЛАВ_ПУСКА[1]} ДЛЯ ВСЕХ;
  422          ЛОГ Д_УСТР_ПЛАВ_ПУСКА			= {К_ЛОГ_ВХОД_УСТР_ПЛАВ_ПУСКА[1]} ДЛЯ ВСЕХ;
  423          
  424          ЛОГ К_ПИТ_УПП_ВАК_НАСОСА	 	= {К_ЛОГ_ВХОД_ПИТ_УПП_ВАК_НАСОСА[1]} ДЛЯ ВСЕХ; 
  425          ЛОГ Д_ПИТ_УПП_ВАК_НАСОСА		= {К_ЛОГ_ВХОД_ПИТ_УПП_ВАК_НАСОСА[1]} ДЛЯ ВСЕХ; 
  426          
  427          ЛОГ К_ПИТ_ВЕНТИЛЯТОРА           = {К_ЛОГ_ВХОД_ПИТ_ВЕНТИЛЯТОРА[1]} ДЛЯ ВСЕХ; 
  428          ЛОГ Д_ПИТ_ВЕНТИЛЯТОРА           = {К_ЛОГ_ВХОД_ПИТ_ВЕНТИЛЯТОРА[1]} ДЛЯ ВСЕХ; 
  429          
  430          ЛОГ К_ПИТ_РЕГ_Т 			    = {К_ЛОГ_ВХОД_ПИТ_РЕГ_Т[1]} ДЛЯ ВСЕХ;
  431          ЛОГ Д_ПИТ_РЕГ_Т 			    = {К_ЛОГ_ВХОД_ПИТ_РЕГ_Т[1]} ДЛЯ ВСЕХ;
  432          
  433          ЛОГ К_ПИТ_РЕГ_УР     			= {К_ЛОГ_ВХОД_ПИТ_РЕГ_УР[1]} ДЛЯ ВСЕХ;
  434          ЛОГ Д_ПИТ_РЕГ_УР     			= {К_ЛОГ_ВХОД_ПИТ_РЕГ_УР[1]} ДЛЯ ВСЕХ;
  435          
  436          ЛОГ К_УР_ВОДЫ_MIN  				= {К_ЛОГ_ВХОД_УР_ВОДЫ_MIN[1]} ДЛЯ ВСЕХ;
  437          ЛОГ Д_УР_ВОДЫ_MIN  				= {К_ЛОГ_ВХОД_УР_ВОДЫ_MIN[1]} ДЛЯ ВСЕХ;
  438          
  439          ЛОГ К_УР_ВОДЫ_MAX   			= {К_ЛОГ_ВХОД_УР_ВОДЫ_MAX[1]} ДЛЯ ВСЕХ;
  440          ЛОГ Д_УР_ВОДЫ_MAX   			= {К_ЛОГ_ВХОД_УР_ВОДЫ_MAX[1]} ДЛЯ ВСЕХ;
  441          
  442          ЛОГ К_ПИТ_НАСОС_ОХЛ 			= {К_ЛОГ_ВХОД_ПИТ_НАСОС_ОХЛ[1]} ДЛЯ ВСЕХ;
  443          ЛОГ Д_ПИТ_НАСОС_ОХЛ 			= {К_ЛОГ_ВХОД_ПИТ_НАСОС_ОХЛ[1]} ДЛЯ ВСЕХ;
  444          
  445          ЛОГ К_ШКАФ_ВС_380 				= {К_ЛОГ_ВХОД_ШКАФ_ВС_380[1]} ДЛЯ ВСЕХ;  /* добавлено 23 января 2014*/
  446          ЛОГ Д_ШКАФ_ВС_380 				= {К_ЛОГ_ВХОД_ШКАФ_ВС_380[1]} ДЛЯ ВСЕХ;	/* добавлено 23 января 2014*/
  447          
  448          /* для достоверностей фактических значений */
  449          
  450          ЛОГ К_ПУТО1 				= {К_ЛОГ_ВХОД_P_ВбакеКомпрессора[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  451          ЛОГ Д_P_ВбакеКомпрессора	= {К_ЛОГ_ВХОД_P_ВбакеКомпрессора[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  452          
  453          ЛОГ К_ПУТО2 				= {К_ЛОГ_ВХОД_P_Впатрубке[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  454          ЛОГ Д_P_Впатрубке			= {К_ЛОГ_ВХОД_P_Впатрубке[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  455          
  456          ЛОГ К_ПУТО3 				= {К_ЛОГ_ВХОД_T_Врубашке[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  457          ЛОГ Д_T_Врубашке			= {К_ЛОГ_ВХОД_T_Врубашке[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  458          
  459          ЛОГ К_ПУТО4 				= {К_ЛОГ_ВХОД_T_Вбаке[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  460          ЛОГ Д_T_Вбаке				= {К_ЛОГ_ВХОД_T_Вбаке[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  461          
  462          ЛОГ К_ПУТО5 				= {К_ЛОГ_ВХОД_P_ВтрубеСидер[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  463          ЛОГ Д_P_ВтрубеСидер			= {К_ЛОГ_ВХОД_P_ВтрубеСидер[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  464          
  465          
  466          /* ВЫХОДНЫЕ СИГНАЛЫ (т.к. привязаны к модулю выходов): */ 
  467          
  468          ЛОГ У_ПИТ_ВЕНТИЛЯТОРА   			= {У_ЛОГ_ВЫХОД_ПИТ_ВЕНТИЛЯТОРА[1]} ДЛЯ ВСЕХ; 
  469          ЛОГ У_ПИТ_РЕГ_Т      				= {У_ЛОГ_ВЫХОД_ПИТ_РЕГ_Т[1]} ДЛЯ ВСЕХ;   
  470          ЛОГ У_ПИТ_НАС_ОХЛ      				= {У_ЛОГ_ВЫХОД_ПИТ_НАС_ОХЛ[1]} ДЛЯ ВСЕХ;   
  471          ЛОГ У_ПИТ_УПП_ВАК_НАСОСА				= {У_ЛОГ_ВЫХОД_ПИТ_УПП_ВАК_НАСОСА[1]} ДЛЯ ВСЕХ; 
  472          ЛОГ У_ЗАТВОР_ВАК					= {У_ЛОГ_ВЫХОД_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ; 
  473          ЛОГ У_САПУН							= {У_ЛОГ_ВЫХОД_САПУН[1]} ДЛЯ ВСЕХ; 
  474          ЛОГ У_УСТР_ПЛАВ_ПУСКА				= {У_ЛОГ_ВЫХОД_УСТР_ПЛАВ_ПУСКА[1]} ДЛЯ ВСЕХ; 
  475          ЛОГ У_ПИТ_РЕГ_УР					= {У_ЛОГ_ВЫХОД_ПИТ_РЕГ_УР[1]} ДЛЯ ВСЕХ; 
  476          
  477          
  478          /*===========================================================*/
  479          /*=========== ЯЧЕЙКИ ИНФОРМАЦИОННЫХ КАНАЛОВ =================*/
  480          /*===========================================================*/
  481          ЦЕЛ КодСобытия_от_ГУИ        ДЛЯ ВСЕХ;
  482          ЦЕЛ КодСобытия_к_ГУИ         ДЛЯ ВСЕХ;
  483          
  484            
  485            
  486          /*===========================================================*/
  487          /*=========== ЯЧЕЙКИ ОБЩЕГО УПРАВЛЕНИЯ ======================*/
  488          /*===========================================================*/
  489          ЛОГ ФлагГотовУрВодыБО ДЛЯ ВСЕХ;  /* Флаг установлен, если уровень воды в баке охлаждения в норме*/ 
  490          ЛОГ ФлагГотовТемпВодыБО ДЛЯ ВСЕХ;  /* Флаг установлен, если  температура в баке охлаждения в норме*/ 
  491          ЦЕЛ ФлагГотовTВодыРО ДЛЯ ВСЕХ;  /* Флаг установлен, если  температура в рубашке охлаждения в норме*/ 
  492          ЛОГ ФлагГотовВакуумаВТ ДЛЯ ВСЕХ;
  493          ЛОГ ФлагОткачкиТрубыСидеростата ДЛЯ ВСЕХ;
  494          ЛОГ ФлагДавленияКомпрессора ДЛЯ ВСЕХ;
  495          
  496          /* Состояние оборудования (пока не используется)*/
  497          
  498          ЛОГ ФлагСостоянияВентилятора ДЛЯ ВСЕХ;
  499          ЛОГ ФлагСостоянияЗатвораВакуумного ДЛЯ ВСЕХ;
  500          ЛОГ ФлагСостоянияСапуна ДЛЯ ВСЕХ;
  501          ЛОГ ФлагСостоянияУстройстваПлавногоПуска ДЛЯ ВСЕХ;
  502          ЛОГ ФлагСостоянияВакуумногоНасоса ДЛЯ ВСЕХ;
  503          ЛОГ ФлагСостоянияРегулятораТемпературы ДЛЯ ВСЕХ;			
  504          ЛОГ ФлагСостоянияРегулятораУровня ДЛЯ ВСЕХ;
  505          ЛОГ ФлагСостоянияНасосаОхлаждения ДЛЯ ВСЕХ;	
  506          		
  507          /*добавлено 15 января 2014 г. для того, чтобы не использовать К_ в высокоуровневых процессах */
  508          ЛОГ КонцевикОткрытияЗатвораВакуумного ДЛЯ ВСЕХ; /*  концевик затвора вакуумного*/
  509          ЛОГ КонцевикЗакрытияЗатвораВакуумного ДЛЯ ВСЕХ;/*  концевик затвора вакуумного*/
  510          ЛОГ СостояниеСапуна 					ДЛЯ ВСЕХ;
  511          ЛОГ СостояниеУСТР_ПЛАВ_ПУСКА 			ДЛЯ ВСЕХ;
  512          ЛОГ СостояниеУППВакуумногоНасоса 			ДЛЯ ВСЕХ;
  513          ЛОГ СостояниеВентилятора 				ДЛЯ ВСЕХ;
  514          ЛОГ СостояниеПитШкафаВС380 				ДЛЯ ВСЕХ;
  515          ЛОГ СостояниеПИТ_РЕГ_Т 				ДЛЯ ВСЕХ;
  516          ЛОГ СостояниеПИТ_РЕГ_УР 			ДЛЯ ВСЕХ;
  517          ЛОГ СостояниеПИТ_НАСОС_ОХЛ 			ДЛЯ ВСЕХ;
  518          
  519          ЛОГ СвязьС_P_ВбакеКомпрессора 		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  520          ЛОГ	СвязьС_P_Впатрубке 				ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  521          ЛОГ	СвязьС_T_Врубашке 				ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  522          ЛОГ	СвязьС_T_Вбаке	 				ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  523          ЛОГ	СвязьС_P_ВтрубеСидер			ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  524          
  525          ЛОГ	СвязьС_РегуляторомУровня		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  526          ЛОГ	СвязьС_РегуляторомТемпературы	ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  527          ЛОГ	СвязьС_Вентилятором				ДЛЯ ВСЕХ;			/* 18 августа 2014 */			
  528          ЛОГ	СвязьС_НасосомОхлаждения		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  529          ЛОГ	СвязьС_КонцевикомОткрытияЗВ		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  530          ЛОГ	СвязьС_КонцевикомЗакрытияЗВ		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  531          	
  532          ЛОГ	СвязьС_КонцевикомСапуна			ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  533          ЛОГ	СвязьС_ПитаниемПлавногоПуска	ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  534          ЛОГ	СвязьС_ПлавнымПуском			ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  535          /*а связь с концевиками уровня воды????*/
  536          
  537          ЛОГ К_Достоверности 				ДЛЯ ВСЕХ;			/* добавлено 16 января 2014*/
  538          
  539          ДЦЕЛ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА ДЛЯ ВСЕХ; /* ????????чтобы в отмену не уходить */
  540          
  541          
  542          /*===========================================================*/
  543          /*=========== ФАКТИЧЕСКИЕ ПАРАМЕТРЫ =========================*/
  544          /*===========================================================*/
  545          /*ПЛАВ ФП_Pтрубы ДЛЯ ВСЕХ;*/
  546          /* ????????????????????????????????????????????????????????????????? */
  547          /*  Саша Курочкин будет ацепировать */
  548          /*ЦЕЛ	ФП_P_ВбакеКомпрессора 	= {P_ВбакеКомпрессора [16]} 	ДЛЯ ВСЕХ; */
  549          /*ЦЕЛ	ФП_P_Впатрубке	 		= {P_Впатрубке [16]}			ДЛЯ ВСЕХ; 	*/
  550          /*ЦЕЛ	ФП_T_Врубашке 			= {T_Врубашке [16]}				ДЛЯ ВСЕХ; 	*/
  551          /*ЦЕЛ	ФП_T_Вбаке 				= {T_Вбаке [16]}				ДЛЯ ВСЕХ;	*/ 
  552          /*ЦЕЛ	ФП_P_ВтрубеСидер 		= {P_ВтрубеСидер [16]} 			ДЛЯ ВСЕХ; 	*/
  553          
  554          
  555          ПЛАВ ФП_P_ВбакеКомпрессора ДЛЯ ВСЕХ; 
  556          ПЛАВ ФП_P_Впатрубке ДЛЯ ВСЕХ;
  557          ПЛАВ ФП_T_Врубашке ДЛЯ ВСЕХ;	
  558          ПЛАВ ФП_T_Вбаке ДЛЯ ВСЕХ;
  559          ПЛАВ ФП_P_ВтрубеСидер ДЛЯ ВСЕХ;
  560          /*===========================================================*/
  561          /*============       НАСТРОЕЧНЫЕ ПАРАМЕТРЫ        ===========*/
  562          /*===========================================================*/
  563          ПЛАВ НП_ЗД_P_ВбакеКомпрессора  ДЛЯ ВСЕХ;
  564          ПЛАВ НП_ЗД_Pатмосф             ДЛЯ ВСЕХ;
  565          ПЛАВ НП_ЗД_P_ВтрубеСидер ДЛЯ ВСЕХ;
  566          
  567          ПЛАВ НП_ЗД_T_ВрубашкеНижняя  		ДЛЯ ВСЕХ;	/* добавлено 20 января 2014 */
  568          ПЛАВ НП_ЗД_T_ВрубашкеВерхняя  		ДЛЯ ВСЕХ;	/* добавлено 20 января 2014 */
  569          ПЛАВ НП_ЗД_T_ВбакеНижняя  			ДЛЯ ВСЕХ;	/* добавлено 20 января 2014 */
  570          ПЛАВ НП_ЗД_T_ВбакеВерхняя  			ДЛЯ ВСЕХ;	/* добавлено 20 января 2014 */
  571          
  572          ДЦЕЛ НП_ЗД_ПериодаКонтрP_ПриОткачке ДЛЯ ВСЕХ;  /* добавлено 7 января 2014 */
  573          ДЦЕЛ НП_ЗД_ПериодаКонтрP_ПриНатекании ДЛЯ ВСЕХ; /* добавлено 7 января 2014 */
  574          
  575          ПЛАВ НП_ЗД_Гист_T_Вбаке  			ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  576          ПЛАВ НП_ЗД_Гист_T_Врубашке  		ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  577          ПЛАВ НП_ЗД_Гист_P_ВбакеКомпрессора 	ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  578          ПЛАВ НП_ЗД_Гист_P_ВтрубеСидерВерх  	ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  579          ПЛАВ НП_ЗД_Гист_P_ВтрубеСидерНиж  	ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  580          
  581          /*########  СОСТОЯНИЯ ПРОЦЕССА  #########*/
  582           СОСТ Начало{ 		/* добавлено 16 января 2014 */
  583          	ФлагГотовУрВодыБО = ВНЕ_НОРМЫ;
  584          	ФлагГотовТемпВодыБО = ВНЕ_НОРМЫ;
  585          	ФлагГотовTВодыРО = ВНЕ_НОРМЫ;
  586          	ФлагГотовВакуумаВТ = ВНЕ_НОРМЫ;
  587          	ФлагОткачкиТрубыСидеростата = ВНЕ_НОРМЫ;
  588          	ФлагДавленияКомпрессора = ВНЕ_НОРМЫ;
  589          /*ШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШ*/
  590          /* сделано для отладки, т.к. у нас нет имитаторов всех элементов вак. системы         */
  591          /*	К_Достоверности = Не_проверяются; */			/* режим без проверки достоверностей К*/
  592          	К_Достоверности = Проверяются;		/* режим с проверкой достоверностей К     */
  593          /*ШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШ*/
  594          	/*======================================================================================*/
  595          	/*Процессы. для отображения на ГУИ наличие связи с датчиками, а точнее с мохами			*/	
  596          	/*  Сообщают: есть связь или нет														*/
  597          	/*======================================================================================*/	
  598          	СТАРТ ПРОЦ КонтрольДостоверностиОткрЗатВакуумного;
  599          	СТАРТ ПРОЦ КонтрольДостоверностиЗакрЗатВакуумного;
  600          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияСапуна;
  601          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияУстройстваПлавПуска;
  602          	СТАРТ ПРОЦ КонтрольДостоверностиСостПитанияУППВакНасоса;
  603          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияВентилятора;
  604          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияРегТемпературы;
  605          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияРегУровня;
  606          	СТАРТ ПРОЦ КонтрольДостоверностиУровняВодыМинимум;
  607          	СТАРТ ПРОЦ КонтрольДостоверностиУровняВодыМаксимум;
  608          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияНасОхлаждения;
  609          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияШКАФА_ВС;   
  610          	СТАРТ ПРОЦ КонтрольДостоверностиДавленияВбакеКомпрессора;
  611          	СТАРТ ПРОЦ КонтрольДостоверностиДавленияВпатрубке;
  612          	СТАРТ ПРОЦ КонтрольДостоверностиТемпературыВрубашкеОхлаждения;
  613          	СТАРТ ПРОЦ КонтрольДостоверностиТемпературыВбакеОхлаждения;
  614          	СТАРТ ПРОЦ КонтрольДостоверностиДавленияВтрубеСидеростата;
  615          	В СЛЕДУЮЩЕЕ;
  616           }
  617           /* это чтобы лампочку погасить*/
  618           	СОСТ КонтрольИдетЛиВакуумированиеВакуумирования{
  619          		ЕСЛИ ((ПРОЦ  ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) &&
  620          			(ПРОЦ  ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ)) {
  621          				ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВЫКЛЮЧЕНО)) В СЛЕДУЮЩЕЕ;
  622          		}
  623          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  624          	}
  625           
  626           СОСТ ВыборРаботыСдостоверностями{
  627          
  628          	ЕСЛИ (К_Достоверности == Не_проверяются) В СОСТ НеПроверяемДостоверностьКонтроля;
  629          	ИНАЧЕ В СОСТ ПроверяемДостоверностьКонтроля;
  630           }
  631           СОСТ НеПроверяемДостоверностьКонтроля{  /* восстановление управления*/
  632          	/* позволяет установить управленческие команды по контрольным сигналам*/
  633          	ЕСЛИ (К_САПУН) 				У_САПУН = ВКЛ;
  634          	ЕСЛИ (К_УСТР_ПЛАВ_ПУСКА) 	У_УСТР_ПЛАВ_ПУСКА = ВКЛ;
  635          	ЕСЛИ (К_ПИТ_УПП_ВАК_НАСОСА) 	У_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;   
  636          	ЕСЛИ (К_ПИТ_ВЕНТИЛЯТОРА) 	У_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;
  637          	ЕСЛИ (К_ПИТ_РЕГ_Т) 			У_ПИТ_РЕГ_Т = ВКЛ;
  638          	ЕСЛИ (К_ПИТ_РЕГ_УР) 		У_ПИТ_РЕГ_УР = ВКЛ;
  639          	ЕСЛИ (К_ПИТ_НАСОС_ОХЛ) 		У_ПИТ_НАС_ОХЛ = ВКЛ;	
  640          	ЕСЛИ  ((К_ОТКР_ЗАТВОР_ВАК) && (!К_ЗАКР_ЗАТВОР_ВАК)) 	У_ЗАТВОР_ВАК = ОТКР; 
  641          	ЕСЛИ ((!К_ОТКР_ЗАТВОР_ВАК) && (К_ЗАКР_ЗАТВОР_ВАК)) 		У_ЗАТВОР_ВАК = ЗАКР;
  642          	
  643          	В СОСТ НачалоРаботы; 
  644           }
  645           СОСТ ПроверяемДостоверностьКонтроля{   /* восстановление управления и ожидание достоверных данных*/
  646          										/* т.к. от железа в момент включения true может прийти*/
  647          							
  648          										
  649          	ЕСЛИ ( 	
  650          			(Д_P_ВбакеКомпрессора) &&		/* август 2014*/
  651          			(Д_P_Впатрубке) &&
  652          			(Д_T_Врубашке) &&
  653          			(Д_T_Вбаке) &&
  654          			(Д_P_ВтрубеСидер) &&
  655          			
  656          			(Д_ОТКР_ЗАТВОР_ВАК) &&				
  657          			(Д_ЗАКР_ЗАТВОР_ВАК) &&
  658          			(Д_САПУН) &&
  659          			(Д_УСТР_ПЛАВ_ПУСКА) &&
  660          			(Д_ПИТ_УПП_ВАК_НАСОСА) &&     
  661          			(Д_ПИТ_ВЕНТИЛЯТОРА) &&
  662          			(Д_ПИТ_РЕГ_Т) &&
  663          			(Д_ПИТ_РЕГ_УР) &&
  664          			(Д_УР_ВОДЫ_MIN) &&
  665          			(Д_УР_ВОДЫ_MAX) &&
  666          			(Д_ПИТ_НАСОС_ОХЛ) && 
  667          			(Д_ШКАФ_ВС_380)  
  668          			) {
  669          				ЕСЛИ (К_САПУН) 				У_САПУН = ВКЛ;
  670          				ЕСЛИ (К_УСТР_ПЛАВ_ПУСКА)	У_УСТР_ПЛАВ_ПУСКА = ВКЛ;
  671          				ЕСЛИ (К_ПИТ_УПП_ВАК_НАСОСА)  	У_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;   
  672          				ЕСЛИ (К_ПИТ_ВЕНТИЛЯТОРА)  	У_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;
  673          				ЕСЛИ (К_ПИТ_РЕГ_Т)			У_ПИТ_РЕГ_Т = ВКЛ;
  674          				ЕСЛИ (К_ПИТ_РЕГ_УР) 		У_ПИТ_РЕГ_УР = ВКЛ;
  675          				ЕСЛИ (К_ПИТ_НАСОС_ОХЛ)   	У_ПИТ_НАС_ОХЛ = ВКЛ;
  676          				ЕСЛИ  ((К_ОТКР_ЗАТВОР_ВАК) && (!К_ЗАКР_ЗАТВОР_ВАК)) У_ЗАТВОР_ВАК = ОТКР; 
  677          				ЕСЛИ ((!К_ОТКР_ЗАТВОР_ВАК) && (К_ЗАКР_ЗАТВОР_ВАК)) 	У_ЗАТВОР_ВАК = ЗАКР; 
  678          				В СОСТ НачалоРаботы;
  679          	}
  680          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ;
  681           }
  682           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  683          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕДОСТОВЕРНЫЕ_ДАННЫЕ_ОБОРУДОВАНИЯ_ВАК_СИСТЕМЫ)) В СОСТ ВыборРаботыСдостоверностями;
  684          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  685           }
  686          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
  687          	СОСТ НарушениеСвязи {
  688          		В СОСТ ВыборРаботыСдостоверностями;
  689          		/* Это главный процесс, поэтому пока не появятся достоверности, я зацикливаю*/	
  690          	}
  691          
  692          СОСТ НачалоРаботы{	
  693          /*    ОШИБКА_ФУНКЦИОНИРОВАНИЯ = ВЫК;  */
  694              ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА = 1; /* параметр регулирует частоту подачи */
  695          	                                   /* сообщений в зависимости от заполненности буфера сообщений... */
  696          
  697          /*===========================================================*/
  698          /*========= ИНИЦИАЛИЗАЦИЯ НАСТРОЕЧНЫХ ПАРАМЕТРОВ   ==========*/
  699          /*===========================================================*/
  700          /*	Их надо читать из конфигурационного файла */
  701          
  702          	НП_ЗД_P_ВбакеКомпрессора = 4; /*атмосфер (бар) */  /* 14 декабря */
  703          	НП_ЗД_Pатмосф            = 0.05; 
  704          	НП_ЗД_P_ВтрубеСидер =  0.05; /* атмосфер*/	/* 6 декабря ???????*/
  705          	НП_ЗД_T_ВрубашкеНижняя  	= 		15.0;		/* добавлено 20 января 2014 */
  706          	НП_ЗД_T_ВрубашкеВерхняя  = 	70.0;	/*85.0;*/	/* добавлено 20 января 2014 */
  707          	НП_ЗД_T_ВбакеНижняя =  	10.0;/* добавлено 20 января 2014 */
  708          	НП_ЗД_T_ВбакеВерхняя =  	60.0;/* добавлено 20 января 2014 */
  709          
  710          	НП_ЗД_ПериодаКонтрP_ПриОткачке  = 2.0;    /*2 минуты  */     /* добавлено 7 января 2014 */
  711          	НП_ЗД_ПериодаКонтрP_ПриНатекании = 15.0;    /*15 минут  */  /* добавлено 7 января 2014 */	
  712          	
  713          	НП_ЗД_Гист_T_Вбаке = 2;  				/* добавлено 3 февраля 2014 */
  714          	НП_ЗД_Гист_T_Врубашке = 2;  			/* добавлено 3 февраля 2014 */
  715          	НП_ЗД_Гист_P_ВбакеКомпрессора = 0.5;	/* добавлено 3 февраля 2014 */
  716          	НП_ЗД_Гист_P_ВтрубеСидерВерх = 0.005;	/* добавлено 3 февраля 2014 */
  717          	НП_ЗД_Гист_P_ВтрубеСидерНиж = 0.0025;	/* добавлено 3 февраля 2014 */
  718          	
  719          	СТАРТ ПРОЦ ЧтениеКольцевогоБуфера;	
  720              СТАРТ ПРОЦ РЕГУЛЯТОР_ТРАФИКА;
  721          	/*======================================================================================*/
  722          	/*Если идет вакуумирование трубы, то данные процессы пытаются выключить вакуумирование,	*/
  723          	/*	если связи нет. Если удается выключить, то на начало, иначе - выдается сообщение 	*/
  724          	/* о ручном выключении из подвала и делается переход на рестарт главного процесса 		*/
  725          	/*======================================================================================*/
  726          	СТАРТ ПРОЦ ЧтениеДавленияВбакеКомпрессора;			/*	18 августа 2014	*/
  727          	СТАРТ ПРОЦ ЧтениеДавленияВпатрубке;					/*	18 августа 2014	*/
  728          	СТАРТ ПРОЦ ЧтениеТемпературыВрубашкеОхлаждения;  	/* 	18 августа 2014	*/
  729          	СТАРТ ПРОЦ ЧтениеТемпературыВбакеОхлаждения;		/*	18 августа 2014	*/
  730          	СТАРТ ПРОЦ ЧтениеДавленияВтрубеСидеростата;			/*	18 августа 2014	*/
  731             	СТАРТ ПРОЦ ПроверкаСвязиС_РегуляторомУровня; 		/*	18 августа 2014	*/
  732          	СТАРТ ПРОЦ ПроверкаСвязиС_РегуляторомТемпературы; 	/*	18 августа 2014	*/
  733          	СТАРТ ПРОЦ ПроверкаСвязиС_Вентилятором;	/*	18 августа 2014	*/
  734          	СТАРТ ПРОЦ ПроверкаСвязиС_НасососомОхлажденияДвигателя;  /*	18 августа 2014	*/
  735          	СТАРТ ПРОЦ ПроверкаСвязиС_КонцевикомОткрытияЗатвораВакуумного;  /*	18 августа 2014	*/
  736          	СТАРТ ПРОЦ ПроверкаСвязиС_КонцевикомЗакрытияЗатвораВакуумного;  /*	18 августа 2014	*/
  737          	СТАРТ ПРОЦ ПроверкаСвязиС_КонцевикомСапуна;  /*	18 августа 2014	*/
  738          	СТАРТ ПРОЦ ПроверкаСвязиС_ПитаниемПлавногоПуска;  /*	18 августа 2014	*/
  739          	СТАРТ ПРОЦ ПроверкаСвязиС_ПлавнымПуском;  /*	18 августа 2014	*/		
  740          	/*======================================================================================*/	
  741          	
  742          	СТАРТ ПРОЦ КонтрольИзменения_ФП_P_ВбакеКомпрессора;
  743          	СТАРТ ПРОЦ КонтрольИзменения_ФП_P_Впатрубке;
  744          	СТАРТ ПРОЦ КонтрольИзменения_ФП_T_Врубашке;
  745          	СТАРТ ПРОЦ КонтрольИзменения_ФП_T_Вбаке;
  746          	СТАРТ ПРОЦ КонтрольИзменения_ФП_P_ВтрубеСидер;
  747          	/**/
  748          	СТАРТ ПРОЦ КонтрольТемпературыРубашкиОхлаждения;
  749          	СТАРТ ПРОЦ КонтрольДавленияВбакеКомпрессора;    /* выдает Норма  не норма */
  750          	СТАРТ ПРОЦ КонтрольАварийногоДавленияВбакеКомпрессора;	/*  нет  дублирования */
  751          	СТАРТ ПРОЦ КонтрольАварийнойТемпературыВрубашкеОхлаждения;
  752          	СТАРТ ПРОЦ КонтрольАварийнойТемпературыВбакеОхлаждения;
  753          	СТАРТ ПРОЦ КонтрольУровняВодыБакаОхлаждения;  
  754          	СТАРТ ПРОЦ КонтрольТемпературыВодыБакаОхлаждения;
  755          	
  756          	/*======================================================================================*/
  757          	/*  триггерные процессы, информирующие состояние элементов вакуумной системы: вкл или выкл*/	
  758          	/*======================================================================================*/
  759          	СТАРТ ПРОЦ КонтрольСостоянияПитанияВентилятора; 
  760          	СТАРТ ПРОЦ КонтрольСостоянияПитанияСапуна;
  761          	СТАРТ ПРОЦ КонтрольСостоянияПитанияУППВакНасоса;
  762          	СТАРТ ПРОЦ КонтрольСостоянияПитанияРЕГ_Т;
  763          	СТАРТ ПРОЦ КонтрольСостоянияПитанияРЕГ_УР;
  764          	СТАРТ ПРОЦ КонтрольСостоянияПитанияНАС_ОХЛ;
  765          	СТАРТ ПРОЦ КонтрольСостоянияПитанияПЛАВ_ПУСКА;
  766          	СТАРТ ПРОЦ КонтрольСостоянияПитанияШКАФА_ВС; /*добавлено 27 января 2014 */
  767          	СТАРТ ПРОЦ КонтрольСостоянияЗатвораВакуумного;
  768          	/*======================================================================================*/	
  769          	СТАРТ ПРОЦ КонтрольГотовностиВакуума_в_Вакуумной_Трубе;
  770          	
  771          	СТОП;
  772           }
  773          }
  774          /*========================================================*/
  775          /*                                                        */
  776          /*==            Останов всех процессов и старт по-новой ==*/
  777          /*                                                        */
  778          /*========================================================*/
  779          ПРОЦ ОстановВсехПроцессовИстартПроцИнициализация{
  780          	СОСТ Начало{
  781          /*		СТОП ПРОЦ РЕГУЛЯТОР_ТРАФИКА; */
  782          /*		СТОП ПРОЦ ЧтениеКольцевогоБуфера;*/
  783          		СТОП ПРОЦ ОбработкаКомандИзмененияНП_от_ГУИ;
  784          		СТОП ПРОЦ ОбработкаКомандУправления_от_ГУИ; 
  785          /*******  добавлено 16 июля 2014*/		
  786          		СТОП ПРОЦ ЧтениеДавленияВбакеКомпрессора;
  787          		СТОП ПРОЦ ЧтениеДавленияВпатрубке;
  788          		СТОП ПРОЦ ЧтениеТемпературыВрубашкеОхлаждения;  /* добавлено 13 мая 2014*/
  789          		СТОП ПРОЦ ЧтениеТемпературыВбакеОхлаждения;
  790          		СТОП ПРОЦ ЧтениеДавленияВтрубеСидеростата;
  791          /*  добавлено 22 августа 2014*/	
  792          		СТОП ПРОЦ ПроверкаСвязиС_РегуляторомУровня; /*	 августа 2014	*/
  793          		СТОП ПРОЦ ПроверкаСвязиС_РегуляторомТемпературы; /*	18 августа 2014	*/
  794          		СТОП ПРОЦ ПроверкаСвязиС_Вентилятором;	/*	 августа 2014	*/
  795          		СТОП ПРОЦ ПроверкаСвязиС_НасососомОхлажденияДвигателя;  /*	18 августа 2014	*/
  796          		СТОП ПРОЦ ПроверкаСвязиС_КонцевикомОткрытияЗатвораВакуумного;  /*	18 августа 2014	*/
  797          		СТОП ПРОЦ ПроверкаСвязиС_КонцевикомЗакрытияЗатвораВакуумного;  /*	18 августа 2014	*/	
  798          		СТОП ПРОЦ ПроверкаСвязиС_КонцевикомСапуна;  /*	18 августа 2014	*/	
  799          		СТОП ПРОЦ ПроверкаСвязиС_ПитаниемПлавногоПуска;  /*	18 августа 2014	*/
  800          		СТОП ПРОЦ ПроверкаСвязиС_ПлавнымПуском;  /*	18 августа 2014	*/			
  801          		
  802          	
  803          		
  804          /*        добавлено 16 июля 2014*/
  805          		
  806          		СТОП ПРОЦ КонтрольИзменения_ФП_P_ВбакеКомпрессора; 
  807          		СТОП ПРОЦ КонтрольИзменения_ФП_P_Впатрубке; 
  808          		СТОП ПРОЦ КонтрольИзменения_ФП_T_Врубашке;	
  809          		СТОП ПРОЦ КонтрольИзменения_ФП_T_Вбаке;	
  810          		СТОП ПРОЦ КонтрольИзменения_ФП_P_ВтрубеСидер; 
  811          
  812          		СТОП ПРОЦ КонтрольВеличиныОткачкиВауумнойТрубыСидеростата;
  813          		СТОП ПРОЦ КонтрольГотовностиВакуума_в_Вакуумной_Трубе;
  814          		СТОП ПРОЦ КонтрольУровняВодыБакаОхлаждения;  
  815          		СТОП ПРОЦ КонтрольТемпературыВодыБакаОхлаждения; 
  816          		СТОП ПРОЦ КонтрольТемпературыРубашкиОхлаждения;
  817          		СТОП ПРОЦ КонтрольДавленияВбакеКомпрессора;
  818          		
  819          		СТОП ПРОЦ КонтрольАварийногоДавленияВбакеКомпрессора;
  820          		СТОП ПРОЦ КонтрольАварийнойТемпературыВрубашкеОхлаждения;
  821          		СТОП ПРОЦ КонтрольАварийнойТемпературыВбакеОхлаждения;
  822          		
  823          		СТОП ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР;
  824          		СТОП ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР;
  825          		СТОП ПРОЦ КонтрольСостоянияПитанияВентилятора; 
  826          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияВентилятора;
  827          		СТОП ПРОЦ КонтрольСпонтанногоВключенияВентилятора;
  828          		СТОП ПРОЦ ОТКР_ЗАТВОР_ВАК;
  829          		СТОП ПРОЦ ЗАКР_ЗАТВОР_ВАК;
  830          		СТОП ПРОЦ КонтрольСостоянияЗатвораВакуумного;  /* 12 декабря*/
  831          		СТОП ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного;
  832          		СТОП ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного;
  833          		СТОП ПРОЦ ОТКР_САПУН;
  834          		СТОП ПРОЦ ЗАКР_САПУН;
  835          		СТОП ПРОЦ КонтрольСпонтанногоЗакрытияСапуна;
  836          		СТОП ПРОЦ КонтрольСпонтанногоОткрытияСапуна;
  837          		СТОП ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА;  
  838          		СТОП ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА;  
  839          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса;  
  840          		СТОП ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса;	
  841          /*		СТОП ПРОЦ ВКЛ_ПИТ_РЕГ_Т;  */
  842          /*		СТОП ПРОЦ ВЫК_ПИТ_РЕГ_Т;   */
  843          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т;
  844          		СТОП ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т;
  845          /*		СТОП ПРОЦ ВКЛ_ПИТ_РЕГ_УР;  */
  846          /*		СТОП ПРОЦ ВЫК_ПИТ_РЕГ_УР;  */
  847          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР;
  848          		СТОП ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР;
  849          		СТОП ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;
  850          		СТОП ПРОЦ ВЫК_ПИТ_НАС_ОХЛ;
  851          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения;
  852          		СТОП ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения;
  853          		СТОП ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА;
  854          		СТОП ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА;
  855          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска;
  856          		СТОП ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска;
  857          		СТОП ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС;
  858          		/* 23 сентября ЛЯХ */
  859          		СТОП ПРОЦ КонтрольСостоянияОборудования;
  860          		СТОП ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС; 
  861          		СТОП ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ;
  862          		СТОП ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ;  /* 12 декабря !*/
  863          		СТОП ПРОЦ КонтрольСостоянияПитанияШКАФА_ВС;
  864          
  865          		
  866          /*		СТОП ПРОЦ КонтрольДостоверностиОткрЗатВакуумного;  */
  867          /*		СТОП ПРОЦ КонтрольДостоверностиЗакрЗатВакуумного;	*/
  868          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияСапуна;	*/
  869          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияУстройстваПлавПуска;*/
  870          /*		СТОП ПРОЦ КонтрольДостоверностиСостПитанияУППВакНасоса;*/
  871          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияВентилятора;*/
  872          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияРегТемпературы;*/
  873          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияРегУровня;*/
  874          /*		СТОП ПРОЦ КонтрольДостоверностиУровняВодыМинимум;*/
  875          /*		СТОП ПРОЦ КонтрольДостоверностиУровняВодыМаксимум;*/
  876          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияНасОхлаждения;*/
  877          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияШКАФА_ВС;*/
  878          /*		СТОП ПРОЦ КонтрольДостоверностиДавленияВбакеКомпрессора;*/
  879          /*		СТОП ПРОЦ КонтрольДостоверностиДавленияВпатрубке;*/
  880          /*		СТОП ПРОЦ КонтрольДостоверностиТемпературыВрубашкеОхлаждения;*/
  881          /*		СТОП ПРОЦ КонтрольДостоверностиТемпературыВбакеОхлаждения;*/
  882          /*		СТОП ПРОЦ КонтрольДостоверностиДавленияВтрубеСидеростата;*/
  883          		СТАРТ ПРОЦ Инициализация;
  884          		СТОП;
  885          	}
  886          }
  887          
  888          /*========================================================*/
  889          /*== Процессы контроля достоверности параметров К       ==*/
  890          /*      от Курочкина  (от девайсиков)                    */
  891          /*========================================================*/
  892          /* Данные процессы контроля достоверности (связи)         */
  893          /* 												          */
  894          /*===========================================Бак компрессора =============*/
  895          /* добавлено 13 мая 2014 */
  896          ПРОЦ КонтрольДостоверностиДавленияВбакеКомпрессора{
  897           ИЗ ПРОЦ Инициализация  Д_P_ВбакеКомпрессора;
  898          
  899           СОСТ Начало {
  900                ЕСЛИ (Д_P_ВбакеКомпрессора == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  901                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
  902           }
  903           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
  904               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_БАКЕ_КОМПРЕССОРА)) В СЛЕДУЮЩЕЕ;
  905               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  906           }
  907           СОСТ ОжиданиеНедостоверности {
  908                ЕСЛИ (Д_P_ВбакеКомпрессора == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  909           }
  910           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  911               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_БАКЕ_КОМПРЕССОРА)) В СЛЕДУЮЩЕЕ;
  912               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  913           }
  914           СОСТ ОжиданиеЕстьДостоверность {
  915                ЕСЛИ (Д_P_ВбакеКомпрессора == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
  916           }
  917          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
  918           СОСТ НарушениеСвязи {
  919          	   В СОСТ Начало;
  920           }
  921          }
  922          /*===========================================Патрубок =============*/
  923          /* добавлено 13 мая 2014 */
  924          ПРОЦ КонтрольДостоверностиДавленияВпатрубке{
  925           ИЗ ПРОЦ Инициализация  Д_P_Впатрубке;
  926          
  927           СОСТ Начало {
  928                ЕСЛИ (Д_P_Впатрубке == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  929                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
  930           }
  931           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
  932               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_ПАТРУБКЕ)) В СЛЕДУЮЩЕЕ;
  933               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  934           }
  935           СОСТ ОжиданиеНедостоверности {
  936                ЕСЛИ (Д_P_Впатрубке == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  937           }
  938           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  939               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_ПАТРУБКЕ)) В СЛЕДУЮЩЕЕ;
  940               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  941           }
  942           СОСТ ОжиданиеЕстьДостоверность {
  943                ЕСЛИ (Д_P_Впатрубке == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
  944           }
  945          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
  946           СОСТ НарушениеСвязи {
  947          	   В СОСТ Начало;
  948           }
  949          }
  950          
  951          /*===============================Рубашка охлаждения =============*/
  952          /* добавлено 13 мая 2014 */
  953          ПРОЦ КонтрольДостоверностиТемпературыВрубашкеОхлаждения{
  954           ИЗ ПРОЦ Инициализация  Д_T_Врубашке;
  955          
  956           СОСТ Начало {
  957                ЕСЛИ (Д_T_Врубашке == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  958                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
  959           }
  960           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
  961               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ТЕМПЕРАТУРОЙ_В_РУБАШКЕ_ОХЛ)) В СЛЕДУЮЩЕЕ;
  962               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  963           }
  964           СОСТ ОжиданиеНедостоверности {
  965                ЕСЛИ (Д_T_Врубашке == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  966           }
  967           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  968               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ТЕМПЕРАТУРОЙ_В_РУБАШКЕ_ОХЛ)) В СЛЕДУЮЩЕЕ;
  969               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  970           }
  971           СОСТ ОжиданиеЕстьДостоверность {
  972                ЕСЛИ (Д_T_Врубашке == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
  973           }
  974          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
  975           СОСТ НарушениеСвязи {
  976          	   В СОСТ Начало;
  977           }
  978          }
  979          /*===============================Бак охлаждения =============*/
  980          /* добавлено 13 мая 2014 */
  981          ПРОЦ КонтрольДостоверностиТемпературыВбакеОхлаждения{
  982           ИЗ ПРОЦ Инициализация  Д_T_Вбаке;
  983          
  984           СОСТ Начало {
  985                ЕСЛИ (Д_T_Вбаке == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  986                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
  987           }
  988           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
  989               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ТЕМПЕРАТУРОЙ_В_БАКЕ_ОХЛ)) В СЛЕДУЮЩЕЕ;
  990               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  991           }
  992           СОСТ ОжиданиеНедостоверности {
  993                ЕСЛИ (Д_T_Вбаке == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  994           }
  995           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  996               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ТЕМПЕРАТУРОЙ_В_БАКЕ_ОХЛ)) В СЛЕДУЮЩЕЕ;
  997               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  998           }
  999           СОСТ ОжиданиеЕстьДостоверность {
 1000                ЕСЛИ (Д_T_Вбаке == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1001           }
 1002          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1003           СОСТ НарушениеСвязи {
 1004          	   В СОСТ Начало;
 1005           }
 1006          }
 1007          /*===========================================Труба сидеростата =============*/
 1008          /* добавлено 13 мая 2014 */
 1009          ПРОЦ КонтрольДостоверностиДавленияВтрубеСидеростата{
 1010           ИЗ ПРОЦ Инициализация  Д_P_ВтрубеСидер;
 1011          
 1012           СОСТ Начало {
 1013                ЕСЛИ (Д_P_ВтрубеСидер == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1014                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1015           }
 1016           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1017               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_ТРУБЕ_СИД)) В СЛЕДУЮЩЕЕ;
 1018               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1019           }
 1020           СОСТ ОжиданиеНедостоверности {
 1021                ЕСЛИ (Д_P_ВтрубеСидер == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1022           }
 1023           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1024               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_ТРУБЕ_СИД)) В СЛЕДУЮЩЕЕ;
 1025               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1026           }
 1027           СОСТ ОжиданиеЕстьДостоверность {
 1028                ЕСЛИ (Д_P_ВтрубеСидер == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1029           }
 1030          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1031           СОСТ НарушениеСвязи {
 1032          	   В СОСТ Начало;
 1033           }
 1034          }
 1035          
 1036          
 1037          /*===========================================Питание ШКАФА 380=============*/
 1038          /* добавлено 27 января 2014 */
 1039          ПРОЦ КонтрольДостоверностиСостоянияПитанияШКАФА_ВС{
 1040           ИЗ ПРОЦ Инициализация  Д_ШКАФ_ВС_380;
 1041          
 1042           СОСТ Начало {
 1043                ЕСЛИ (Д_ШКАФ_ВС_380 == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1044                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1045           }
 1046           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1047               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПИТАНИЕМ_ШКАФА_380)) В СЛЕДУЮЩЕЕ;
 1048               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1049           }
 1050           СОСТ ОжиданиеНедостоверности {
 1051                ЕСЛИ (Д_ШКАФ_ВС_380 == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1052           }
 1053           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1054               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ПИТАНИЕМ_ШКАФА_380)) В СЛЕДУЮЩЕЕ;
 1055               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1056           }
 1057           СОСТ ОжиданиеЕстьДостоверность {
 1058                ЕСЛИ (Д_ШКАФ_ВС_380 == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1059           }
 1060          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1061           СОСТ НарушениеСвязи {
 1062          	   В СОСТ Начало;
 1063           }
 1064          }
 1065          /*===========================================ОТКР_ЗАТВОР_ВАК=============*/
 1066          ПРОЦ КонтрольДостоверностиОткрЗатВакуумного{
 1067           ИЗ ПРОЦ Инициализация  Д_ОТКР_ЗАТВОР_ВАК;
 1068          
 1069           СОСТ Начало {
 1070                ЕСЛИ (Д_ОТКР_ЗАТВОР_ВАК == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1071                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1072           }
 1073           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1074               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_КОНЦ_ОТКРЫТИЯ_ЗАТВ_ВАКУУМНОГО)) В СЛЕДУЮЩЕЕ;
 1075               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1076           }
 1077           СОСТ ОжиданиеНедостоверности {
 1078                ЕСЛИ (Д_ОТКР_ЗАТВОР_ВАК == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1079           }
 1080           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1081               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_КОНЦ_ОТКРЫТИЯ_ЗАТВ_ВАКУУМНОГО)) В СЛЕДУЮЩЕЕ;
 1082               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1083           }
 1084           СОСТ ОжиданиеЕстьДостоверность {
 1085                ЕСЛИ (Д_ОТКР_ЗАТВОР_ВАК == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1086           }
 1087          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1088           СОСТ НарушениеСвязи {
 1089          	   В СОСТ Начало;
 1090           }
 1091          }
 1092          /*===========================================ЗАКР_ЗАТВОР_ВАК=============*/
 1093          ПРОЦ КонтрольДостоверностиЗакрЗатВакуумного{
 1094           ИЗ ПРОЦ Инициализация  Д_ЗАКР_ЗАТВОР_ВАК;
 1095          
 1096           СОСТ Начало {
 1097                ЕСЛИ (Д_ЗАКР_ЗАТВОР_ВАК == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1098                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1099           }
 1100           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1101               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_КОНЦ_ЗАКРЫТИЯ_ЗАТВ_ВАКУУМНОГО)) В СЛЕДУЮЩЕЕ;
 1102               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1103           }
 1104           СОСТ ОжиданиеНедостоверности {
 1105                ЕСЛИ (Д_ЗАКР_ЗАТВОР_ВАК == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1106           }
 1107           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1108               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_КОНЦ_ЗАКРЫТИЯ_ЗАТВ_ВАКУУМНОГО)) В СЛЕДУЮЩЕЕ;
 1109               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1110           }
 1111           СОСТ ОжиданиеЕстьДостоверность {
 1112                ЕСЛИ (Д_ЗАКР_ЗАТВОР_ВАК == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1113           }
 1114          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1115           СОСТ НарушениеСвязи {
 1116          	   В СОСТ Начало;
 1117           }
 1118          }
 1119          /*===========================================Д_САПУН=============*/
 1120          ПРОЦ КонтрольДостоверностиСостоянияСапуна{
 1121           ИЗ ПРОЦ Инициализация  Д_САПУН;
 1122          
 1123           СОСТ Начало {
 1124                ЕСЛИ (Д_САПУН == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1125                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1126           }
 1127           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1128               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_САПУНОМ)) В СЛЕДУЮЩЕЕ;
 1129               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1130           }
 1131           СОСТ ОжиданиеНедостоверности {
 1132                ЕСЛИ (Д_САПУН == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1133           }
 1134           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1135               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_САПУНОМ)) В СЛЕДУЮЩЕЕ;
 1136               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1137           }
 1138           СОСТ ОжиданиеЕстьДостоверность {
 1139                ЕСЛИ (Д_САПУН == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1140           }
 1141          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1142           СОСТ НарушениеСвязи {
 1143          	   В СОСТ Начало;
 1144           }
 1145          }
 1146          
 1147          /*===========================================Д_УСТР_ПЛАВ_ПУСКА=============*/
 1148          ПРОЦ КонтрольДостоверностиСостоянияУстройстваПлавПуска{
 1149           ИЗ ПРОЦ Инициализация  Д_УСТР_ПЛАВ_ПУСКА;
 1150          
 1151           СОСТ Начало {
 1152                ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1153                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1154           }
 1155           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1156               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПЛАВНЫМ_ПУСКОМ)) В СЛЕДУЮЩЕЕ;
 1157               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1158           }
 1159           СОСТ ОжиданиеНедостоверности {
 1160                ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1161           }
 1162           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1163               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ПЛАВНЫМ_ПУСКОМ)) В СЛЕДУЮЩЕЕ;
 1164               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1165           }
 1166           СОСТ ОжиданиеЕстьДостоверность {
 1167                ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1168           }
 1169          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1170           СОСТ НарушениеСвязи {
 1171          	   В СОСТ Начало;
 1172           }
 1173          }
 1174          /*===========================================Д_ПИТ_УПП_ВАК_НАСОСА=============*/ 
 1175          
 1176          ПРОЦ КонтрольДостоверностиСостПитанияУППВакНасоса{
 1177           ИЗ ПРОЦ Инициализация  Д_ПИТ_УПП_ВАК_НАСОСА;  
 1178          
 1179           СОСТ Начало {
 1180                ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;   
 1181                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1182           }
 1183           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1184               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПИТАНИЕМ_ВАК_НАСОСА)) В СЛЕДУЮЩЕЕ;  
 1185               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1186           }
 1187           СОСТ ОжиданиеНедостоверности {
 1188                ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ; 
 1189           }
 1190           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1191               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ПИТАНИЕМ_ВАК_НАСОСА)) В СЛЕДУЮЩЕЕ;   
 1192               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1193           }
 1194           СОСТ ОжиданиеЕстьДостоверность {
 1195                ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;   
 1196           }
 1197          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1198           СОСТ НарушениеСвязи {
 1199          	   В СОСТ Начало;
 1200           }
 1201          }
 1202          /*===========================================Д_ПИТ_ВЕНТИЛЯТОРА=============*/
 1203          ПРОЦ КонтрольДостоверностиСостоянияПитанияВентилятора{
 1204           ИЗ ПРОЦ Инициализация  Д_ПИТ_ВЕНТИЛЯТОРА;
 1205          
 1206           СОСТ Начало {
 1207                ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1208                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1209           }
 1210           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1211               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ВЕНТИЛЯТОРОМ)) В СЛЕДУЮЩЕЕ;
 1212               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1213           }
 1214           СОСТ ОжиданиеНедостоверности {
 1215                ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1216           }
 1217           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1218               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ВЕНТИЛЯТОРОМ)) В СЛЕДУЮЩЕЕ;
 1219               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1220           }
 1221           СОСТ ОжиданиеЕстьДостоверность {
 1222                ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1223           }
 1224          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1225           СОСТ НарушениеСвязи {
 1226          	   В СОСТ Начало;
 1227           }
 1228          }
 1229          /*===========================================Д_ПИТ_РЕГ_Т=============*/
 1230          ПРОЦ КонтрольДостоверностиСостоянияПитанияРегТемпературы{
 1231           ИЗ ПРОЦ Инициализация  Д_ПИТ_РЕГ_Т;
 1232          
 1233           СОСТ Начало {
 1234                ЕСЛИ (Д_ПИТ_РЕГ_Т == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1235                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1236           }
 1237           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1238               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_РЕГ_ТЕМПЕРАТУРЫ)) В СЛЕДУЮЩЕЕ;
 1239               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1240           }
 1241           СОСТ ОжиданиеНедостоверности {
 1242                ЕСЛИ (Д_ПИТ_РЕГ_Т == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1243           }
 1244           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1245               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_РЕГ_ТЕМПЕРАТУРЫ)) В СЛЕДУЮЩЕЕ;
 1246               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1247           }
 1248           СОСТ ОжиданиеЕстьДостоверность {
 1249                ЕСЛИ (Д_ПИТ_РЕГ_Т == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1250           }
 1251          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1252           СОСТ НарушениеСвязи {
 1253          	   В СОСТ Начало;
 1254           }
 1255          }
 1256          
 1257          /*===========================================Д_ПИТ_РЕГ_УР=============*/
 1258          ПРОЦ КонтрольДостоверностиСостоянияПитанияРегУровня{
 1259           ИЗ ПРОЦ Инициализация  Д_ПИТ_РЕГ_УР;
 1260          
 1261           СОСТ Начало {
 1262                ЕСЛИ (Д_ПИТ_РЕГ_УР == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1263                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1264           }
 1265           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1266               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_РЕГ_УРОВНЯ)) В СЛЕДУЮЩЕЕ;
 1267               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1268           }
 1269           СОСТ ОжиданиеНедостоверности {
 1270                ЕСЛИ (Д_ПИТ_РЕГ_УР == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1271           }
 1272           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1273               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_РЕГ_УРОВНЯ)) В СЛЕДУЮЩЕЕ;
 1274               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1275           }
 1276           СОСТ ОжиданиеЕстьДостоверность {
 1277                ЕСЛИ (Д_ПИТ_РЕГ_УР == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1278           }
 1279          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1280           СОСТ НарушениеСвязи {
 1281          	   В СОСТ Начало;
 1282           }
 1283          }
 1284          /*===========================================Д_УР_ВОДЫ_MIN=============*/
 1285          ПРОЦ КонтрольДостоверностиУровняВодыМинимум{
 1286           ИЗ ПРОЦ Инициализация  Д_УР_ВОДЫ_MIN;
 1287          
 1288           СОСТ Начало {
 1289                ЕСЛИ (Д_УР_ВОДЫ_MIN == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1290                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1291           }
 1292           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1293               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_НИЖНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1294               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1295           }
 1296           СОСТ ОжиданиеНедостоверности {
 1297                ЕСЛИ (Д_УР_ВОДЫ_MIN == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1298           }
 1299           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1300               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_НИЖНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1301               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1302           }
 1303           СОСТ ОжиданиеЕстьДостоверность {
 1304                ЕСЛИ (Д_УР_ВОДЫ_MIN == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1305           }
 1306          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1307           СОСТ НарушениеСвязи {
 1308          	   В СОСТ Начало;
 1309           }
 1310          }
 1311          /*===========================================Д_УР_ВОДЫ_MAX=============*/
 1312          ПРОЦ КонтрольДостоверностиУровняВодыМаксимум{
 1313           ИЗ ПРОЦ Инициализация  Д_УР_ВОДЫ_MAX;
 1314          
 1315           СОСТ Начало {
 1316                ЕСЛИ (Д_УР_ВОДЫ_MAX == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1317                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1318           }
 1319           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1320               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ВЕРХНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1321               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1322           }
 1323           СОСТ ОжиданиеНедостоверности {
 1324                ЕСЛИ (Д_УР_ВОДЫ_MAX == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1325           }
 1326           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1327               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ВЕРХНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1328               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1329           }
 1330           СОСТ ОжиданиеЕстьДостоверность {
 1331                ЕСЛИ (Д_УР_ВОДЫ_MAX == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1332           }
 1333          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1334           СОСТ НарушениеСвязи {
 1335          	   В СОСТ Начало;
 1336           }
 1337          }
 1338          /*===========================================Д_ПИТ_НАСОС_ОХЛ=============*/
 1339          ПРОЦ КонтрольДостоверностиСостоянияПитанияНасОхлаждения{
 1340           ИЗ ПРОЦ Инициализация  Д_ПИТ_НАСОС_ОХЛ;
 1341           СОСТ Начало {
 1342                ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1343                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1344           }
 1345           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1346               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_НАСОСОСОМ_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1347               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1348           }
 1349           СОСТ ОжиданиеНедостоверности {
 1350                ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1351           }
 1352           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1353               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_НАСОСОСОМ_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1354               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1355           }
 1356           СОСТ ОжиданиеЕстьДостоверность {
 1357                ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1358           }
 1359          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1360           СОСТ НарушениеСвязи {
 1361          	   В СОСТ Начало;
 1362           }
 1363          }
 1364          /*========================================================*/
 1365          /*                                                        */
 1366          /*==            ЧТЕНИЕ ФАКТИЧЕСКИХ ПАРАМЕТРОВ           ==*/
 1367          /*                                                        */
 1368          /* процессы читают параметры и реагируют на разрыв связи  */
 1369          /*========================================================*/
 1370          
 1371          /*=============================================================*/
 1372          /*  Новый процесс 13 мая 2014   Модифицирован в августе 2014   */
 1373          /*=============================================================*/
 1374          ПРОЦ ЧтениеДавленияВбакеКомпрессора{
 1375          ИЗ ПРОЦ Инициализация ФП_P_ВбакеКомпрессора,
 1376          					   Д_P_ВбакеКомпрессора,
 1377          					   К_Достоверности,
 1378          					   СвязьС_P_ВбакеКомпрессора;
 1379           СОСТ Начало {
 1380          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_P_ВбакеКомпрессора = ВКЛ;  /* для отладки без достоверностей*/ 
 1381          	ЕСЛИ (Д_P_ВбакеКомпрессора) {
 1382          		СвязьС_P_ВбакеКомпрессора = ЕСТЬ;  /* это тайминизированный параметр*/
 1383          		ФП_P_ВбакеКомпрессора 	= GetFP_P_BAK_COMPRESSOR();
 1384          		В СОСТ Начало;
 1385          	}
 1386          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1387           }
 1388          
 1389          	СОСТ ПроверкаИдетЛиВакуумирование{
 1390          		СвязьС_P_ВбакеКомпрессора = НЕТ;
 1391          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1392          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1393          	}	
 1394          	СОСТ КонтрольВыключения{
 1395          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1396          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1397          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1398          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1399          				}
 1400          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1401          		}
 1402          	} 
 1403          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1404          	СОСТ НарушениеСвязи {
 1405          			ОШИБКА;
 1406          	} 	
 1407          }
 1408          /*=============================================================*/
 1409          /*  Новый процесс 20 августа 2014   						   */
 1410          /*=============================================================*/
 1411          ПРОЦ ОтлючитьВакуумированиеВручную{
 1412          	СОСТ ПереходВручноеОтключение{
 1413          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_АВАРИЯ__СРОЧНО_ВЫКЛЮЧИТЬ_ВАК_СИСТЕМУ_В_РУЧНОМ_РЕЖИМЕ))В СЛЕДУЮЩЕЕ;
 1414          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 1415          	} 
 1416          	СОСТ ОстановПроцессов{
 1417          		ЕСЛИ (!(ПРОЦ ОстановВсехПроцессовИстартПроцИнициализация В СОСТ АКТИВНОЕ))
 1418          			СТАРТ ПРОЦ ОстановВсехПроцессовИстартПроцИнициализация;   
 1419          		СТОП;
 1420          	} 
 1421          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1422          	СОСТ НарушениеСвязи {
 1423          			ОШИБКА;
 1424          	} 	
 1425          
 1426          }
 1427          /*=============================================================*/
 1428          /*  Новый процесс 13 мая 2014                                  */
 1429          /*=============================================================*/
 1430          ПРОЦ ЧтениеДавленияВпатрубке{
 1431          ИЗ ПРОЦ Инициализация ФП_P_Впатрубке,
 1432          					   Д_P_Впатрубке,
 1433          					   К_Достоверности,
 1434          					   СвязьС_P_Впатрубке;
 1435          
 1436           СОСТ Начало {
 1437          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_P_Впатрубке = ВКЛ;  /* для отладки без достоверностей*/ 
 1438          	ЕСЛИ (Д_P_Впатрубке) {
 1439          		СвязьС_P_Впатрубке = ЕСТЬ;    /* это тайминизированный параметр*/
 1440          		ФП_P_Впатрубке 		= GetFP_P_PATRUBKA();
 1441          		В СОСТ Начало;
 1442          	}
 1443          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1444           }
 1445          	СОСТ ПроверкаИдетЛиВакуумирование{
 1446          		СвязьС_P_Впатрубке = НЕТ;	
 1447          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1448          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1449          	}
 1450          	
 1451          	СОСТ КонтрольВыключения{
 1452          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1453          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1454          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1455          					СТОП;  /*процесс будет все равно остановлен при откате*/
 1456          				}
 1457          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1458          		}
 1459          	} 
 1460          
 1461          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1462          	СОСТ НарушениеСвязи {
 1463          			ОШИБКА;
 1464          	} 
 1465          }
 1466          /*=============================================================*/
 1467          /*  Новый процесс 13 мая 2014                                  */
 1468          /*=============================================================*/
 1469          ПРОЦ ЧтениеТемпературыВрубашкеОхлаждения{
 1470          ИЗ ПРОЦ Инициализация ФП_T_Врубашке,
 1471          					   Д_T_Врубашке,
 1472          					   К_Достоверности,
 1473          					   СвязьС_T_Врубашке;
 1474          
 1475           СОСТ Начало {
 1476          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_T_Врубашке = ВКЛ;  /* для отладки без достоверностей*/ 
 1477          	ЕСЛИ (Д_T_Врубашке) {
 1478          		СвязьС_T_Врубашке = ЕСТЬ;   /* это тайминизированный параметр*/
 1479          		ФП_T_Врубашке 		= GetFP_T_RUBACHKA();
 1480          		В СОСТ Начало;
 1481          	}
 1482          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1483           }
 1484          	СОСТ ПроверкаИдетЛиВакуумирование{
 1485          		СвязьС_T_Врубашке = НЕТ;	
 1486          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1487          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1488          	}	
 1489          	СОСТ КонтрольВыключения{
 1490          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1491          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1492          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1493          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1494          				}
 1495          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1496          		}
 1497          	}   
 1498          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1499          	СОСТ НарушениеСвязи {
 1500          			ОШИБКА;
 1501          	} 
 1502          }
 1503          /*=============================================================*/
 1504          /*  Новый процесс 13 мая 2014                                  */
 1505          /*=============================================================*/
 1506          ПРОЦ ЧтениеТемпературыВбакеОхлаждения{
 1507          ИЗ ПРОЦ Инициализация ФП_T_Вбаке,
 1508          					   Д_T_Вбаке,
 1509          					   К_Достоверности,
 1510          					   СвязьС_T_Вбаке;
 1511          
 1512           СОСТ Начало {
 1513          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_T_Вбаке = ВКЛ;  /* для отладки без достоверностей*/ 
 1514          	ЕСЛИ (Д_T_Вбаке) {
 1515          		СвязьС_T_Вбаке = ЕСТЬ;	/* это тайминизированный параметр*/
 1516          		ФП_T_Вбаке 			= GetFP_T_BAK();
 1517          		В СОСТ Начало;
 1518          	}
 1519          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1520           }
 1521          	СОСТ ПроверкаИдетЛиВакуумирование{
 1522          		СвязьС_T_Вбаке = НЕТ;	
 1523          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1524          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1525          	}	
 1526          	СОСТ КонтрольВыключения{
 1527          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1528          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1529          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1530          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1531          				}
 1532          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1533          		}
 1534          	} 
 1535           
 1536          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1537          	СОСТ НарушениеСвязи {
 1538          			ОШИБКА;  /*м б В НАЧАЛО   ????? подумать*/
 1539          	} 
 1540          }
 1541          
 1542          /*=============================================================*/
 1543          /*  Новый процесс 13 мая 2014                                  */
 1544          /*=============================================================*/
 1545          ПРОЦ ЧтениеДавленияВтрубеСидеростата{
 1546          ИЗ ПРОЦ Инициализация ФП_P_ВтрубеСидер,
 1547          					   Д_P_ВтрубеСидер,
 1548          					   К_Достоверности,
 1549          					   СвязьС_P_ВтрубеСидер;
 1550           СОСТ Начало {
 1551          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_P_ВтрубеСидер = ВКЛ;  /* для отладки без достоверностей*/ 
 1552          	ЕСЛИ (Д_P_ВтрубеСидер) {
 1553          		СвязьС_P_ВтрубеСидер = ЕСТЬ;
 1554          		ФП_P_ВтрубеСидер 	= GetFP_P_TRUBA();
 1555          		В СОСТ Начало;
 1556          	}
 1557          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1558           }
 1559          	СОСТ ПроверкаИдетЛиВакуумирование{
 1560          		СвязьС_P_ВтрубеСидер = НЕТ;	
 1561          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1562          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1563          	}	
 1564          	СОСТ КонтрольВыключения{
 1565          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1566          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1567          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1568          					СТОП;  /*процесс будет все равно остановлен при откате*/
 1569          				}
 1570          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1571          		}
 1572          	} 
 1573          
 1574          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1575          	СОСТ НарушениеСвязи {
 1576          			ОШИБКА;   /*если убрать рестарт, то надо идти в начало  !!!!!!!!!!!!!!!!*/
 1577          	} 
 1578          }
 1579          /*========================================================*/
 1580          /*                                                        */
 1581          /*==            ЧТЕНИЕ ЛОГИЧЕСКИХ ПАРАМЕТРОВ            ==*/
 1582          /*                                                        */
 1583          /*========================================================*/
 1584          /*=============================================================*/
 1585          /*  Новые процессы 18 августа 2014       */
 1586          /*=============================================================*/
 1587          /*=============================================================*/
 1588          /*  Новый процесс 18 августа 2014       */
 1589          /*=============================================================*/
 1590          ПРОЦ ПроверкаСвязиС_РегуляторомУровня{
 1591          ИЗ ПРОЦ Инициализация К_ПИТ_РЕГ_УР,
 1592          					  Д_ПИТ_РЕГ_УР,
 1593          					  К_Достоверности,
 1594          					  СвязьС_РегуляторомУровня;
 1595           СОСТ Начало {
 1596          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР;  /* для отладки без достоверностей*/ 
 1597          	ЕСЛИ (Д_ПИТ_РЕГ_УР) {
 1598          		СвязьС_РегуляторомУровня = ЕСТЬ;		/* это тайминизированный параметр пока не используется*/
 1599          		В СОСТ Начало;
 1600          	}
 1601          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1602           }
 1603           СОСТ ПроверкаИдетЛиВакуумирование{	
 1604          		СвязьС_РегуляторомУровня = НЕТ;
 1605          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1606          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1607          	}
 1608          	СОСТ КонтрольВыключения{
 1609          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1610          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1611          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1612          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1613          				}
 1614          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1615          		}
 1616          	} 
 1617          
 1618          }
 1619          /* =============================================  */
 1620          ПРОЦ ПроверкаСвязиС_РегуляторомТемпературы{
 1621          ИЗ ПРОЦ Инициализация К_ПИТ_РЕГ_Т,
 1622          					  Д_ПИТ_РЕГ_Т,
 1623          					  К_Достоверности,
 1624          					  СвязьС_РегуляторомТемпературы;
 1625           СОСТ Начало {
 1626          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т;  /* для отладки без достоверностей*/ 
 1627          	ЕСЛИ (Д_ПИТ_РЕГ_Т) {
 1628          		СвязьС_РегуляторомТемпературы = ЕСТЬ;		/* это тайминизированный параметр*/
 1629          		В СОСТ Начало;
 1630          	}
 1631          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1632           }
 1633          
 1634          	СОСТ ПроверкаИдетЛиВакуумирование{
 1635          		СвязьС_РегуляторомТемпературы = НЕТ;	
 1636          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1637          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1638          	}
 1639          	СОСТ КонтрольВыключения{
 1640          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1641          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1642          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1643          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1644          				}
 1645          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1646          		}
 1647          	} 
 1648          
 1649          }
 1650          
 1651          
 1652          /* =============================================  */
 1653          ПРОЦ ПроверкаСвязиС_Вентилятором{
 1654          ИЗ ПРОЦ Инициализация К_ПИТ_ВЕНТИЛЯТОРА,
 1655          					  Д_ПИТ_ВЕНТИЛЯТОРА,
 1656          					  К_Достоверности,
 1657          					  СвязьС_Вентилятором;
 1658           СОСТ Начало {
 1659          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА;  /* для отладки без достоверностей*/ 
 1660          	ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА) {
 1661          		СвязьС_Вентилятором = ЕСТЬ;		/* это тайминизированный параметр*/
 1662          		В СОСТ Начало;
 1663          	}
 1664          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1665           }
 1666           
 1667          	СОСТ ПроверкаИдетЛиВакуумирование{
 1668          		СвязьС_Вентилятором = НЕТ;	
 1669          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1670          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1671          	}
 1672          	СОСТ КонтрольВыключения{
 1673          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1674          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1675          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1676          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1677          				}
 1678          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1679          		}
 1680          	} 
 1681          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1682           
 1683          }
 1684          /* =============================================  */
 1685          ПРОЦ ПроверкаСвязиС_НасососомОхлажденияДвигателя{
 1686          ИЗ ПРОЦ Инициализация Д_ПИТ_НАСОС_ОХЛ,
 1687          					  К_Достоверности,
 1688          					  СвязьС_НасосомОхлаждения;
 1689           СОСТ Начало {
 1690          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ;  /* для отладки без достоверностей*/ 
 1691          	ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ) {
 1692          		СвязьС_НасосомОхлаждения = ЕСТЬ;		/* это тайминизированный параметр*/
 1693          		В СОСТ Начало;
 1694          	}
 1695          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1696           }
 1697          
 1698          	СОСТ ПроверкаИдетЛиВакуумирование{
 1699          		СвязьС_НасосомОхлаждения = НЕТ;	
 1700          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1701          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1702          	}
 1703          	СОСТ КонтрольВыключения{
 1704          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1705          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1706          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1707          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1708          				}
 1709          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1710          		}
 1711          	} 
 1712          }
 1713          /* =============================================  */
 1714          ПРОЦ ПроверкаСвязиС_КонцевикомОткрытияЗатвораВакуумного{
 1715          ИЗ ПРОЦ Инициализация Д_ОТКР_ЗАТВОР_ВАК,
 1716          					  К_Достоверности,
 1717          					  СвязьС_КонцевикомОткрытияЗВ;
 1718           СОСТ Начало {
 1719          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ОТКР_ЗАТВОР_ВАК;  /* для отладки без достоверностей*/ 
 1720          	ЕСЛИ (Д_ОТКР_ЗАТВОР_ВАК) {
 1721          		СвязьС_КонцевикомОткрытияЗВ = ЕСТЬ;		/* это тайминизированный параметр*/
 1722          		В СОСТ Начало;
 1723          	}
 1724          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1725           }
 1726          	СОСТ ПроверкаИдетЛиВакуумирование{
 1727          		СвязьС_КонцевикомОткрытияЗВ = НЕТ;	
 1728          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1729          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1730          	}
 1731          	СОСТ КонтрольВыключения{
 1732          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1733          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1734          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1735          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1736          				}
 1737          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1738          		}
 1739          	} 
 1740          }
 1741          /* =============================================  */
 1742          ПРОЦ ПроверкаСвязиС_КонцевикомЗакрытияЗатвораВакуумного{
 1743          ИЗ ПРОЦ Инициализация Д_ЗАКР_ЗАТВОР_ВАК,
 1744          					  К_Достоверности,
 1745          					  СвязьС_КонцевикомЗакрытияЗВ;
 1746           СОСТ Начало {
 1747          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ЗАКР_ЗАТВОР_ВАК;  /* для отладки без достоверностей*/ 
 1748          	ЕСЛИ (Д_ЗАКР_ЗАТВОР_ВАК) {
 1749          		СвязьС_КонцевикомЗакрытияЗВ = ЕСТЬ;		/* это тайминизированный параметр*/
 1750          		В СОСТ Начало;
 1751          	}
 1752          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1753           }
 1754           
 1755          	СОСТ ПроверкаИдетЛиВакуумирование{
 1756          		СвязьС_КонцевикомЗакрытияЗВ = НЕТ;	
 1757          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1758          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1759          	}
 1760          	СОСТ КонтрольВыключения{
 1761          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1762          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1763          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1764          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1765          				}
 1766          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1767          		}
 1768          	} 
 1769          }
 1770          /* =============================================  */
 1771          ПРОЦ ПроверкаСвязиС_КонцевикомСапуна{
 1772          ИЗ ПРОЦ Инициализация Д_САПУН,
 1773          					  К_Достоверности,
 1774          					  СвязьС_КонцевикомСапуна;
 1775           СОСТ Начало {
 1776          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН;  /* для отладки без достоверностей*/ 
 1777          	ЕСЛИ (Д_САПУН) {
 1778          		СвязьС_КонцевикомСапуна = ЕСТЬ;		/* это тайминизированный параметр*/
 1779          		В СОСТ Начало;
 1780          	}
 1781          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1782           }
 1783          
 1784          	СОСТ ПроверкаИдетЛиВакуумирование{
 1785          		СвязьС_КонцевикомСапуна = НЕТ;	
 1786          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1787          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1788          	}
 1789          	СОСТ КонтрольВыключения{
 1790          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1791          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1792          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1793          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1794          				}
 1795          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1796          		}
 1797          	} 
 1798          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1799          	СОСТ НарушениеСвязи {
 1800          			ОШИБКА;   /*если убрать рестарт, то надо идти в начало везде для чтения !!!!!!!!!!!!!!!!*/
 1801          	} 
 1802          }
 1803          /* =============================================  */
 1804          ПРОЦ ПроверкаСвязиС_ПитаниемПлавногоПуска{
 1805          ИЗ ПРОЦ Инициализация Д_ПИТ_УПП_ВАК_НАСОСА,
 1806          					  К_Достоверности,
 1807          					  СвязьС_ПитаниемПлавногоПуска;
 1808           СОСТ Начало {
 1809          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА;  /* для отладки без достоверностей*/ 
 1810          	ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА) {
 1811          		СвязьС_ПитаниемПлавногоПуска = ЕСТЬ;		/* это тайминизированный параметр*/
 1812          		В СОСТ Начало;
 1813          	}
 1814          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1815           }
 1816          	СОСТ ПроверкаИдетЛиВакуумирование{
 1817          		СвязьС_ПитаниемПлавногоПуска = НЕТ;	
 1818          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1819          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1820          	}
 1821          	СОСТ КонтрольВыключения{
 1822          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1823          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1824          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1825          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1826          				}
 1827          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1828          		}
 1829          	} 
 1830          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1831          	СОСТ НарушениеСвязи {
 1832          			ОШИБКА;   /*если убрать рестарт, то надо идти в начало везде для чтения !!!!!!!!!!!!!!!!*/
 1833          	} 
 1834          }
 1835          /* =============================================  */
 1836          ПРОЦ ПроверкаСвязиС_ПлавнымПуском{
 1837          ИЗ ПРОЦ Инициализация Д_УСТР_ПЛАВ_ПУСКА,
 1838          					  К_Достоверности,
 1839          					  СвязьС_ПлавнымПуском;
 1840           СОСТ Начало {
 1841          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА;  /* для отладки без достоверностей*/ 
 1842          	ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА) {
 1843          		СвязьС_ПлавнымПуском = ЕСТЬ;		/* это тайминизированный параметр*/
 1844          		В СОСТ Начало;
 1845          	}
 1846          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1847           }
 1848          
 1849          	СОСТ ПроверкаИдетЛиВакуумирование{
 1850          		СвязьС_ПлавнымПуском = НЕТ;	
 1851          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1852          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1853          	}
 1854          	СОСТ КонтрольВыключения{
 1855          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1856          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1857          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1858          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1859          				}
 1860          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1861          		}
 1862          	} 
 1863          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1864          	СОСТ НарушениеСвязи {
 1865          			ОШИБКА;   /*если убрать рестарт, то надо идти в начало везде для чтения !!!!!!!!!!!!!!!!*/
 1866          	} 
 1867          }
 1868          
 1869          
 1870          
 1871          
 1872          /*=============================================================*/
 1873          /*=         РЕГУЛЯТОР ТРАФИКА                    ==============*/
 1874          /*=         ЕСЛИ КАНАЛЫ ЗАБИТЫ, ТО                           ==*/
 1875          /*=         УВЕЛИЧИВАЕТСЯ ВРЕМЯ МЕЖДУ                        ==*/
 1876          /*=         СЕРВЕРОМ И ВЫДАЧЕЙ В GUI                         ==*/
 1877          /*=         ФАКТИЧЕСКИХ ПАРАМЕТРОВ                           ==*/
 1878          /*= GetOutMsgNumber_GUI читает число сообщ. в выходн. буфере ==*/
 1879          /*=============================================================*/
 1880          ПРОЦ РЕГУЛЯТОР_ТРАФИКА{
 1881           ИЗ ПРОЦ Инициализация ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 1882           СОСТ Начало{
 1883              ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА = GetOutMsgNumber_GUI()/5 + 1;  /*динамический таймаут*/
 1884              ЗАЦИКЛИТЬ;
 1885           }
 1886          }
 1887          
 1888          /*==============================================*/
 1889          /*==============================================*/
 1890          /*=                                            =*/
 1891          /*=      ПРОЦЕСС ЧтениеКольцевогоБуфера        =*/
 1892          /*=                                            =*/
 1893          /*==============================================*/
 1894          /*==============================================*/
 1895          ПРОЦ ЧтениеКольцевогоБуфера{
 1896          ИЗ ПРОЦ Инициализация
 1897                                  КодСобытия_от_ГУИ;       /* */
 1898          
 1899           СОСТ Начало{
 1900              /*  читаем код и параметр события из кольцевого буфера в структуру */
 1901              ЕСЛИ (GetNextMsgGUI()) {
 1902                КодСобытия_от_ГУИ = GetMsgGUICode();
 1903                      ЕСЛИ ((КодСобытия_от_ГУИ >= КОМ_ГУИ_ОТКР_ЗАТВОР_ВАК) &&
 1904                            (КодСобытия_от_ГУИ <= КОМАНДЫ_ОТ_ГУИ)) {
 1905          				СТАРТ ПРОЦ ОбработкаКомандУправления_от_ГУИ;
 1906          				В СОСТ КонтрольВыполненияК;
 1907                      } 
 1908          			ИНАЧЕ ЕСЛИ ((КодСобытия_от_ГУИ >= ИЗМН_НП_1) &&
 1909                                   (КодСобытия_от_ГУИ <= ИЗМН_НП_N)) {
 1910                               СТАРТ ПРОЦ ОбработкаКомандИзмененияНП_от_ГУИ;
 1911                               В СОСТ КонтрольИзмененияНП;
 1912          			}
 1913          			ИНАЧЕ В СОСТ НекорректноеСобытие;
 1914              }
 1915           } 
 1916           
 1917           СОСТ КонтрольВыполненияК{
 1918              ЕСЛИ(ПРОЦ ОбработкаКомандУправления_от_ГУИ В СОСТ ПАССИВНОЕ)
 1919              В СОСТ Начало;
 1920           }
 1921            СОСТ КонтрольИзмененияНП{
 1922              ЕСЛИ(ПРОЦ ОбработкаКомандИзмененияНП_от_ГУИ В СОСТ ПАССИВНОЕ)
 1923              В СОСТ Начало;
 1924           }
 1925            /*===== НЕНОРМАЛЬНЫЕ СИТУАЦИИ === */
 1926            СОСТ НекорректноеСобытие{
 1927               ЕСЛИ (SendMsgLongParamGUI(ПК_ГУИ_ОШИБКА_КОДА_КОМАНДЫ_ОТ_ГУИ, КодСобытия_от_ГУИ))
 1928                 В СОСТ Начало;
 1929               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1930           }
 1931          
 1932           СОСТ НарушениеСвязи {
 1933          	В СОСТ Начало;
 1934               СТОП;   /* м.б. в начало?!!!!!!!!!!!!!! что я и сделал*/
 1935           }
 1936          }
 1937          /*===================================================*/
 1938          /*==                                               ==*/
 1939          /*==  ПРОЦЕСС ИЗМЕНЕНИЯ НАСТРОЕЧНЫХ ПАРАМЕТРОВ     ==*/
 1940          /*==                                               ==*/
 1941          /*===================================================*/
 1942          ПРОЦ ОбработкаКомандИзмененияНП_от_ГУИ{
 1943          ИЗ ПРОЦ Инициализация 	КодСобытия_от_ГУИ,
 1944          						КодСобытия_к_ГУИ,
 1945          						НП_ЗД_Pатмосф,
 1946          						НП_ЗД_P_ВтрубеСидер,
 1947          						НП_ЗД_P_ВбакеКомпрессора,
 1948          						НП_ЗД_T_ВрубашкеНижняя,
 1949          						НП_ЗД_T_ВрубашкеВерхняя,
 1950          						НП_ЗД_T_ВбакеНижняя,
 1951          						НП_ЗД_T_ВбакеВерхняя,
 1952          						
 1953          						НП_ЗД_Гист_T_Вбаке,  			/* добавлено 3 февраля 2014 */
 1954          						НП_ЗД_Гист_T_Врубашке,  		/* добавлено 3 февраля 2014 */
 1955          						НП_ЗД_Гист_P_ВбакеКомпрессора,  /* добавлено 3 февраля 2014 */
 1956          						НП_ЗД_Гист_P_ВтрубеСидерВерх,  	/* добавлено 3 февраля 2014 */
 1957          						НП_ЗД_Гист_P_ВтрубеСидерНиж,		 /* добавлено 3 февраля 2014 */
 1958          						
 1959          						НП_ЗД_ПериодаКонтрP_ПриОткачке,  /* добавлено 7 января 2014 */
 1960          						НП_ЗД_ПериодаКонтрP_ПриНатекании;  /* добавлено 7 января 2014 */
 1961          						
 1962          						
 1963          ПЛАВ ЛП_Параметр_к_ПИВ ЛОКАЛ;
 1964           СОСТ Анализ{
 1965              РАЗБОР (КодСобытия_от_ГУИ) {
 1966          	    СЛУЧАЙ ИЗМН_НП_ЗД_Pатмосф:
 1967                    НП_ЗД_Pатмосф  = GetFloatParamGUI();
 1968                    КодСобытия_к_ГУИ = ИЗМН_НП_ЗД_Pатмосф;
 1969                    В СОСТ ПодтверждениеИзмененияНП;
 1970          			КОНЕЦ;
 1971          	    СЛУЧАЙ ИЗМН_НП_ЗД_P_ВбакеКомпрессора:
 1972          		   НП_ЗД_P_ВбакеКомпрессора  = GetFloatParamGUI();
 1973                    КодСобытия_к_ГУИ = НП_ЗД_P_ВбакеКомпрессора;
 1974                    В СОСТ ПодтверждениеИзмененияНП;		   
 1975          			КОНЕЦ;
 1976          	    СЛУЧАЙ ИЗМН_НП_ЗД_P_ВтрубеСидер:
 1977          		   НП_ЗД_P_ВтрубеСидер  = GetFloatParamGUI();
 1978                    КодСобытия_к_ГУИ = НП_ЗД_P_ВтрубеСидер;
 1979                    В СОСТ ПодтверждениеИзмененияНП;		   
 1980          			КОНЕЦ;
 1981          	    СЛУЧАЙ ИЗМН_НП_ЗД_T_ВрубашкеНижняя:		/* добавлено 20 января 2014 */
 1982          		   НП_ЗД_T_ВрубашкеНижняя  = GetFloatParamGUI();
 1983                    КодСобытия_к_ГУИ = НП_ЗД_T_ВрубашкеНижняя;
 1984                    В СОСТ ПодтверждениеИзмененияНП;		   
 1985          			КОНЕЦ;
 1986          	    СЛУЧАЙ ИЗМН_НП_ЗД_T_ВрубашкеВерхняя:		/* добавлено 20 января 2014 */
 1987          		   НП_ЗД_T_ВрубашкеВерхняя  = GetFloatParamGUI();
 1988                    КодСобытия_к_ГУИ = НП_ЗД_T_ВрубашкеВерхняя;
 1989                    В СОСТ ПодтверждениеИзмененияНП;		   
 1990          			КОНЕЦ;			
 1991          	    СЛУЧАЙ ИЗМН_НП_ЗД_T_ВбакеНижняя:	/* добавлено 20 января 2014 */
 1992          		   НП_ЗД_T_ВбакеНижняя  = GetFloatParamGUI();
 1993                    КодСобытия_к_ГУИ = НП_ЗД_T_ВбакеНижняя;
 1994                    В СОСТ ПодтверждениеИзмененияНП;		   
 1995          			КОНЕЦ;			
 1996          	    СЛУЧАЙ ИЗМН_НП_ЗД_T_ВбакеВерхняя:	/* добавлено 20 января 2014 */
 1997          		   НП_ЗД_T_ВбакеВерхняя  = GetFloatParamGUI();
 1998                    КодСобытия_к_ГУИ = НП_ЗД_T_ВбакеВерхняя;
 1999                    В СОСТ ПодтверждениеИзмененияНП;		   
 2000          			КОНЕЦ;
 2001          
 2002          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_T_Вбаке:	/* добавлено 3 февраля 2014 */
 2003          		   НП_ЗД_Гист_T_Вбаке  = GetFloatParamGUI();
 2004                    КодСобытия_к_ГУИ = НП_ЗД_Гист_T_Вбаке;
 2005                    В СОСТ ПодтверждениеИзмененияНП;		   
 2006          			КОНЕЦ;	
 2007          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_T_Врубашке:	/* добавлено 3 февраля 2014 */
 2008          		   НП_ЗД_Гист_T_Врубашке  = GetFloatParamGUI();
 2009                    КодСобытия_к_ГУИ = НП_ЗД_Гист_T_Врубашке;
 2010                    В СОСТ ПодтверждениеИзмененияНП;		   
 2011          			КОНЕЦ;	
 2012          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_P_ВбакеКомпрессора:	/* добавлено 3 февраля 2014 */
 2013          		   НП_ЗД_Гист_P_ВбакеКомпрессора  = GetFloatParamGUI();
 2014                    КодСобытия_к_ГУИ = НП_ЗД_Гист_P_ВбакеКомпрессора;
 2015                    В СОСТ ПодтверждениеИзмененияНП;		   
 2016          			КОНЕЦ;			
 2017          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_P_ВтрубеСидерВерх:	/* добавлено 3 февраля 2014 */
 2018          		   НП_ЗД_Гист_P_ВтрубеСидерВерх  = GetFloatParamGUI();
 2019                    КодСобытия_к_ГУИ = НП_ЗД_Гист_P_ВтрубеСидерВерх;
 2020                    В СОСТ ПодтверждениеИзмененияНП;		   
 2021          			КОНЕЦ;				
 2022          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_P_ВтрубеСидерНиж:	/* добавлено 3 февраля 2014 */
 2023          		   НП_ЗД_Гист_P_ВтрубеСидерНиж  = GetFloatParamGUI();
 2024                    КодСобытия_к_ГУИ = НП_ЗД_Гист_P_ВтрубеСидерНиж;
 2025                    В СОСТ ПодтверждениеИзмененияНП;		   
 2026          			КОНЕЦ;
 2027          
 2028                 СЛУЧАЙ ИЗМН_НП_ЗД_ПериодаКонтрP_ПриОткачке:
 2029                    НП_ЗД_ПериодаКонтрP_ПриОткачке = GetLongParamGUI();
 2030                    КодСобытия_к_ГУИ = ИЗМН_НП_ЗД_ПериодаКонтрP_ПриОткачке;
 2031                    В СОСТ ПодтверждениеИзмененияНП;
 2032                    КОНЕЦ;
 2033          
 2034                 СЛУЧАЙ ИЗМН_НП_ЗД_ПериодаКонтрP_ПриНатекании:
 2035                    НП_ЗД_ПериодаКонтрP_ПриНатекании = GetLongParamGUI();
 2036                    КодСобытия_к_ГУИ = ИЗМН_НП_ЗД_ПериодаКонтрP_ПриНатекании;
 2037                    В СОСТ ПодтверждениеИзмененияНП;
 2038                    КОНЕЦ;
 2039          			
 2040          		УМОЛЧАНИЕ:
 2041                    В СОСТ НекорректноеСобытие;
 2042                    КОНЕЦ;
 2043              } /* конец разбора */
 2044          	СТОП;	
 2045          
 2046           }
 2047           СОСТ ПодтверждениеИзмененияНП{
 2048              ЕСЛИ (SendMsgLongParamGUI(КодСобытия_к_ГУИ, GetLongParamGUI())) СТОП;
 2049              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2050           }
 2051           /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2052           СОСТ НекорректноеСобытие {
 2053              ЕСЛИ (SendMsgLongParamGUI(ПК_ГУИ_ОШИБКА_КОДА_КОМАНДЫ_ОТ_ГУИ, КодСобытия_от_ГУИ))
 2054                   СТОП;
 2055              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2056           }
 2057            СОСТ НарушениеСвязи {
 2058              ОШИБКА;
 2059           }
 2060          }
 2061          /*=========================================*/
 2062          /*=                                       =*/
 2063          /*=     ОБРАБОТКА КОМАНД ОТ ГУИ           =*/
 2064          /*=                                       =*/
 2065          /*=========================================*/
 2066          ПРОЦ ОбработкаКомандУправления_от_ГУИ{
 2067          ИЗ ПРОЦ Инициализация
 2068          						/*	ТекущийРежим,*/
 2069                              КодСобытия_от_ГУИ,
 2070          					К_УСТР_ПЛАВ_ПУСКА,
 2071          					ФлагГотовУрВодыБО,
 2072          					ФП_T_Вбаке,
 2073          					К_ПИТ_ВЕНТИЛЯТОРА,
 2074          					К_ПИТ_НАСОС_ОХЛ,
 2075          					К_ОТКР_ЗАТВОР_ВАК,
 2076          					К_ЗАКР_ЗАТВОР_ВАК,
 2077          					К_САПУН,
 2078          					ФлагГотовTВодыРО,
 2079          					ФП_P_ВтрубеСидер,
 2080          					ФП_P_Впатрубке,
 2081          					НП_ЗД_Pатмосф,
 2082          					К_Достоверности,
 2083          					
 2084          					СостояниеУСТР_ПЛАВ_ПУСКА;
 2085          ЦЕЛ ЛП_КодСообщенияДляGUI ЛОКАЛ;
 2086          
 2087           СОСТ Анализ{
 2088              РАЗБОР (КодСобытия_от_ГУИ) {
 2089          
 2090          /*------------------------без условий ----------------------------------------------*/
 2091          	    СЛУЧАЙ КОМ_ГУИ_ОТКР_ЗАТВОР_ВАК:
 2092          			СТАРТ ПРОЦ ОТКР_ЗАТВОР_ВАК;		
 2093          		КОНЕЦ;		
 2094          /*шшшшшшшшшшшшшшшшшшшшшшш условия открытия  шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2095          /*	    СЛУЧАЙ КОМ_ГУИ_ОТКР_ЗАТВОР_ВАК:															*/
 2096          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { 	*/			/* вакуумирования нет */
 2097          /*				ЕСЛИ (ФП_P_ВтрубеСидер >= ФП_P_Впатрубке) */  		/* можно открывать */
 2098          /*					СТАРТ ПРОЦ ОТКР_ЗАТВОР_ВАК;  												*/
 2099          /*				ИНАЧЕ {																			*/
 2100          /*					ЛП_КодСообщенияДляGUI = ПК_ГУИ_НЕТ_УСЛОВИЙ_ДЛЯ_ВЫПОЛНЕНИЯ_КОМАНДЫ;			*/
 2101          /*					В СОСТ ПередачаСообщенияСПараметромГУИ;										*/
 2102          /*				}																				*/	
 2103          /*		  } ИНАЧЕ {																				*/
 2104          /*		    ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;		*/
 2105          /*			В СОСТ ПередачаСообщенияСПараметромГУИ;												*/
 2106          /*		  }																						*/
 2107          /*		КОНЕЦ;  																				*/
 2108          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2109          
 2110          /*------------------------без условий ----------------------------------------------*/																				
 2111          	    СЛУЧАЙ КОМ_ГУИ_ЗАКР_ЗАТВОР_ВАК:
 2112          			СТАРТ ПРОЦ ЗАКР_ЗАТВОР_ВАК; 		
 2113          			КОНЕЦ;		
 2114          /*шшшшшшшшшшшшшшшшшшшшшшш условия закрытия  шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2115          /*	    СЛУЧАЙ КОМ_ГУИ_ЗАКР_ЗАТВОР_ВАК:															*/
 2116          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { */ 			/* вакуумирование не включено*/
 2117          /*				СТАРТ ПРОЦ ЗАКР_ЗАТВОР_ВАК; 													*/
 2118          /*		  	} ИНАЧЕ {																			*/
 2119          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2120          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2121          /*		 	}																					*/
 2122          /*		КОНЕЦ;																					*/
 2123          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2124          			
 2125          /*------------------------без условий ----------------------------------------------*/
 2126          	    СЛУЧАЙ КОМ_ГУИ_ОТКР_САПУН:
 2127          			СТАРТ ПРОЦ ОТКР_САПУН;		
 2128          		КОНЕЦ;		
 2129          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2130          /*	    СЛУЧАЙ КОМ_ГУИ_ОТКР_САПУН:									   					*/
 2131          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2132          /*				СТАРТ ПРОЦ ОТКР_САПУН; 													*/
 2133          /*			} ИНАЧЕ {																			*/
 2134          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2135          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2136          /*			}																					*/
 2137          /*		КОНЕЦ;																					*/
 2138          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2139          		
 2140          /*------------------------без условий ----------------------------------------------*/
 2141          	    СЛУЧАЙ КОМ_ГУИ_ЗАКР_САПУН:
 2142          			СТАРТ ПРОЦ ЗАКР_САПУН;
 2143          		КОНЕЦ; 																			
 2144          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2145          /*	    СЛУЧАЙ КОМ_ГУИ_ЗАКР_САПУН:									   					*/
 2146          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2147          /*				СТАРТ ПРОЦ ЗАКР_САПУН; 													*/
 2148          /*			} ИНАЧЕ {																			*/
 2149          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2150          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2151          /*			}																					*/
 2152          /*		КОНЕЦ;																					*/
 2153          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/			  
 2154          
 2155          /*------------------------без условий ----------------------------------------------*/
 2156          		СЛУЧАЙ КОМ_ГУИ_ВКЛ_УСТР_ПЛАВ_ПУСКА:
 2157          			СТАРТ ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА;
 2158          		КОНЕЦ;
 2159          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2160          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_УСТР_ПЛАВ_ПУСКА:									   					*/
 2161          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2162          /*				СТАРТ ВКЛ_УСТР_ПЛАВ_ПУСКА; 													*/
 2163          /*			} ИНАЧЕ {																			*/
 2164          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2165          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2166          /*			}																					*/
 2167          /*		КОНЕЦ;	
 2168          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2169          
 2170          /*------------------------без условий ----------------------------------------------*/	
 2171          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_УСТР_ПЛАВ_ПУСКА: 
 2172          			СТАРТ ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА;
 2173                   КОНЕЦ;			
 2174          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2175          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_УСТР_ПЛАВ_ПУСКА:									   					*/
 2176          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2177          /*				СТАРТ ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА; 													*/
 2178          /*			} ИНАЧЕ {																			*/
 2179          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2180          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2181          /*			}																					*/
 2182          /*		КОНЕЦ;	
 2183          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2184          
 2185          
 2186          /*------------------------без условий ----------------------------------------------*/		  
 2187          		СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_УПП_ВАК_НАСОСА:   
 2188          			СТАРТ ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА;   
 2189                    КОНЕЦ;
 2190          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2191          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_УПП_ВАК_НАСОСА:		  							   					*/ 
 2192          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2193          /*				СТАРТ ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА; 													*/ 
 2194          /*			} ИНАЧЕ {																			*/
 2195          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2196          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2197          /*			}																					*/
 2198          /*		КОНЕЦ;																					*/
 2199          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/			  
 2200          
 2201          
 2202          /*------------------------без условий ----------------------------------------------*/		  
 2203          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_УПП_ВАК_НАСОСА:  
 2204          			СТАРТ ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА;  
 2205                    КОНЕЦ;
 2206          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2207          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_УПП_ВАК_НАСОСА:									   					*/ 
 2208          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2209          /*				СТАРТ ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА; 													*/ 
 2210          /*			} ИНАЧЕ {																			*/
 2211          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2212          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2213          /*			}																					*/
 2214          /*		КОНЕЦ;	
 2215          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2216          
 2217          	  
 2218          /*------------------------без условий ----------------------------------------------*/
 2219          	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_ВЕНТИЛЯТОР:
 2220          			СТАРТ ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР;		
 2221                    КОНЕЦ;
 2222          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2223          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_ВЕНТИЛЯТОР:									   					*/
 2224          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2225          /*				СТАРТ ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР; 													*/
 2226          /*			} ИНАЧЕ {																			*/
 2227          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2228          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2229          /*			}																					*/
 2230          /*		КОНЕЦ;																					*/
 2231          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2232          
 2233          
 2234          /*------------------------без условий ----------------------------------------------*/  
 2235          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_ВЕНТИЛЯТОР:
 2236          			СТАРТ ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР;	
 2237                    КОНЕЦ;
 2238          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2239          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_ВЕНТИЛЯТОР:												    	*/
 2240          /*			ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */		      	  /* вакуумирования нет */
 2241          /*				СТАРТ ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР; 													*/
 2242          /*			} ИНАЧЕ { */ 											      /* идет вакуумирование*/
 2243          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2244          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2245          /*			} 																					*/
 2246          /*		КОНЕЦ;   																				*/
 2247          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2248          
 2249          
 2250          /*------------------------без условий ----------------------------------------------*/	  
 2251          		СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_Т:
 2252          			СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_Т;
 2253                    КОНЕЦ;
 2254          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2255          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_Т:															*/	  
 2256          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */					 /* вакуумирования нет */
 2257          /*				ЕСЛИ (ФП_T_Вбаке > 0.0){ 														*/													 
 2258          /*					ЕСЛИ (ФлагГотовУрВодыБО == НОРМА) {											*/
 2259          /*						СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_Т;												*/ 
 2260          /*					} ИНАЧЕ {																	*/
 2261          /*						 ЛП_КодСообщенияДляGUI = ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВНЕ_НОРМЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ; */
 2262          /*						 В СОСТ ПередачаСообщенияСПараметромГУИ;								*/
 2263          /*					}																			*/
 2264          /*				} ИНАЧЕ {																		*/
 2265          /*					ЛП_КодСообщенияДляGUI = ПК_ГУИ_ОТРИЦАТЕЛЬНАЯ_ТЕМПЕРАТУРА_ВОДЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;*/
 2266          /*					В СОСТ ПередачаСообщенияСПараметромГУИ;										*/				
 2267          /*				}																				*/
 2268          /*			} ИНАЧЕ {  */ 												/* идет вакуумирование*/
 2269          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2270          /*			В СОСТ ПередачаСообщенияСПараметромГУИ;												*/
 2271          /*			}																					*/
 2272          /*		КОНЕЦ;																					*/ 
 2273          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2274          
 2275          	  
 2276          /*------------------------без условий ----------------------------------------------*/	 
 2277          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_РЕГ_Т:
 2278          			СТАРТ ПРОЦ ВЫК_ПИТ_РЕГ_Т;
 2279                  КОНЕЦ;			
 2280          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2281          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_РЕГ_Т:															*/
 2282          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		/* вакуумирование не включено*/
 2283          /*				СТАРТ ПРОЦ ВЫК_ПИТ_РЕГ_Т;														*/
 2284          /*		  	} ИНАЧЕ { */  										/* идет вакуумирование*/
 2285          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2286          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2287          /*			}																					*/
 2288          /*          КОНЕЦ;																				*/
 2289          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2290          
 2291          /*------------------------без условий ----------------------------------------------*/
 2292          	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_УР:
 2293          		  	СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_УР;
 2294                  КОНЕЦ;
 2295          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2296          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_УР: 															*/
 2297          /*		  	ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { */  	/* вакуумирование не включено*/
 2298          /*				СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_УР;														*/
 2299          /*		  	} ИНАЧЕ { */  									/* идет вакуумирование*/
 2300          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2301          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2302          /*		  	} 																					*/
 2303          /*        КОНЕЦ;																				*/
 2304          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2305          
 2306          
 2307          /*------------------------без условий ----------------------------------------------*/
 2308          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_РЕГ_УР:
 2309          		  	СТАРТ ПРОЦ ВЫК_ПИТ_РЕГ_УР;
 2310                  КОНЕЦ;		
 2311          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2312          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_РЕГ_УР:															*/
 2313          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { */  		/* вакуумирование не включено*/
 2314          /*				СТАРТ ПРОЦ ВЫК_ПИТ_РЕГ_УР;														*/
 2315          /*		  	} ИНАЧЕ {  */							 /* идет вакуумирование*/
 2316          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2317          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2318          /*		  	} 																					*/
 2319          /*		  КОНЕЦ;																				*/
 2320          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2321          
 2322          /*------------------------без условий ----------------------------------------------*/
 2323          	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_НАС_ОХЛ:
 2324          			СТАРТ ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;
 2325          		  КОНЕЦ;
 2326          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2327          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_НАС_ОХЛ:															*/	  
 2328          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */					 /* вакуумирования нет */
 2329          /*				ЕСЛИ (ФП_T_Вбаке > 0.0){ 														*/													 
 2330          /*					ЕСЛИ (ФлагГотовУрВодыБО == НОРМА) {											*/
 2331          /*						СТАРТ ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;												*/ 
 2332          /*					} ИНАЧЕ {																	*/
 2333          /*						 ЛП_КодСообщенияДляGUI = ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВНЕ_НОРМЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ; */
 2334          /*						 В СОСТ ПередачаСообщенияСПараметромГУИ;								*/
 2335          /*					}																			*/
 2336          /*				} ИНАЧЕ {																		*/
 2337          /*					ЛП_КодСообщенияДляGUI = ПК_ГУИ_ОТРИЦАТЕЛЬНАЯ_ТЕМПЕРАТУРА_ВОДЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;*/
 2338          /*					В СОСТ ПередачаСообщенияСПараметромГУИ;										*/				
 2339          /*				}																				*/
 2340          /*			} ИНАЧЕ {  */ 												/* идет вакуумирование*/
 2341          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2342          /*			В СОСТ ПередачаСообщенияСПараметромГУИ;												*/
 2343          /*			}																					*/
 2344          /*		КОНЕЦ;	
 2345          
 2346          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2347          
 2348          /*------------------------без условий ----------------------------------------------*/
 2349          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_НАС_ОХЛ:		  
 2350          		  	СТАРТ ПРОЦ ВЫК_ПИТ_НАС_ОХЛ;		  
 2351          		КОНЕЦ;		  
 2352          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2353          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_НАС_ОХЛ:															*/
 2354          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { */  		/* вакуумирование не включено*/
 2355          /*				СТАРТ ПРОЦ ВЫК_ПИТ_НАС_ОХЛ;														*/
 2356          /*		  	} ИНАЧЕ {  */							 /* идет вакуумирование*/
 2357          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2358          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2359          /*		  	} 																					*/
 2360          /*		  КОНЕЦ;																				*/
 2361          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2362          
 2363          		  
 2364          	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ВАКУУМНЫЙ_НАСОС:   /*  данной кнопки нет и не надо */
 2365                    СТАРТ ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС; 
 2366                    КОНЕЦ;  
 2367          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ:  /*  14 декабря */
 2368          			К_Достоверности = Проверяются; 			/* есть проверка на достоверность */
 2369          			СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ;  /*! 12 декабря*/
 2370                    КОНЕЦ;  
 2371          
 2372          		  СЛУЧАЙ КОМ_ГУИ_ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ:   /* достигает вакуума и выключает вак. насос и через 30 минут снова включает, если вакуума недостаточно */
 2373          			К_Достоверности = Проверяются; 			/* есть проверка на достоверность */         
 2374          			СТАРТ ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ;
 2375                    КОНЕЦ;
 2376          		  
 2377          		УМОЛЧАНИЕ:
 2378                    В СОСТ НекорректноеСобытие;
 2379                    КОНЕЦ;
 2380              } /* конец разбора */
 2381          	СТОП;
 2382           }
 2383          
 2384          
 2385           /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2386           СОСТ НекорректноеСобытие {
 2387              ЕСЛИ (SendMsgLongParamGUI(ПК_ГУИ_ОШИБКА_КОДА_КОМАНДЫ_ОТ_ГУИ, КодСобытия_от_ГУИ))
 2388                   СТОП;   
 2389              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2390           }
 2391           СОСТ ПередачаСообщенияСПараметромГУИ{
 2392              ЕСЛИ (SendMsgLongParamGUI(ЛП_КодСообщенияДляGUI, КодСобытия_от_ГУИ))
 2393                  СТОП;
 2394              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2395           }
 2396          
 2397           СОСТ НарушениеСвязи {
 2398              ОШИБКА;
 2399           }
 2400          } /* конец ПРОЦ ОбработкаКомандУправленияРегуляторами_от_ПИВ   */
 2401          
 2402          /*====================================================*/
 2403          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2404          /*==           изменения ФП_P_ВбакеКомпрессора        */
 2405          /*====================================================*/
 2406          ПРОЦ КонтрольИзменения_ФП_P_ВбакеКомпрессора{
 2407           ИЗ ПРОЦ Инициализация  ФП_P_ВбакеКомпрессора, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2408           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2409           СОСТ Начало{
 2410              ЛП_Предыдущее = (!ФП_P_ВбакеКомпрессора);
 2411              В СЛЕДУЮЩЕЕ;
 2412           }
 2413           СОСТ КонтрольИзменения{
 2414              ЕСЛИ (ЛП_Предыдущее != ФП_P_ВбакеКомпрессора) {
 2415                   ЛП_Предыдущее = ФП_P_ВбакеКомпрессора;
 2416                   В СЛЕДУЮЩЕЕ;
 2417              }
 2418           }
 2419           СОСТ СообщОбИзменении{
 2420               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_P_ВбакеКомпрессора, ЛП_Предыдущее))
 2421                   В СОСТ ТрафикПауза;
 2422               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2423           }
 2424           СОСТ ТрафикПауза{
 2425              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2426          
 2427           }
 2428          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2429           СОСТ НарушениеСвязи{
 2430               В СОСТ КонтрольИзменения;
 2431           }
 2432          }
 2433          /* ПРОЦ КонтрольИзменения_ФП_P_ВбакеКомпрессора  */
 2434          
 2435          /*====================================================*/
 2436          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2437          /*==           изменения ИЗМН_ФП_P_Впатрубке     */
 2438          /*====================================================*/
 2439          ПРОЦ КонтрольИзменения_ФП_P_Впатрубке{
 2440           ИЗ ПРОЦ Инициализация  ФП_P_Впатрубке, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2441           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2442           СОСТ Начало{
 2443              ЛП_Предыдущее = (!ФП_P_Впатрубке);
 2444              В СЛЕДУЮЩЕЕ;
 2445           }
 2446           СОСТ КонтрольИзменения{
 2447              ЕСЛИ (ЛП_Предыдущее != ФП_P_Впатрубке) {
 2448                   ЛП_Предыдущее = ФП_P_Впатрубке;
 2449                   В СЛЕДУЮЩЕЕ;
 2450              }
 2451           }
 2452           СОСТ СообщОбИзменении{
 2453               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_P_Впатрубке, ЛП_Предыдущее))
 2454                   В СОСТ ТрафикПауза;
 2455               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2456           }
 2457           СОСТ ТрафикПауза{
 2458              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2459          
 2460           }
 2461          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2462           СОСТ НарушениеСвязи{
 2463               В СОСТ КонтрольИзменения;
 2464           }
 2465          }
 2466          /* ПРОЦ КонтрольИзменения_ФП_P_Впатрубке  */
 2467          
 2468          /*====================================================*/
 2469          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2470          /*==           изменения ИЗМН_ФП_T_Врубашке     */
 2471          /*====================================================*/
 2472          ПРОЦ КонтрольИзменения_ФП_T_Врубашке{
 2473           ИЗ ПРОЦ Инициализация  ФП_T_Врубашке, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2474           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2475           СОСТ Начало{
 2476              ЛП_Предыдущее = (!ФП_T_Врубашке);
 2477              В СЛЕДУЮЩЕЕ;
 2478           }
 2479           СОСТ КонтрольИзменения{
 2480              ЕСЛИ (ЛП_Предыдущее != ФП_T_Врубашке) {
 2481                   ЛП_Предыдущее = ФП_T_Врубашке;
 2482                   В СЛЕДУЮЩЕЕ;
 2483              }
 2484           }
 2485           СОСТ СообщОбИзменении{
 2486               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_T_Врубашке, ЛП_Предыдущее))
 2487                   В СОСТ ТрафикПауза;
 2488               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2489           }
 2490           СОСТ ТрафикПауза{
 2491              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2492          
 2493           }
 2494          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2495           СОСТ НарушениеСвязи{
 2496               В СОСТ КонтрольИзменения;
 2497           }
 2498          }
 2499          /* ПРОЦ КонтрольИзменения_ФП_T_Врубашке  */
 2500          
 2501          /*====================================================*/
 2502          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2503          /*==           изменения ИЗМН_ФП_T_Вбаке     */
 2504          /*====================================================*/
 2505          ПРОЦ КонтрольИзменения_ФП_T_Вбаке{
 2506           ИЗ ПРОЦ Инициализация  ФП_T_Вбаке, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2507           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2508           СОСТ Начало{
 2509              ЛП_Предыдущее = (!ФП_T_Вбаке);
 2510              В СЛЕДУЮЩЕЕ;
 2511           }
 2512           СОСТ КонтрольИзменения{
 2513              ЕСЛИ (ЛП_Предыдущее != ФП_T_Вбаке) {
 2514                   ЛП_Предыдущее = ФП_T_Вбаке;
 2515                   В СЛЕДУЮЩЕЕ;
 2516              }
 2517           }
 2518           СОСТ СообщОбИзменении{
 2519               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_T_Вбаке, ЛП_Предыдущее))
 2520                   В СОСТ ТрафикПауза;
 2521               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2522           }
 2523           СОСТ ТрафикПауза{
 2524              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2525          
 2526           }
 2527          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2528           СОСТ НарушениеСвязи{
 2529               В СОСТ КонтрольИзменения;
 2530           }
 2531          }
 2532          /* ПРОЦ КонтрольИзменения_ФП_T_Вбаке  */
 2533          
 2534          /*====================================================*/
 2535          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2536          /*==           изменения ИЗМН_ФП_P_ВтрубеСидер     */
 2537          /*====================================================*/	
 2538           ПРОЦ КонтрольИзменения_ФП_P_ВтрубеСидер{
 2539           ИЗ ПРОЦ Инициализация  ФП_P_ВтрубеСидер, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2540           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2541           СОСТ Начало{
 2542              ЛП_Предыдущее = (!ФП_P_ВтрубеСидер);
 2543              В СЛЕДУЮЩЕЕ;
 2544           }
 2545           СОСТ КонтрольИзменения{
 2546              ЕСЛИ (ЛП_Предыдущее != ФП_P_ВтрубеСидер) {
 2547                   ЛП_Предыдущее = ФП_P_ВтрубеСидер;
 2548                   В СЛЕДУЮЩЕЕ;
 2549              }
 2550           }
 2551           СОСТ СообщОбИзменении{
 2552               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_P_ВтрубеСидер, ЛП_Предыдущее))
 2553                   В СОСТ ТрафикПауза;
 2554               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2555           }
 2556           СОСТ ТрафикПауза{
 2557              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2558          
 2559           }
 2560          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2561           СОСТ НарушениеСвязи{
 2562               В СОСТ КонтрольИзменения;
 2563           }
 2564          }
 2565          /* ПРОЦ КонтрольИзменения_ФП_P_ВтрубеСидер  */   
 2566          
 2567          
 2568          /*====================================================*/
 2569          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2570          /*== 		Контроль Откачки в Трубе сидеростата 	==*/
 2571          /*====================================================*/
 2572          ПРОЦ КонтрольВеличиныОткачкиВауумнойТрубыСидеростата{
 2573          ИЗ ПРОЦ Инициализация 	ФлагОткачкиТрубыСидеростата,
 2574          						ФП_P_ВтрубеСидер;
 2575          ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2576          /*  Вопрос от Татьяны: там Проверяется скорость откачки. Но если достигнута некая глубина вакуумирования,*/
 2577          /* скорость откачки становится маленькой. Тогда алгоритм все равно сообщает постоянно, */
 2578          /*в каком состоянии скорость откачки. Это нормально? */					
 2579           СОСТ Начало{
 2580          	ЛП_Предыдущее = ФП_P_ВтрубеСидер;
 2581          	ТАЙМАУТ ТАЙМАУТ_ЗАДЕРЖКА_НА_ОТКАЧКУ В СЛЕДУЮЩЕЕ;
 2582           }
 2583           СОСТ АнализОткачки{
 2584          	ЕСЛИ ((ЛП_Предыдущее - ФП_P_ВтрубеСидер) > 0.00) {    /*  величина откачки  ?????* м.б. настр параметр ввести*/
 2585                  ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СКОРОСТЬ_ОТКАЧКИ_В_НОРМЕ)) {
 2586          					ФлагОткачкиТрубыСидеростата = НОРМА;
 2587          					В СОСТ Начало;
 2588          		} 
 2589              } ИНАЧЕ{
 2590          	ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СКОРОСТЬ_ОТКАЧКИ_НИЖЕ_НОРМЫ)) {
 2591          					ФлагОткачкиТрубыСидеростата = ВНЕ_НОРМЫ;
 2592          					В СОСТ Начало;
 2593          		} 
 2594          	}
 2595           }
 2596          }
 2597          /*====================================================*/
 2598          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2599          /*== Контроль Готовности Вакуума в Вакуумной Трубе  ==*/
 2600          /*====================================================*/
 2601          
 2602          ПРОЦ КонтрольГотовностиВакуума_в_Вакуумной_Трубе{
 2603          ИЗ ПРОЦ Инициализация  	ФП_P_ВтрубеСидер,
 2604          						НП_ЗД_P_ВтрубеСидер,
 2605          						ФлагГотовВакуумаВТ,
 2606          						НП_ЗД_Гист_P_ВтрубеСидерВерх,
 2607          						НП_ЗД_Гист_P_ВтрубеСидерНиж;
 2608          СОСТ Начало{
 2609             ЕСЛИ (ФП_P_ВтрубеСидер <= НП_ЗД_P_ВтрубеСидер) {  /* 0.05 */
 2610                   ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_ВАКУУМНОЙ_ТРУБЕ_В_НОРМЕ)) {
 2611          					ФлагГотовВакуумаВТ = НОРМА;
 2612          					В СОСТ ДавлениеНормальное;
 2613          					}
 2614              } ИНАЧЕ {
 2615                          ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_ВАКУУМНОЙ_ТРУБЕ_ВНЕ_НОРМЫ)) {
 2616          					ФлагГотовВакуумаВТ = ВНЕ_НОРМЫ;
 2617          				   В СОСТ ДавлениеВысокое;
 2618          				}
 2619              }
 2620              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2621           }
 2622          
 2623          
 2624           
 2625          СОСТ ДавлениеНормальное{  /*  > 0.055 */
 2626                 ЕСЛИ (ФП_P_ВтрубеСидер > (НП_ЗД_P_ВтрубеСидер + НП_ЗД_Гист_P_ВтрубеСидерВерх))  В СОСТ Начало;  /* ?????поправить идем, если выше нормы */
 2627           } 
 2628          СОСТ ДавлениеВысокое{  /* недостаточный вакуум   < 0.025*/
 2629                 ЕСЛИ (ФП_P_ВтрубеСидер < (НП_ЗД_P_ВтрубеСидер - НП_ЗД_Гист_P_ВтрубеСидерНиж))  В СОСТ Начало;	/* ?????поправить идем, если ниже нормы */
 2630           }  
 2631          
 2632          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2633           СОСТ НарушениеСвязи{
 2634               В СОСТ Начало;
 2635           }
 2636          }
 2637          
 2638          /* конец ПРОЦ КонтрольГотовностиВакуума_в_Вакуумной Трубе
 2639          
 2640          /*====================================================*/
 2641          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2642          /*==           Уровень воды в баке охлаждения       ==*/
 2643          /*====================================================*/
 2644          ПРОЦ КонтрольУровняВодыБакаОхлаждения{  /*  */
 2645           ИЗ ПРОЦ Инициализация
 2646                                  К_УР_ВОДЫ_MIN,
 2647                                  К_УР_ВОДЫ_MAX,
 2648          						ФлагГотовУрВодыБО,
 2649          						Д_УР_ВОДЫ_MIN,
 2650          						Д_УР_ВОДЫ_MAX,
 2651          						К_Достоверности;
 2652          						
 2653           СОСТ Начало{
 2654          	ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/ 
 2655          	ЕСЛИ ((Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX)) { 
 2656          	
 2657          		ЕСЛИ ((!К_УР_ВОДЫ_MIN) && (!К_УР_ВОДЫ_MAX)) {		/*ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКИЙ */
 2658          						ФлагГотовУрВодыБО = ВНЕ_НОРМЫ;
 2659          						В СОСТ СообщениеНизкийУровеньВоды;
 2660          		} ИНАЧЕ { 
 2661          			ЕСЛИ ((К_УР_ВОДЫ_MIN) && (К_УР_ВОДЫ_MAX)) { /*ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКИЙ */
 2662          						ФлагГотовУрВодыБО = ВНЕ_НОРМЫ;
 2663          						В СОСТ СообщениеВысокийУровеньВоды;
 2664          			} ИНАЧЕ {
 2665          				ЕСЛИ ((!К_УР_ВОДЫ_MIN) && (К_УР_ВОДЫ_MAX)) {  /* ПК_ГУИ_ОТКАЗ_ДАТЧИКОВ_УРОВНЯ */
 2666          						ФлагГотовУрВодыБО = ВНЕ_НОРМЫ;
 2667          						В СОСТ СообщениеОтказДатчиков;
 2668          				} ИНАЧЕ  {   /* ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ */
 2669          						ФлагГотовУрВодыБО = НОРМА;
 2670          						В СОСТ СообщениеУровеньВодыВнорме;
 2671          					
 2672          				}
 2673          			}	 
 2674          		}	 
 2675          	}	/* конец((Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX)) */
 2676           } /* конец состояния*/						
 2677          						
 2678          	СОСТ СообщениеНизкийУровеньВоды{
 2679          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКИЙ))В  СОСТ НизкийУровеньВоды;
 2680          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 2681          	} 
 2682          	СОСТ СообщениеВысокийУровеньВоды{
 2683          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКИЙ))В  СОСТ ВысокийУровеньВоды;
 2684          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 2685          	} 						
 2686          	СОСТ СообщениеОтказДатчиков{
 2687          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ДАТЧИКОВ_УРОВНЯ))В  СОСТ ОтказДатчиков;
 2688          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 2689          	} 						
 2690          	СОСТ СообщениеУровеньВодыВнорме{
 2691          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ))В  СОСТ УровеньВодыВнорме;
 2692          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 2693          	} 						
 2694          
 2695          	СОСТ НизкийУровеньВоды{
 2696          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/  
 2697          		ЕСЛИ (((К_УР_ВОДЫ_MIN) || (К_УР_ВОДЫ_MAX)) && (Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX))  В СОСТ Начало;
 2698          	}
 2699          	СОСТ ВысокийУровеньВоды{
 2700           		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/ 
 2701                 ЕСЛИ (((!К_УР_ВОДЫ_MIN) || (!К_УР_ВОДЫ_MAX)) && (Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX)) В СОСТ Начало; 
 2702          	}
 2703          	СОСТ УровеньВодыВнорме{
 2704            		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/ 
 2705          		ЕСЛИ (((!К_УР_ВОДЫ_MIN) || (К_УР_ВОДЫ_MAX)) && (Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX)){ 
 2706          			В СОСТ Начало;
 2707          		}
 2708          	}
 2709          	СОСТ ОтказДатчиков{
 2710          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/  
 2711          		ЕСЛИ (((К_УР_ВОДЫ_MIN) || (!К_УР_ВОДЫ_MAX)) && (Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX))В СОСТ Начало;	
 2712           } 
 2713          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2714          	СОСТ НарушениеСвязи {
 2715          		В СОСТ Начало;
 2716          	}
 2717          }   /*   Конец ПРОЦ КонтрольУровняВодыБакаОхлаждения */
 2718          
 2719          
 2720          /*====================================================*/
 2721          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2722          /*==       Температуры воды в баке охлаждения       ==*/
 2723          /*====================================================*/
 2724          ПРОЦ КонтрольТемпературыВодыБакаОхлаждения{
 2725           ИЗ ПРОЦ Инициализация 	
 2726          						ФП_T_Вбаке,	
 2727                                  ФлагГотовТемпВодыБО,
 2728          						НП_ЗД_T_ВбакеНижняя,
 2729          						НП_ЗД_T_ВбакеВерхняя,
 2730          						НП_ЗД_Гист_T_Вбаке; /* добавлено 20 января 2014 */
 2731          						
 2732           СОСТ Начало{
 2733              ЕСЛИ (ФП_T_Вбаке < НП_ЗД_T_ВбакеНижняя) { /* 10  добавлено 20 января 2014 */
 2734                   ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКАЯ)) {
 2735          					ФлагГотовТемпВодыБО = ВНЕ_НОРМЫ;
 2736          					В СОСТ НизкаяТемператураВоды;
 2737          					}
 2738              } ИНАЧЕ ЕСЛИ (ФП_T_Вбаке > НП_ЗД_T_ВбакеВерхняя) {		/* 60  добавлено 20 января 2014 */
 2739                        ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКАЯ)) {
 2740          			   ФлагГотовТемпВодыБО = ВНЕ_НОРМЫ;
 2741          			   В СОСТ ВысокаяТемператураВоды;
 2742          			   }
 2743              } ИНАЧЕ {
 2744                          ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ)) {
 2745          					ФлагГотовТемпВодыБО = НОРМА;
 2746          				   В СОСТ ТемператураВнорме;
 2747          				}
 2748              }
 2749          		 
 2750              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2751           }
 2752           
 2753          
 2754           СОСТ НизкаяТемператураВоды{					/*  2*/
 2755          	ЕСЛИ (ФП_T_Вбаке > (НП_ЗД_T_ВбакеНижняя + НП_ЗД_Гист_T_Вбаке))  В СОСТ Начало;
 2756          	ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2757           }
 2758          
 2759           СОСТ ВысокаяТемператураВоды{
 2760          	ЕСЛИ (ФП_T_Вбаке < (НП_ЗД_T_ВбакеВерхняя - НП_ЗД_Гист_T_Вбаке))  В СОСТ Начало;
 2761          	ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2762           }
 2763            СОСТ ТемператураВнорме{
 2764                 ЕСЛИ ((ФП_T_Вбаке < (НП_ЗД_T_ВбакеНижняя - НП_ЗД_Гист_T_Вбаке)) || 
 2765          	         (ФП_T_Вбаке > (НП_ЗД_T_ВбакеВерхняя + НП_ЗД_Гист_T_Вбаке)))  В СОСТ Начало;
 2766           } 
 2767           
 2768          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2769           СОСТ НарушениеСвязи {
 2770              В СОСТ Начало;
 2771           }
 2772          }   /*   Конец ПРОЦ КонтрольТемпературыВодыБакаОхлаждения */
 2773          
 2774          
 2775          
 2776          /*====================================================*/
 2777          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2778          /*==       Температуры воды в рубашке охлаждения    ==*/
 2779          /*====================================================*/
 2780          ПРОЦ КонтрольТемпературыРубашкиОхлаждения{
 2781           ИЗ ПРОЦ Инициализация 	
 2782          						ФП_T_Врубашке,	
 2783                                  ФлагГотовTВодыРО,
 2784          						НП_ЗД_T_ВрубашкеНижняя,
 2785          						НП_ЗД_T_ВрубашкеВерхняя,
 2786          						НП_ЗД_Гист_T_Врубашке;
 2787          						
 2788           СОСТ Начало{
 2789              ЕСЛИ (ФП_T_Врубашке < НП_ЗД_T_ВрубашкеНижняя) {  /* 40	изменено 20 января 2014 */
 2790                   ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_НИЗКАЯ)) {
 2791          					ФлагГотовTВодыРО = НИЖЕ_НОРМЫ;
 2792          					В СОСТ НизкаяТемператураВоды;
 2793          					}
 2794              } ИНАЧЕ ЕСЛИ (ФП_T_Врубашке > НП_ЗД_T_ВрубашкеВерхняя) {		/* 85 изменено 20 января 2014 */
 2795                        ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_ВЫСОКАЯ)) {
 2796          			   ФлагГотовTВодыРО = ВЫШЕ_НОРМЫ;
 2797          			   В СОСТ ВысокаяТемператураВоды;
 2798          			   }
 2799              } ИНАЧЕ {
 2800                          ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ)) {
 2801          					ФлагГотовTВодыРО = НОРМА;
 2802          				   В СОСТ ТемператураВнорме;
 2803          				}
 2804                   }
 2805              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2806           }
 2807          
 2808           СОСТ НизкаяТемператураВоды{
 2809                 
 2810          		ЕСЛИ (ФП_T_Врубашке > (НП_ЗД_T_ВрубашкеНижняя + НП_ЗД_Гист_T_Врубашке))  В СОСТ Начало;
 2811          		ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2812           }
 2813          
 2814           СОСТ ВысокаяТемператураВоды{
 2815                  ЕСЛИ (ФП_T_Врубашке < (НП_ЗД_T_ВрубашкеВерхняя - НП_ЗД_Гист_T_Врубашке))  В СОСТ Начало;
 2816          		ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2817           }
 2818           
 2819          
 2820           СОСТ ТемператураВнорме{
 2821                  ЕСЛИ ((ФП_T_Врубашке < (НП_ЗД_T_ВрубашкеНижняя - НП_ЗД_Гист_T_Врубашке)) || 
 2822          	         (ФП_T_Врубашке > (НП_ЗД_T_ВрубашкеВерхняя + НП_ЗД_Гист_T_Врубашке)))  В СОСТ Начало;
 2823           } 
 2824          СОСТ Задержка{
 2825                ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2826           }
 2827           
 2828          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2829           СОСТ НарушениеСвязи {
 2830              В СОСТ Начало;
 2831           }
 2832          }   /*   Конец ПРОЦ КонтрольТемпературыВодыВрубашкеОхлаждения */
 2833          
 2834          /*====================================================*/
 2835          /*					ПРОЦЕСС КОНТРОЛЯ	             */			  
 2836          /*== 		Контроль давления в баке компрессора  	==*/
 2837          /*====================================================*/
 2838          ПРОЦ КонтрольДавленияВбакеКомпрессора{
 2839          ИЗ ПРОЦ Инициализация  	ФП_P_ВбакеКомпрессора,
 2840          						ФлагДавленияКомпрессора,
 2841          						НП_ЗД_P_ВбакеКомпрессора,
 2842          						НП_ЗД_Гист_P_ВбакеКомпрессора;
 2843          
 2844           СОСТ Начало{    						/*  4  */
 2845              ЕСЛИ (ФП_P_ВбакеКомпрессора < НП_ЗД_P_ВбакеКомпрессора) {
 2846                  ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_НИЖЕ_НОРМЫ)) {
 2847          					ФлагДавленияКомпрессора = ВНЕ_НОРМЫ;
 2848          					В СОСТ НизкоеДавление;
 2849          		}
 2850              } ИНАЧЕ ЕСЛИ (ФП_P_ВбакеКомпрессора >= (НП_ЗД_P_ВбакеКомпрессора)) {
 2851          				ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_В_НОРМЕ)) {
 2852          					ФлагДавленияКомпрессора = НОРМА;
 2853          					В СОСТ ДавлениеВнорме;
 2854          				}
 2855          			}
 2856              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2857           }
 2858           СОСТ НизкоеДавление{														/*0.5*/
 2859          		ЕСЛИ (ФП_P_ВбакеКомпрессора > ((НП_ЗД_P_ВбакеКомпрессора ) + НП_ЗД_Гист_P_ВбакеКомпрессора))
 2860          																				В СОСТ Начало;
 2861           }
 2862           СОСТ ДавлениеВнорме{														/*0.5*/
 2863                  ЕСЛИ (ФП_P_ВбакеКомпрессора < (НП_ЗД_P_ВбакеКомпрессора - НП_ЗД_Гист_P_ВбакеКомпрессора))  В СОСТ Начало;
 2864           } 
 2865           СОСТ Задержка{
 2866                ТАЙМАУТ ДВЕ_СЕКУНДЫ В СОСТ Начало;
 2867           }
 2868          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2869           СОСТ НарушениеСвязи {
 2870              В СОСТ Начало;
 2871           }
 2872          }
 2873          /*====================================================*/
 2874          /*					ПРОЦЕСС КОНТРОЛЯ	              */			  
 2875          /*==Контроль аварийного давления в баке компрессора ==*/
 2876          /*				добавлено август 2014				  */
 2877          /*====================================================*/
 2878          ПРОЦ КонтрольАварийногоДавленияВбакеКомпрессора{
 2879          	ИЗ ПРОЦ Инициализация 	ФП_P_ВбакеКомпрессора;
 2880          	СОСТ Начало {
 2881          		ЕСЛИ (ФП_P_ВбакеКомпрессора <= 2.0) В СЛЕДУЮЩЕЕ;
 2882          	}	
 2883          	СОСТ АварийноеДавлениеВбакеКомпрессора{
 2884           		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_АВАРИЯ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_МЕНЬШЕ_2х_АТМОСФЕР)) В СОСТ ПроверкаИдетЛиВакуумирование;
 2885          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2886          	}
 2887          	СОСТ ПроверкаИдетЛиВакуумирование{	
 2888          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Пауза;
 2889          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 2890          	}
 2891          	СОСТ КонтрольВыключения{
 2892          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 2893          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 2894          				ИНАЧЕ  В СОСТ ОжиданиеПовышенияДавления;  /* это значит, что нет необходимости останова всех процессов*/
 2895          		}
 2896          	} 
 2897          	СОСТ ОжиданиеПовышенияДавления{ 
 2898          		ЕСЛИ (ФП_P_ВбакеКомпрессора > 2.0) В СОСТ Начало;
 2899          	}
 2900          	СОСТ Пауза{
 2901               ТАЙМАУТ ПЯТЬ_СЕКУНД В СОСТ Начало;   
 2902          	}	
 2903          
 2904          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2905           СОСТ НарушениеСвязи {
 2906              В СОСТ Начало;
 2907           }
 2908          }
 2909          /*========================================================*/
 2910          /*					ПРОЦЕСС КОНТРОЛЯ	                  */			  
 2911          /*==Контроль аварийной температуры в рубашке охлаждения ==*/
 2912          /*				добавлено август 2014				      */
 2913          /*========================================================*/
 2914          ПРОЦ КонтрольАварийнойТемпературыВрубашкеОхлаждения{
 2915          	ИЗ ПРОЦ Инициализация 	ФП_T_Врубашке,
 2916          							НП_ЗД_T_ВрубашкеВерхняя;
 2917          	СОСТ Начало {
 2918          		ЕСЛИ (ФП_T_Врубашке >  Т_ПредельнаяВрубашкеОхлаждения) В СЛЕДУЮЩЕЕ;
 2919          	}	
 2920          	СОСТ АварийнаяТемператураВрубахеОхлаждения{
 2921           		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_АВАРИЯ_ПЕРЕГРЕВ_РУБАШКИ_ОХЛАЖДЕНИЯ)) В СОСТ ПроверкаИдетЛиВакуумирование;
 2922          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2923          	}
 2924          	СОСТ ПроверкаИдетЛиВакуумирование{	
 2925          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Пауза;
 2926          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 2927          	}
 2928          	СОСТ КонтрольВыключения{
 2929          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 2930          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 2931          				ИНАЧЕ  В СОСТ ОжиданиеСниженияТемпературы;  /* это значит, что нет необходимости останова всех процессов*/
 2932          		}
 2933          	} 
 2934          	СОСТ ОжиданиеСниженияТемпературы{ 
 2935          		ЕСЛИ (ФП_T_Врубашке < НП_ЗД_T_ВрубашкеВерхняя) В СОСТ Начало;
 2936          	}
 2937          	СОСТ Пауза{
 2938               ТАЙМАУТ ПЯТЬ_СЕКУНД В СОСТ Начало;   
 2939          	}	
 2940          
 2941          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2942           СОСТ НарушениеСвязи {
 2943              В СОСТ Начало;
 2944           }
 2945          }
 2946          /*========================================================*/
 2947          /*					ПРОЦЕСС КОНТРОЛЯ	                  */			  
 2948          /*==Контроль аварийной температуры в баке охлаждения ВН ==*/
 2949          /*				добавлено август 2014				      */
 2950          /*========================================================*/
 2951          ПРОЦ КонтрольАварийнойТемпературыВбакеОхлаждения{
 2952          	ИЗ ПРОЦ Инициализация 	ФП_T_Вбаке,
 2953          							НП_ЗД_T_ВбакеВерхняя;
 2954          	СОСТ Начало {
 2955          		ЕСЛИ (ФП_T_Вбаке >  Т_ПредельнаяВбакеОхлаждения) В СЛЕДУЮЩЕЕ;
 2956          	}	
 2957          	СОСТ АварийнаяТемператураВБакеОхлаждения{
 2958          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_АВАРИЯ_ПЕРЕГРЕВ_БАКА_ОХЛАЖДЕНИЯ_НАСОСА)) В СОСТ ПроверкаИдетЛиВакуумирование;
 2959          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2960          	}
 2961          	СОСТ ПроверкаИдетЛиВакуумирование{	
 2962          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Пауза;
 2963          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 2964          	}
 2965          	СОСТ КонтрольВыключения{
 2966          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 2967          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 2968          				ИНАЧЕ  В СОСТ ОжиданиеСниженияТемпературы;  /* это значит, что нет необходимости останова всех процессов*/
 2969          		}
 2970          	} 
 2971          	СОСТ ОжиданиеСниженияТемпературы{ 
 2972          		ЕСЛИ (ФП_T_Вбаке < НП_ЗД_T_ВбакеВерхняя) В СОСТ Начало;
 2973          	}
 2974          	СОСТ Пауза{
 2975               ТАЙМАУТ ПЯТЬ_СЕКУНД В СОСТ Начало;   
 2976          	}	
 2977          
 2978          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2979           СОСТ НарушениеСвязи {
 2980              В СОСТ Начало;
 2981           }
 2982          }
 2983          
 2984          
 2985          /*================================================================*/
 2986          /*         Процесс КонтрольСостоянияПитанияШкафаВакуумнойСистемы 380    */
 2987          /*   добавлено  27-го января 2014                                 */
 2988          /*================================================================*/
 2989          ПРОЦ КонтрольСостоянияПитанияШКАФА_ВС{  
 2990          	ИЗ ПРОЦ Инициализация 	К_ШКАФ_ВС_380,
 2991          							Д_ШКАФ_ВС_380,
 2992          							СостояниеПитШкафаВС380,
 2993          							К_Достоверности;
 2994          							
 2995          	СОСТ Начало {
 2996          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ШКАФ_ВС_380 = ВКЛ;  /* для отладки без достоверностей*/
 2997          	    ЕСЛИ (Д_ШКАФ_ВС_380){
 2998          			ЕСЛИ (К_ШКАФ_ВС_380){
 2999          				СостояниеПитШкафаВС380 = ВКЛ; В СОСТ ВключенСообщаем;
 3000          			}
 3001          			ИНАЧЕ{
 3002          				СостояниеПитШкафаВС380 = ВЫК; 	В СОСТ ВыключенСообщаем;
 3003          			}		
 3004          		}
 3005          	}
 3006          	СОСТ ВключенСообщаем{ 
 3007          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_ПИТАНИЕ_ШКАФА_ВС_380))  В  СОСТ СменаСостоянияВКЛ;
 3008          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3009              }
 3010              СОСТ ВыключенСообщаем{ 
 3011          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_ПИТАНИЕ_ШКАФА_ВС_380))  В СОСТ СменаСостоянияВЫКЛ;
 3012          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3013          	}
 3014              СОСТ СменаСостоянияВКЛ{
 3015          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ШКАФ_ВС_380 = ВКЛ;  /* для отладки без достоверностей*/
 3016          		ЕСЛИ ((!К_ШКАФ_ВС_380)&&(Д_ШКАФ_ВС_380))  В СОСТ Начало;
 3017          	}
 3018          	СОСТ СменаСостоянияВЫКЛ{
 3019          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ШКАФ_ВС_380 = ВКЛ;  /* для отладки без достоверностей*/
 3020          		ЕСЛИ ((К_ШКАФ_ВС_380) && (Д_ШКАФ_ВС_380))  В СОСТ Начало;
 3021          	}  
 3022          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3023          	СОСТ НарушениеСвязи {
 3024          		В СОСТ Начало;
 3025          	} 
 3026          }	
 3027          
 3028          /* 22 сентября 2014 Лях */
 3029          /*================================================================*/
 3030          /*              Процесс контроля оборудования                     */
 3031          /* Работает только тогда, когда включено вакуумирование  		  */
 3032          /*================================================================*/
 3033          /* за запредельной температурой следит процесс  КонтрольАварийнойТемпературыВрубашкеОхлаждения*/
 3034          ПРОЦ КонтрольСостоянияОборудования
 3035          {  
 3036          ИЗ ПРОЦ Инициализация 	ФлагДавленияКомпрессора,
 3037          						К_ОТКР_ЗАТВОР_ВАК , 
 3038          						К_ЗАКР_ЗАТВОР_ВАК ,
 3039          						К_ШКАФ_ВС_380 ,
 3040          						К_САПУН,
 3041          						К_УСТР_ПЛАВ_ПУСКА,
 3042          						К_ПИТ_УПП_ВАК_НАСОСА ,
 3043          						К_ПИТ_ВЕНТИЛЯТОРА,
 3044          						К_ПИТ_РЕГ_Т,
 3045          						К_ПИТ_РЕГ_УР,
 3046          						К_ПИТ_НАСОС_ОХЛ; 
 3047          	СОСТ КонтрольОборудования
 3048          	{
 3049          			ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВКЛ) && /* затвор вакуумный открыт*/
 3050          				(К_ЗАКР_ЗАТВОР_ВАК == ВЫК) &&
 3051          				(К_ШКАФ_ВС_380 == ВКЛ) &&    /* есть питание шкафа*/
 3052          				(К_САПУН == ЗАКР) &&    /* сапун закрыт*/
 3053          				(К_УСТР_ПЛАВ_ПУСКА == ВКЛ) &&    /* есть питание на устройстве плавного пуска */
 3054          				(К_ПИТ_УПП_ВАК_НАСОСА == ВКЛ) &&   /* есть питание вакуумного насоса*/
 3055          				(К_ПИТ_ВЕНТИЛЯТОРА == ВКЛ) &&    /* есть питание вентилятора*/
 3056          				(К_ПИТ_РЕГ_Т == ВКЛ) && /* есть питание регулятора температуры*/     
 3057          				(К_ПИТ_РЕГ_УР == ВКЛ) && /* есть питание регулятора уровня воды*/
 3058          				(К_ПИТ_НАСОС_ОХЛ == ВКЛ)  &&   /* есть питание насоса охлаждения*/ 
 3059          				(ФлагДавленияКомпрессора == НОРМА)  /* давление в компрессоре нормальное*/ 
 3060          			) 
 3061          		{ 			
 3062          			В СОСТ КонтрольОборудования;
 3063          		}
 3064          		ТАЙМАУТ ДВЕ_СЕКУНДЫ В СОСТ СообщениеОбОтказеВакуумирования;   
 3065             }
 3066              СОСТ СообщениеОбОтказеВакуумирования{
 3067                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ_ОТКАЗ_ОБОРУДОВАНИЯ))	В СЛЕДУЮЩЕЕ;
 3068                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 3069           }
 3070          	/*		Сломалось что-то (при включении вак. насоса, например). Пробуем выключить вакуумный насос*/ 
 3071          	/*	 вакуумирование прекращается*/
 3072          	СОСТ ВыключенияВакНасоса{
 3073          		СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ;
 3074          		В СЛЕДУЮЩЕЕ;
 3075          	}	
 3076          	СОСТ КонтрольВыключенияВакНасоса{
 3077          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 3078          			ЕСЛИ (ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 3079          				В СОСТ ВыключениеНаЩиткеКнопарями; /* !!!!!!!!!!!!????? включение вак. системы не сработало штатно*/ 
 3080          			}
 3081          			ИНАЧЕ СТОП;   /* выключилось без ошибок, бежать вниз не надо*/
 3082          		} 
 3083          	} 
 3084          	
 3085            СОСТ ВыключениеНаЩиткеКнопарями{
 3086              СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 3087              ОШИБКА;
 3088           }
 3089            СОСТ НарушениеСвязи {
 3090          	   ОШИБКА;
 3091          	}
 3092          }
 3093          
 3094          
 3095          
 3096          /*=========================================*/
 3097          /*=                                       =*/
 3098          /*=     ПРОЦЕССЫ  УПРАВЛЕНИЯ ВАКУУМНЫМ    =*/
 3099          /*=          ОБОРУДОВАНИЕМ                =*/
 3100          /*=========================================*/
 3101          /*=======================================================*/
 3102          /*=====   Процесс подачи питания на вентилятор		=====*/
 3103          /*=======================================================*/
 3104          ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР{
 3105           ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3106          						У_ПИТ_ВЕНТИЛЯТОРА,
 3107          						Д_ПИТ_ВЕНТИЛЯТОРА,
 3108          						К_Достоверности
 3109          					/*	ОШИБКА_ФУНКЦ_ВЕНТИЛЯТОР */
 3110          						;
 3111           ЛОГ У_Откат ЛОКАЛ;					  
 3112          	СОСТ Начало{
 3113          		У_Откат = У_ПИТ_ВЕНТИЛЯТОРА;
 3114          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР;
 3115          		СТОП ПРОЦ КонтрольСпонтанногоВключенияВентилятора;
 3116          		У_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;
 3117          		В СЛЕДУЮЩЕЕ;      
 3118          	}
 3119          	СОСТ КонтрольВключения{
 3120          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/ 
 3121          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА == ВКЛ) && (Д_ПИТ_ВЕНТИЛЯТОРА))  {
 3122          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияВентилятора;
 3123          			СТОП;  
 3124          		}
 3125          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВЕНТИЛЯТОРА В СОСТ Ошибка;
 3126          	}
 3127            
 3128          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3129          	СОСТ Ошибка {
 3130          		У_ПИТ_ВЕНТИЛЯТОРА = У_Откат;
 3131          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ВЕНТИЛЯТОРА))	ОШИБКА;
 3132          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3133          	}
 3134          	СОСТ НарушениеСвязи {
 3135          	   ОШИБКА;
 3136          	}   
 3137          } /*конец процесса ВКЛ_ПИТ_ВЕНТИЛЯТОР  */
 3138          
 3139          /*=======================================================*/
 3140          /*=====   Процесс отключения питания вентилятора    =====*/
 3141          /*=======================================================*/
 3142          ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР{
 3143           ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3144          						У_ПИТ_ВЕНТИЛЯТОРА,
 3145          						Д_ПИТ_ВЕНТИЛЯТОРА,
 3146          						К_Достоверности;
 3147            ЛОГ У_Откат ЛОКАЛ;
 3148          	СОСТ Начало{
 3149          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР;
 3150          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияВентилятора;
 3151          		У_ПИТ_ВЕНТИЛЯТОРА = ВЫК;
 3152          		В СЛЕДУЮЩЕЕ;      
 3153          	}
 3154          	СОСТ КонтрольВыключения{
 3155          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/
 3156          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА == ВЫК) && (Д_ПИТ_ВЕНТИЛЯТОРА)) {
 3157          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияВентилятора;
 3158          			СТОП;	
 3159          		} 
 3160          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВЕНТИЛЯТОРА В СОСТ Ошибка;
 3161          	}
 3162          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3163          	СОСТ Ошибка {
 3164          		У_ПИТ_ВЕНТИЛЯТОРА = У_Откат;
 3165          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ВЕНТИЛЯТОРА))	ОШИБКА;
 3166          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3167          	}
 3168          	СОСТ НарушениеСвязи {
 3169          	   ОШИБКА;
 3170          	}   
 3171          } /*конец процесса ВЫК_ПИТ_ВЕНТИЛЯТОРА  */
 3172          					  
 3173          /*================================================================*/
 3174          /*         Процесс КонтрольСостоянияПитанияВентилятора  13 декабря     */
 3175          /*================================================================*/
 3176          ПРОЦ КонтрольСостоянияПитанияВентилятора{  
 3177          	ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3178          							Д_ПИТ_ВЕНТИЛЯТОРА,
 3179          							СостояниеВентилятора,
 3180          							К_Достоверности;
 3181          							
 3182          	СОСТ Начало {
 3183          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/
 3184          	   
 3185          
 3186          	   ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА){
 3187          			 ЕСЛИ (К_ПИТ_ВЕНТИЛЯТОРА) 
 3188          			   { 
 3189          					СостояниеВентилятора = ВКЛ;
 3190          					В СОСТ ВключенСообщаем; 
 3191          			   }
 3192          			   ИНАЧЕ      
 3193          			   { 
 3194          					СостояниеВентилятора = ВЫК;
 3195          					В СОСТ ВыключенСообщаем;
 3196          			   }
 3197          		}
 3198          	}
 3199          	СОСТ ВключенСообщаем{ 
 3200          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВЕНТИЛЯТОР_ВКЛЮЧЕН))  В  СОСТ СменаСостоянияВКЛ;
 3201          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3202              }
 3203              СОСТ ВыключенСообщаем{ 
 3204          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВЕНТИЛЯТОР_ВЫКЛЮЧЕН))  В СОСТ СменаСостоянияВЫКЛ;
 3205          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3206          	}
 3207              СОСТ СменаСостоянияВКЛ{
 3208          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/
 3209          		ЕСЛИ ((!К_ПИТ_ВЕНТИЛЯТОРА)&&(Д_ПИТ_ВЕНТИЛЯТОРА))  В СОСТ Начало;
 3210          	}
 3211          	СОСТ СменаСостоянияВЫКЛ{
 3212          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/
 3213          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА) && (Д_ПИТ_ВЕНТИЛЯТОРА))  В СОСТ Начало;
 3214          	}  
 3215          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3216          	СОСТ НарушениеСвязи {
 3217          	   В СОСТ Начало;
 3218          	} 
 3219          }	
 3220          /*========================================================*/
 3221          /*=====   Процесс контроля включенности вентилятора  =====*/
 3222          /*========================================================*/
 3223          ПРОЦ КонтрольСпонтанногоВыключенияВентилятора{
 3224          	ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3225          							У_ПИТ_ВЕНТИЛЯТОРА,
 3226          							Д_ПИТ_ВЕНТИЛЯТОРА,
 3227          							К_Достоверности;
 3228          	СОСТ Контроль {
 3229          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/ 
 3230          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА == ВЫК) && (Д_ПИТ_ВЕНТИЛЯТОРА))
 3231          		{
 3232          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияВентилятора;
 3233          			У_ПИТ_ВЕНТИЛЯТОРА = ВЫК;
 3234          			В СОСТ Ошибка;
 3235          		}
 3236          	}
 3237          	СОСТ Ошибка {
 3238          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_ВЕНТИЛЯТОРА)) ОШИБКА;
 3239          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3240          	}
 3241          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3242          	СОСТ НарушениеСвязи {
 3243          		ОШИБКА;
 3244          	}
 3245          }
 3246          /*=========================================================*/
 3247          /*=====   Процесс контроля выключенности вентилятора  =====*/
 3248          /*=========================================================*/
 3249          ПРОЦ КонтрольСпонтанногоВключенияВентилятора{
 3250          	ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3251          							Д_ПИТ_ВЕНТИЛЯТОРА,
 3252          							У_ПИТ_ВЕНТИЛЯТОРА,
 3253          							К_Достоверности;
 3254          	
 3255          	СОСТ Контроль {
 3256          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/ 
 3257          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА == ВКЛ) && (Д_ПИТ_ВЕНТИЛЯТОРА)) 
 3258          		{	
 3259          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияВентилятора;
 3260          			У_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;
 3261          			В СОСТ Ошибка; 
 3262          		}
 3263          	}
 3264          	СОСТ Ошибка {
 3265          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_ВЕНТИЛЯТОРА)) ОШИБКА;
 3266          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3267          	}
 3268          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 3269          	СОСТ НарушениеСвязи {
 3270          		ОШИБКА;
 3271          	}
 3272          }			  
 3273          /*=========================================================*/
 3274          /* 			КОНТРОЛЬ СОСТОЯНИЯ ЗАТВОРА ВАКУУМНОГО		 */
 3275          /*=========================================================*/
 3276          ПРОЦ КонтрольСостоянияЗатвораВакуумного{  
 3277           ИЗ ПРОЦ Инициализация
 3278                                  К_ОТКР_ЗАТВОР_ВАК,
 3279                                  К_ЗАКР_ЗАТВОР_ВАК,
 3280          						Д_ОТКР_ЗАТВОР_ВАК,
 3281          						Д_ЗАКР_ЗАТВОР_ВАК,
 3282          						КонцевикОткрытияЗатвораВакуумного,
 3283          						КонцевикЗакрытияЗатвораВакуумного,
 3284          						К_Достоверности;
 3285          							
 3286          	СОСТ Начало{
 3287          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/ 
 3288          		ЕСЛИ ((Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК)) { 
 3289          			ЕСЛИ ((!К_ОТКР_ЗАТВОР_ВАК) && (!К_ЗАКР_ЗАТВОР_ВАК) ) {  /*ПК_ГУИ_СРЕДНЕЕ_СОСТОЯНИЕ_ЗАТВОРА_ВАКУУМНОГО*/
 3290          				КонцевикОткрытияЗатвораВакуумного = ВЫК;
 3291          				КонцевикЗакрытияЗатвораВакуумного = ВЫК;
 3292          				В СОСТ СообщениеСменаСостоянияСреднего;
 3293          			} ИНАЧЕ {
 3294          				ЕСЛИ ((!К_ОТКР_ЗАТВОР_ВАК)&&(К_ЗАКР_ЗАТВОР_ВАК)) {  /*ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ЗАКРЫТ*/
 3295          					КонцевикОткрытияЗатвораВакуумного = ВЫК;
 3296          					КонцевикЗакрытияЗатвораВакуумного = ВКЛ;
 3297          					В СОСТ СообщениеСменаСостоянияЗакрытия;
 3298          				} ИНАЧЕ {
 3299          					ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК)&&(!К_ЗАКР_ЗАТВОР_ВАК) ) {  /*ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ОТКРЫТ*/
 3300          						КонцевикОткрытияЗатвораВакуумного = ВКЛ;
 3301          						КонцевикЗакрытияЗатвораВакуумного = ВЫК;
 3302          						В СОСТ СообщениеСменаСостоянияОткрытия;
 3303          					} ИНАЧЕ { 										 /*ПК_ГУИ_СОСТОЯНИЕ_ОШИБКИ_ЗАТВОРА_ВАКУУМНОГО*/
 3304          						КонцевикОткрытияЗатвораВакуумного = ВКЛ;  
 3305          						КонцевикЗакрытияЗатвораВакуумного = ВКЛ;
 3306          						В СОСТ СообщениеСменаСостоянияОшибки;
 3307          					}
 3308          				}
 3309          			}
 3310          		}  /* конец проверка на достоверность*/
 3311          	}  /* конец состояния*/
 3312          
 3313          	СОСТ СообщениеСменаСостоянияСреднего{
 3314          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СРЕДНЕЕ_СОСТОЯНИЕ_ЗАТВОРА_ВАКУУМНОГО))В  СОСТ СменаСостоянияСреднего;
 3315          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 3316          	} 
 3317          	СОСТ СообщениеСменаСостоянияЗакрытия{
 3318          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ЗАКРЫТ))В  СОСТ СменаСостоянияЗакрытия;
 3319          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 3320          	} 
 3321          	СОСТ СообщениеСменаСостоянияОткрытия{
 3322          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ОТКРЫТ))В  СОСТ СменаСостоянияОткрытия;
 3323          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 3324          	} 
 3325          	СОСТ СообщениеСменаСостоянияОшибки{
 3326          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СОСТОЯНИЕ_ОШИБКИ_ЗАТВОРА_ВАКУУМНОГО))В  СОСТ СменаСостоянияОшибки;
 3327          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 3328          	}
 3329          	
 3330          	СОСТ СменаСостоянияСреднего{
 3331          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/ 
 3332                  ЕСЛИ (((К_ОТКР_ЗАТВОР_ВАК) || (К_ЗАКР_ЗАТВОР_ВАК)) && (Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК))  В СОСТ Начало;
 3333          	}
 3334          	СОСТ СменаСостоянияЗакрытия{
 3335          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/ 
 3336          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК || (!К_ЗАКР_ЗАТВОР_ВАК))  && (Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК)) В СОСТ Начало;
 3337          	}
 3338          	СОСТ СменаСостоянияОткрытия{
 3339          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/ 
 3340          		ЕСЛИ (((!К_ОТКР_ЗАТВОР_ВАК) || К_ЗАКР_ЗАТВОР_ВАК)  && (Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК)) В СОСТ Начало;
 3341          	}
 3342          	СОСТ СменаСостоянияОшибки{
 3343          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/ 
 3344          		ЕСЛИ (((!К_ОТКР_ЗАТВОР_ВАК) || (!К_ЗАКР_ЗАТВОР_ВАК))  && (Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК))  В СОСТ Начало;
 3345          	}
 3346          
 3347          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3348          	СОСТ НарушениеСвязи {
 3349          		В СОСТ Начало;
 3350          	}
 3351          }
 3352          
 3353          /*===========================================================*/
 3354          /*=====   Процесс открытия затвора вакуумного         =======*/
 3355          /*===========================================================*/
 3356          ПРОЦ ОТКР_ЗАТВОР_ВАК{
 3357           ИЗ ПРОЦ Инициализация 	К_ОТКР_ЗАТВОР_ВАК,
 3358          						К_ЗАКР_ЗАТВОР_ВАК,
 3359          						У_ЗАТВОР_ВАК,
 3360          						Д_ОТКР_ЗАТВОР_ВАК,
 3361          						Д_ЗАКР_ЗАТВОР_ВАК,
 3362          						К_Достоверности;
 3363            ЛОГ У_Откат ЛОКАЛ;		
 3364          	СОСТ Начало{
 3365          		У_Откат = У_ЗАТВОР_ВАК;
 3366          		ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ЗАКР_ЗАТВОР_ВАК;
 3367          		СТОП ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного;
 3368          		У_ЗАТВОР_ВАК = ОТКР;
 3369          		В СЛЕДУЮЩЕЕ;      
 3370          	}
 3371          	СОСТ Контроль{ 
 3372          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ;} /* для отладки без достоверностей*/  
 3373          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВКЛ) && (Д_ОТКР_ЗАТВОР_ВАК) &&
 3374          				(К_ЗАКР_ЗАТВОР_ВАК == ВЫК) && (Д_ЗАКР_ЗАТВОР_ВАК)) {
 3375          			СТАРТ ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного;		
 3376          			СТОП;
 3377          		}
 3378          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ЗАТ_ВАК В СОСТ Ошибка;
 3379          	}
 3380          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3381          	СОСТ Ошибка {
 3382          		У_ЗАТВОР_ВАК = У_Откат;
 3383          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ОТКРЫТИЯ_ЗАТВОРА_ВАКУУМНОГО))	ОШИБКА;
 3384          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3385          	}
 3386          	СОСТ НарушениеСвязи {
 3387          	   ОШИБКА;
 3388          	}
 3389          }   /*конец процесса ОТКР_ЗАТВОР_ВАК */
 3390          /*===========================================================*/
 3391          /*=====   Процесс закрытия затвора вакуумного         =======*/
 3392          /*===========================================================*/
 3393          ПРОЦ ЗАКР_ЗАТВОР_ВАК{
 3394           ИЗ ПРОЦ Инициализация 	К_ОТКР_ЗАТВОР_ВАК,
 3395          						К_ЗАКР_ЗАТВОР_ВАК,
 3396          						У_ЗАТВОР_ВАК,
 3397          						Д_ОТКР_ЗАТВОР_ВАК,
 3398          						Д_ЗАКР_ЗАТВОР_ВАК,
 3399          						К_Достоверности;
 3400            ЛОГ У_Откат ЛОКАЛ;
 3401          	СОСТ Начало{
 3402          		У_Откат = У_ЗАТВОР_ВАК;
 3403          		ЕСЛИ (ПРОЦ ОТКР_ЗАТВОР_ВАК В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ОТКР_ЗАТВОР_ВАК;
 3404          		СТОП ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного;
 3405          		У_ЗАТВОР_ВАК = ЗАКР;
 3406          		В СЛЕДУЮЩЕЕ;      
 3407          	}
 3408          	СОСТ Контроль{ 
 3409          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ;} /* для отладки без достоверностей*/  
 3410          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВЫК) && (Д_ОТКР_ЗАТВОР_ВАК) &&
 3411          				(К_ЗАКР_ЗАТВОР_ВАК == ВКЛ) && (Д_ЗАКР_ЗАТВОР_ВАК) ) {
 3412          			СТАРТ ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного;	
 3413          			СТОП;
 3414          		} 
 3415          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ЗАТ_ВАК В СОСТ Ошибка;
 3416          	}
 3417          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3418          	СОСТ Ошибка {
 3419          		У_ЗАТВОР_ВАК = У_Откат;
 3420          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ЗАКРЫТИЯ_ЗАТВОРА_ВАКУУМНОГО))	ОШИБКА;
 3421          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3422          	}
 3423          	СОСТ НарушениеСвязи {
 3424          		ОШИБКА;
 3425          	}
 3426          } /*конец процесса ЗАКР_ЗАТВОР_ВАК */
 3427          
 3428          
 3429          /*========================================================*/
 3430          /*=====  Процесс контроля включенности затвора вак.  =====*/
 3431          /*========================================================*/
 3432          /*  затвор был открыт, но вдруг закрылся */
 3433          ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного{
 3434          	ИЗ ПРОЦ Инициализация 	К_ОТКР_ЗАТВОР_ВАК,
 3435          							К_ЗАКР_ЗАТВОР_ВАК,
 3436          							Д_ОТКР_ЗАТВОР_ВАК,
 3437          							Д_ЗАКР_ЗАТВОР_ВАК,
 3438          							У_ЗАТВОР_ВАК,
 3439          							К_Достоверности;
 3440          
 3441          	СОСТ КонтрольЗакрытия {
 3442          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ;} /* для отладки без достоверностей*/  
 3443          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВЫК) && (Д_ОТКР_ЗАТВОР_ВАК) &&
 3444          				(К_ЗАКР_ЗАТВОР_ВАК == ВКЛ) && (Д_ЗАКР_ЗАТВОР_ВАК) )
 3445          
 3446          		{
 3447          			СТАРТ ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного;
 3448          			У_ЗАТВОР_ВАК = ЗАКР;
 3449          			В СОСТ Ошибка;
 3450          		}
 3451          	}
 3452          	СОСТ Ошибка {
 3453          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ЗАКРЫТИЕ_ЗАТ_ВАКУУМНОГО)) {
 3454          			ОШИБКА; }
 3455          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3456          	}
 3457          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 3458          	СОСТ НарушениеСвязи {
 3459          		ОШИБКА;
 3460          	}
 3461          }	
 3462          /*=========================================================*/
 3463          /*=====   Процесс контроля выключенности затвора вак  =====*/
 3464          /*=========================================================*/
 3465          /*  затвор был закрыт, но вдруг открылся */
 3466          ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного{
 3467          	ИЗ ПРОЦ Инициализация 	К_ОТКР_ЗАТВОР_ВАК,
 3468          							К_ЗАКР_ЗАТВОР_ВАК,
 3469          							Д_ОТКР_ЗАТВОР_ВАК,
 3470          							Д_ЗАКР_ЗАТВОР_ВАК,
 3471          							У_ЗАТВОР_ВАК,
 3472          							К_Достоверности;
 3473          	
 3474          	СОСТ Контроль {
 3475          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ;} /* для отладки без достоверностей*/  
 3476          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВКЛ) && (Д_ОТКР_ЗАТВОР_ВАК) &&
 3477          				(К_ЗАКР_ЗАТВОР_ВАК == ВЫК) && (Д_ЗАКР_ЗАТВОР_ВАК) )
 3478          			{
 3479          				СТАРТ ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного;
 3480          				У_ЗАТВОР_ВАК = ОТКР;
 3481          				В СОСТ Ошибка;
 3482          			}
 3483          	}
 3484          	СОСТ Ошибка {
 3485          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ОТКРЫТИЕ_ЗАТ_ВАКУУМНОГО))  ОШИБКА;
 3486          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3487          	}
 3488              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 3489          	СОСТ НарушениеСвязи {
 3490          		ОШИБКА;
 3491          	}
 3492          }			  
 3493          /*===========================================================*/
 3494          /*=====   Процесс открытия сапуна                    =======*/
 3495          /*===========================================================*/
 3496          ПРОЦ ОТКР_САПУН{
 3497           ИЗ ПРОЦ Инициализация 	К_САПУН, 
 3498          						У_САПУН,
 3499          						Д_САПУН,
 3500          						К_Достоверности;
 3501            ЛОГ У_Откат ЛОКАЛ;						
 3502          	СОСТ Начало{
 3503          		У_Откат = У_САПУН;
 3504          		ЕСЛИ (ПРОЦ ЗАКР_САПУН В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ЗАКР_САПУН;
 3505          		СТОП ПРОЦ КонтрольСпонтанногоОткрытияСапуна;	
 3506          		У_САПУН = ОТКР;
 3507          		В СЛЕДУЮЩЕЕ;      
 3508          	}
 3509          	СОСТ КонтрольОткрытия{
 3510          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/  
 3511          		ЕСЛИ ((К_САПУН == ОТКР) && (Д_САПУН)){
 3512          			СТАРТ ПРОЦ КонтрольСпонтанногоЗакрытияСапуна;	
 3513          			СТОП;	
 3514          		}
 3515          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_САПУНА В СОСТ Ошибка;  /* здесь надо выдавать код ошибки в ГУИ */
 3516          	}
 3517          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3518          	СОСТ Ошибка {
 3519          		У_САПУН = У_Откат;
 3520          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ОТКРЫТИЯ_САПУНА))	ОШИБКА;
 3521          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3522          	}
 3523            СОСТ НарушениеСвязи {
 3524          	   ОШИБКА;
 3525           }
 3526          }  /*конец процесса ОТКР_САПУН  */
 3527          
 3528          
 3529          /*===========================================================*/
 3530          /*==!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ==========================*/
 3531          /*=====   Процесс закрытия сапуна                    =======*/
 3532          /*===========================================================*/
 3533          ПРОЦ ЗАКР_САПУН{
 3534           ИЗ ПРОЦ Инициализация 	К_САПУН,
 3535                                	У_САПУН,
 3536          						Д_САПУН,
 3537          						К_Достоверности;
 3538            ЛОГ У_Откат ЛОКАЛ;
 3539          
 3540          	СОСТ Начало{
 3541          	У_Откат = У_САПУН;
 3542          	ЕСЛИ (ПРОЦ ОТКР_САПУН В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ОТКР_САПУН;
 3543          		СТОП ПРОЦ КонтрольСпонтанногоЗакрытияСапуна;   
 3544          		У_САПУН = ЗАКР;
 3545          		В СЛЕДУЮЩЕЕ;      
 3546          	}
 3547          	СОСТ КонтрольЗакрытия{ 
 3548          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/  
 3549          		ЕСЛИ ((К_САПУН == ЗАКР) && (Д_САПУН)){
 3550          			СТАРТ ПРОЦ КонтрольСпонтанногоОткрытияСапуна;	
 3551          			СТОП;	
 3552          		}
 3553          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_САПУНА 	В СОСТ Ошибка;
 3554            
 3555          	}
 3556          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3557          	СОСТ Ошибка {
 3558          		У_САПУН = У_Откат;
 3559          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ЗАКРЫТИЯ_САПУНА))	ОШИБКА;
 3560          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3561          	}
 3562          	СОСТ НарушениеСвязи {
 3563          		ОШИБКА;
 3564          	}
 3565          } /*конец процесса ЗАКР_САПУН  */
 3566          
 3567          
 3568          /*================================================================*/
 3569          /*         Процесс КонтрольСостоянияПитанияСапуна    13 декабря   */
 3570          /*================================================================*/
 3571          ПРОЦ КонтрольСостоянияПитанияСапуна{
 3572          	ИЗ ПРОЦ Инициализация 	К_САПУН,
 3573          							Д_САПУН,
 3574          							СостояниеСапуна,
 3575          							К_Достоверности;
 3576          	СОСТ Начало {
 3577          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/
 3578          	    ЕСЛИ (Д_САПУН){
 3579          			ЕСЛИ (К_САПУН){
 3580          				СостояниеСапуна = ОТКР; В СОСТ ОткрытСообщаем;
 3581          			}
 3582          			ИНАЧЕ{
 3583          				СостояниеСапуна = ЗАКР; 	В СОСТ ЗакрытСообщаем;
 3584          			}		
 3585          		}
 3586          /*	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ;??????	*/
 3587          	}							
 3588          	СОСТ ОткрытСообщаем{ 
 3589          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_САПУН_ОТКРЫТ))  В  СОСТ СменаСостоянияОткрыт;
 3590          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3591              }							
 3592              СОСТ ЗакрытСообщаем{ 
 3593          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_САПУН_ЗАКРЫТ))  В СОСТ СменаСостоянияЗакрыт;
 3594          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3595          	}							
 3596              СОСТ СменаСостоянияОткрыт{
 3597          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/
 3598          		ЕСЛИ ((!К_САПУН)&&(Д_САПУН))  В СОСТ Начало;
 3599          	}
 3600          	СОСТ СменаСостоянияЗакрыт{
 3601          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/
 3602          		ЕСЛИ ((К_САПУН) && (Д_САПУН))  В СОСТ Начало;
 3603          	}  							
 3604          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3605           СОСТ НарушениеСвязи {
 3606                В СОСТ Начало;
 3607           }
 3608          }
 3609          /*========================================================*/
 3610          /*=====  Процесс контроля включенности сапуна        =====*/
 3611          /*========================================================*/
 3612          ПРОЦ КонтрольСпонтанногоЗакрытияСапуна{
 3613          	ИЗ ПРОЦ Инициализация 	К_САПУН,
 3614          							Д_САПУН,
 3615          							У_САПУН,
 3616          							К_Достоверности;
 3617          
 3618          	СОСТ КонтрольЗакрытия {
 3619          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/  
 3620          		ЕСЛИ ((К_САПУН == ВЫК) && (Д_САПУН)) 
 3621          			{	
 3622          				СТАРТ ПРОЦ КонтрольСпонтанногоОткрытияСапуна;
 3623          				У_САПУН = ЗАКР;
 3624          				В СОСТ Ошибка;
 3625          			}
 3626          	}
 3627          	СОСТ Ошибка {
 3628          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ЗАКРЫТИЕ_САПУНА)) ОШИБКА;
 3629          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3630          	}
 3631          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 3632          	СОСТ НарушениеСвязи {
 3633          		ОШИБКА;
 3634          	}
 3635          }
 3636          
 3637          	
 3638          /*=========================================================*/
 3639          /*=====   Процесс контроля выключенности сапуна       =====*/
 3640          /*=========================================================*/
 3641          ПРОЦ КонтрольСпонтанногоОткрытияСапуна{
 3642          	ИЗ ПРОЦ Инициализация 	К_САПУН,
 3643          							Д_САПУН,
 3644          							У_САПУН,
 3645          							К_Достоверности;
 3646          	
 3647          	СОСТ Контроль {
 3648          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/ 
 3649          		ЕСЛИ ((К_САПУН == ВКЛ) && (Д_САПУН))
 3650          		{
 3651          			СТАРТ ПРОЦ КонтрольСпонтанногоЗакрытияСапуна;
 3652          			У_САПУН = ОТКР;
 3653          			В СОСТ Ошибка;
 3654          		}
 3655          	}
 3656          	СОСТ Ошибка {
 3657          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ОТКРЫТИЕ_САПУНА)) ОШИБКА;
 3658          				/*  если включился, то и ладно, вакуумирования-то нет !!!!!!!!!!!!!!!!!*/
 3659          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3660          	}
 3661          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 3662          	СОСТ НарушениеСвязи {
 3663          		ОШИБКА;
 3664          	}
 3665          }
 3666          
 3667          
 3668          		  
 3669          /*================================================================*/
 3670          /*              Процесс включить питание вакуумного насоса        */
 3671          /*================================================================*/
 3672          ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА{  
 3673           ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3674          						У_ПИТ_УПП_ВАК_НАСОСА,  
 3675          						Д_ПИТ_УПП_ВАК_НАСОСА,  
 3676          						К_Достоверности;
 3677            ЛОГ У_Откат ЛОКАЛ;
 3678            
 3679          	СОСТ Начало{
 3680          		У_Откат = У_ПИТ_УПП_ВАК_НАСОСА;
 3681          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА;  
 3682          		СТОП ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса;
 3683          		У_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;   
 3684          		В СЛЕДУЮЩЕЕ;      
 3685          	}
 3686          	СОСТ КонтрольВключения{ 
 3687          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/   
 3688          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА == ВКЛ) && (Д_ПИТ_УПП_ВАК_НАСОСА)){        
 3689          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса;
 3690          			СТОП;	
 3691          		}
 3692          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВАК_НАСОСА 	В СОСТ Ошибка;
 3693           } 
 3694          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3695          	СОСТ Ошибка {
 3696          		У_ПИТ_УПП_ВАК_НАСОСА = У_Откат;
 3697          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ПИТАНИЯ_УПП_ВАКУУМНОГО_НАСОСА))	ОШИБКА;
 3698          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3699          	}
 3700          	СОСТ НарушениеСвязи {
 3701          	   ОШИБКА;
 3702          	} 
 3703          } /*конец процесса ВКЛ_ПИТ_УПП_ВАК_НАСОСА  */   
 3704          
 3705          /*================================================================*/
 3706          /*              Процесс выключить питание вакуумного насоса       */
 3707          /*================================================================*/
 3708          ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА{  
 3709           ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3710          						У_ПИТ_УПП_ВАК_НАСОСА,  
 3711          						Д_ПИТ_УПП_ВАК_НАСОСА,  
 3712          						К_Достоверности;
 3713            ЛОГ У_Откат ЛОКАЛ;
 3714            
 3715          	СОСТ Начало{
 3716          		У_Откат = У_ПИТ_УПП_ВАК_НАСОСА;
 3717          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА; 
 3718          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса;
 3719          		У_ПИТ_УПП_ВАК_НАСОСА = ВЫК;   
 3720          		В СЛЕДУЮЩЕЕ;      
 3721          	}
 3722          
 3723          	СОСТ КонтрольВыключения{
 3724          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/ 
 3725          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА == ВЫК) && (Д_ПИТ_УПП_ВАК_НАСОСА)) {  
 3726          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса;
 3727          			СТОП;	
 3728          		}
 3729          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВАК_НАСОСА 	В СОСТ Ошибка;
 3730          	} 
 3731          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3732          	СОСТ Ошибка {
 3733          		У_ПИТ_УПП_ВАК_НАСОСА = У_Откат;
 3734          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ПИТАНИЯ_УПП_ВАКУУМНОГО_НАСОСА))	ОШИБКА;
 3735          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3736          	}
 3737          	СОСТ НарушениеСвязи {
 3738          	   ОШИБКА;
 3739          	}
 3740          }  /*конец процесса ВЫК_ПИТ_УПП_ВАК_НАСОСА */  
 3741          
 3742          /*================================================================*/
 3743          /*         Процесс КонтрольСостоянияПитанияУППВакНасоса    13 декабря   */
 3744          /*================================================================*/
 3745          ПРОЦ КонтрольСостоянияПитанияУППВакНасоса{
 3746          	ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3747          							Д_ПИТ_УПП_ВАК_НАСОСА,  
 3748          							СостояниеУППВакуумногоНасоса,
 3749          							К_Достоверности;
 3750          	СОСТ Начало {
 3751          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/
 3752          	    ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА){
 3753          			ЕСЛИ (К_ПИТ_УПП_ВАК_НАСОСА){
 3754          				СостояниеУППВакуумногоНасоса = ВКЛ; В СОСТ ВключенСообщаем;
 3755          			}
 3756          			ИНАЧЕ{
 3757          				СостояниеУППВакуумногоНасоса = ВЫК; 	В СОСТ ВыключенСообщаем;
 3758          			}		
 3759          		}
 3760          	}								
 3761          	СОСТ ВключенСообщаем{ 
 3762          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_УПП_ВАКУУМНОГО_НАСОСА_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 3763          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3764              }							
 3765              СОСТ ВыключенСообщаем{ 
 3766          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_УПП_ВАКУУМНОГО_НАСОСА_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 3767          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3768          	}	
 3769             СОСТ СменаСостоянияВКЛ{
 3770          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/
 3771          		ЕСЛИ ((!К_ПИТ_УПП_ВАК_НАСОСА)&&(Д_ПИТ_УПП_ВАК_НАСОСА))  В СОСТ Начало;
 3772          	}
 3773          	СОСТ СменаСостоянияВЫК{
 3774          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/
 3775          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА) && (Д_ПИТ_УПП_ВАК_НАСОСА))  В СОСТ Начало;
 3776          	}  
 3777          
 3778          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3779          	СОСТ НарушениеСвязи {
 3780                В СОСТ Начало;
 3781          	}
 3782          }
 3783          /*========================================================*/
 3784          /*=====   Процесс контроля спонтанного выключения  =====*/
 3785          /*========================================================*/
 3786          ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса{
 3787          	ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3788          							Д_ПИТ_УПП_ВАК_НАСОСА,
 3789          							У_ПИТ_УПП_ВАК_НАСОСА,
 3790          							К_Достоверности;
 3791          
 3792          	СОСТ Контроль {
 3793          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/	
 3794          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА == ВЫК) && (Д_ПИТ_УПП_ВАК_НАСОСА))
 3795          			{ 
 3796          				СТАРТ ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса;
 3797          				У_ПИТ_УПП_ВАК_НАСОСА = ВЫК;
 3798          				В СОСТ Ошибка;
 3799          			}
 3800          	}
 3801          	СОСТ Ошибка {
 3802          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_УПП_ВАКУУМНОГО_НАСОСА)) ОШИБКА;  
 3803          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3804          	}
 3805          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 3806          	СОСТ НарушениеСвязи {
 3807          		ОШИБКА;
 3808          	}
 3809          }
 3810          /*=========================================================*/
 3811          /*=====   Процесс контроля спонтанного включения  =====*/
 3812          /*=========================================================*/
 3813          ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса{
 3814          	ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3815          							Д_ПИТ_УПП_ВАК_НАСОСА,
 3816          							У_ПИТ_УПП_ВАК_НАСОСА,
 3817          							К_Достоверности;
 3818          	
 3819          	СОСТ Контроль {
 3820          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/
 3821          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА == ВКЛ) && (Д_ПИТ_УПП_ВАК_НАСОСА))
 3822          			{	
 3823          				СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса;
 3824          				У_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;
 3825          				В СОСТ Ошибка;
 3826          			}
 3827          	}
 3828          	СОСТ Ошибка {
 3829          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_УПП_ВАКУУМНОГО_НАСОСА)) ОШИБКА;
 3830          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3831          	}
 3832              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 3833          	СОСТ НарушениеСвязи {
 3834          		ОШИБКА;
 3835          	}
 3836          }			  
 3837          /*================================================================*/
 3838          /*              Процесс Подать питание на регулятор температуры   */
 3839          /*================================================================*/
 3840          ПРОЦ ВКЛ_ПИТ_РЕГ_Т{
 3841           ИЗ ПРОЦ Инициализация 	У_ПИТ_РЕГ_Т,					
 3842          						К_ПИТ_РЕГ_Т,
 3843          						Д_ПИТ_РЕГ_Т,
 3844          						ФлагГотовУрВодыБО,
 3845          						К_Достоверности;
 3846            ЛОГ У_Откат ЛОКАЛ;
 3847            
 3848          	СОСТ Начало{
 3849          	/*	ЕСЛИ (ФлагГотовУрВодыБО == ВНЕ_НОРМЫ) В СОСТ Ошибка; ????восстановить?????????*/
 3850          	/*	ИНАЧЕ { */
 3851          		У_Откат = У_ПИТ_РЕГ_Т;
 3852          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_РЕГ_Т В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_РЕГ_Т;
 3853          		СТОП ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т;
 3854          		У_ПИТ_РЕГ_Т = ВКЛ;
 3855          		В СЛЕДУЮЩЕЕ;      
 3856          	/*	}	*/
 3857          	}
 3858          	СОСТ КонтрольВключения{
 3859          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/ 
 3860          		ЕСЛИ ((К_ПИТ_РЕГ_Т == ВКЛ) && (Д_ПИТ_РЕГ_Т)) {
 3861          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т;
 3862          		СТОП;	
 3863          		}
 3864          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_Т В СОСТ Ошибка;
 3865           } 
 3866          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3867          	СОСТ Ошибка {
 3868          		У_ПИТ_РЕГ_Т = У_Откат;
 3869          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ))	ОШИБКА;
 3870          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3871          	}
 3872          	СОСТ НарушениеСвязи{
 3873          	   ОШИБКА;
 3874          	} 
 3875          } /*конец процесса ВКЛ_ПИТ_РЕГ_Т */
 3876          
 3877          /*================================================================*/
 3878          /*        Процесс Снять питание с регулятора температуры          */
 3879          /*================================================================*/
 3880          ПРОЦ ВЫК_ПИТ_РЕГ_Т{
 3881           ИЗ ПРОЦ Инициализация 	У_ПИТ_РЕГ_Т,
 3882          						К_ПИТ_РЕГ_Т,
 3883          						Д_ПИТ_РЕГ_Т,
 3884          						К_Достоверности;
 3885             ЛОГ У_Откат ЛОКАЛ;
 3886             
 3887          	СОСТ Начало{
 3888          		У_Откат = У_ПИТ_РЕГ_Т;
 3889          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_РЕГ_Т В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_РЕГ_Т;
 3890          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т;
 3891          		У_ПИТ_РЕГ_Т  = ВЫК;
 3892          		В СЛЕДУЮЩЕЕ;      
 3893          	}
 3894          	СОСТ КонтрольВыключения{ 
 3895          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/  
 3896          		ЕСЛИ ((К_ПИТ_РЕГ_Т == ВЫК) && (Д_ПИТ_РЕГ_Т)) {	
 3897          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т;  
 3898          			СТОП;	
 3899          		} 
 3900          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_Т В СОСТ Ошибка;
 3901          	}
 3902          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3903          	СОСТ Ошибка {
 3904          		У_ПИТ_РЕГ_Т = У_Откат;
 3905          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ))	ОШИБКА;
 3906          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3907          	}
 3908          	СОСТ НарушениеСвязи {
 3909          	   ОШИБКА;
 3910          	} 
 3911          }  /*конец процесса ВЫК_ПИТ_РЕГ_Т */
 3912          
 3913          /*================================================================*/
 3914          /*         Процесс КонтрольСостоянияРегулятораТемпературы       */
 3915          /*================================================================*/
 3916          ПРОЦ КонтрольСостоянияПитанияРЕГ_Т{
 3917          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_Т,
 3918          							Д_ПИТ_РЕГ_Т,
 3919          							СостояниеПИТ_РЕГ_Т,
 3920          							К_Достоверности;
 3921          	СОСТ Начало {
 3922          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 3923          	    ЕСЛИ (Д_ПИТ_РЕГ_Т){
 3924          			ЕСЛИ (К_ПИТ_РЕГ_Т){
 3925          				СостояниеПИТ_РЕГ_Т = ВКЛ;  В СОСТ ВключенСообщаем;
 3926          			}
 3927          			ИНАЧЕ{
 3928          				СостояниеПИТ_РЕГ_Т = ВЫК;  	В СОСТ ВыключенСообщаем;
 3929          			}		
 3930          		}
 3931          	}							
 3932          	СОСТ ВключенСообщаем{ 
 3933          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 3934          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3935              }							
 3936              СОСТ ВыключенСообщаем{ 
 3937          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 3938          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3939          	}								
 3940             СОСТ СменаСостоянияВКЛ{
 3941          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 3942          		ЕСЛИ ((!К_ПИТ_РЕГ_Т)&&(Д_ПИТ_РЕГ_Т))  В СОСТ Начало;
 3943          	}
 3944          	СОСТ СменаСостоянияВЫК{
 3945          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 3946          		ЕСЛИ ((К_ПИТ_РЕГ_Т) && (Д_ПИТ_РЕГ_Т))  В СОСТ Начало;
 3947          	} 							
 3948          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3949          	СОСТ НарушениеСвязи {
 3950                В СОСТ Начало;
 3951          	}
 3952          }
 3953          /*========================================================*/
 3954          /*=====   Процесс контроля спонтанного выключения  =====*/
 3955          /*========================================================*/
 3956          ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т{
 3957          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_Т,
 3958          							Д_ПИТ_РЕГ_Т,
 3959          							У_ПИТ_РЕГ_Т,
 3960          							К_Достоверности;
 3961          
 3962          	СОСТ Контроль {
 3963          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 3964          		ЕСЛИ ((К_ПИТ_РЕГ_Т == ВЫК) && (Д_ПИТ_РЕГ_Т)) 
 3965          		{
 3966          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т;
 3967          			У_ПИТ_РЕГ_Т = ВЫК;
 3968          			В СОСТ Ошибка;
 3969          		}
 3970          	}
 3971          	СОСТ Ошибка {
 3972          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ)) ОШИБКА;
 3973          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3974          	}
 3975          	
 3976              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 3977          	СОСТ НарушениеСвязи {
 3978          		ОШИБКА;
 3979          	}
 3980          }	
 3981          /*=========================================================*/
 3982          /*=====   Процесс контроля спонтанного включения  =====*/
 3983          /*=========================================================*/
 3984          ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т{
 3985          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_Т,
 3986          							Д_ПИТ_РЕГ_Т, 
 3987          							У_ПИТ_РЕГ_Т,
 3988          							К_Достоверности;
 3989          	
 3990          	СОСТ Контроль {
 3991          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 3992          		ЕСЛИ ((К_ПИТ_РЕГ_Т == ВКЛ) && (Д_ПИТ_РЕГ_Т)) 
 3993          		{
 3994          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т;
 3995          			У_ПИТ_РЕГ_Т = ВКЛ;
 3996          			В СОСТ Ошибка;
 3997          		}
 3998          	}
 3999          	СОСТ Ошибка {
 4000          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ)) ОШИБКА;
 4001          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4002          	}
 4003          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 4004          	СОСТ НарушениеСвязи {
 4005          		ОШИБКА;
 4006          	}
 4007          }			  
 4008          /*================================================================*/
 4009          /*        Процесс Подать питание на регулятор уровня воды         */
 4010          /*================================================================*/
 4011          ПРОЦ ВКЛ_ПИТ_РЕГ_УР{
 4012           ИЗ ПРОЦ Инициализация 	У_ПИТ_РЕГ_УР,
 4013          						К_ПИТ_РЕГ_УР,
 4014          						Д_ПИТ_РЕГ_УР,
 4015          						К_Достоверности;
 4016             ЛОГ У_Откат ЛОКАЛ;
 4017             
 4018          	СОСТ Начало{
 4019          		У_Откат = У_ПИТ_РЕГ_УР;
 4020          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_РЕГ_УР В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_РЕГ_УР;
 4021          		СТОП ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР;
 4022          		У_ПИТ_РЕГ_УР = ВКЛ;
 4023          		В СЛЕДУЮЩЕЕ;      
 4024          	}
 4025          	СОСТ Контроль{
 4026          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/ 
 4027          		ЕСЛИ ((К_ПИТ_РЕГ_УР == ВКЛ) && (Д_ПИТ_РЕГ_УР)){
 4028          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР;
 4029          		СТОП;	
 4030          		} 
 4031          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_УР В СОСТ Ошибка; 
 4032          	}
 4033          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4034          	СОСТ Ошибка {
 4035          		У_ПИТ_РЕГ_УР = У_Откат;
 4036          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_РЕГУЛЯТОРА_УРОВНЯ))	ОШИБКА;
 4037          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4038          	}
 4039          	СОСТ НарушениеСвязи {
 4040          	   ОШИБКА;
 4041          	} 
 4042          }  /*конец процесса ВКЛ_ПИТ_РЕГ_УР */
 4043          
 4044          /*================================================================*/
 4045          /*        Процесс Снять питание с регулятора уровня воды          */
 4046          /*================================================================*/
 4047          ПРОЦ ВЫК_ПИТ_РЕГ_УР{
 4048           ИЗ ПРОЦ Инициализация 	У_ПИТ_РЕГ_УР,
 4049          						К_ПИТ_РЕГ_УР,
 4050          						Д_ПИТ_РЕГ_УР,
 4051          						К_Достоверности;
 4052             ЛОГ У_Откат ЛОКАЛ;
 4053             
 4054          	СОСТ Начало{
 4055          		У_Откат = У_ПИТ_РЕГ_УР;
 4056          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_РЕГ_УР В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_РЕГ_УР;
 4057          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР;
 4058          		У_ПИТ_РЕГ_УР = ВЫК;
 4059          		В СЛЕДУЮЩЕЕ;      
 4060          	}
 4061          
 4062          	СОСТ Контроль{ 
 4063          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/  
 4064          		ЕСЛИ ((К_ПИТ_РЕГ_УР == ВЫК) && (Д_ПИТ_РЕГ_УР)){
 4065          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР;
 4066          			СТОП;	
 4067          		} 
 4068          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_УР 	В СОСТ Ошибка; 
 4069          	}
 4070          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4071          	СОСТ Ошибка {
 4072          		У_ПИТ_РЕГ_УР = У_Откат;
 4073          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_РЕГУЛЯТОРА_УРОВНЯ))	ОШИБКА;
 4074          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4075          	}
 4076          	СОСТ НарушениеСвязи {
 4077          	   ОШИБКА;
 4078          	} 
 4079          }  /*конец процесса ВЫК_ПИТ_РЕГ_УР */
 4080          
 4081          /*================================================================*/
 4082          /*         Процесс КонтрольСостоянияРегулятораУровня    13 декабря   */
 4083          /*================================================================*/
 4084          ПРОЦ КонтрольСостоянияПитанияРЕГ_УР{
 4085          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_УР,
 4086          							Д_ПИТ_РЕГ_УР,
 4087          							СостояниеПИТ_РЕГ_УР,
 4088          							К_Достоверности;
 4089          	СОСТ Начало {
 4090          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/
 4091          	    ЕСЛИ (Д_ПИТ_РЕГ_УР){
 4092          			ЕСЛИ (К_ПИТ_РЕГ_УР){
 4093          				СостояниеПИТ_РЕГ_УР = ВКЛ;  В СОСТ ВключенСообщаем;
 4094          			}
 4095          			ИНАЧЕ{
 4096          				СостояниеПИТ_РЕГ_УР = ВЫК;  	В СОСТ ВыключенСообщаем;
 4097          			}		
 4098          		}
 4099          	}							
 4100          	СОСТ ВключенСообщаем{ 
 4101          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_УРОВНЯ_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 4102          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4103              }							
 4104              СОСТ ВыключенСообщаем{ 
 4105          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_УРОВНЯ_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 4106          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4107          	}
 4108             СОСТ СменаСостоянияВКЛ{
 4109          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/
 4110          		ЕСЛИ ((!К_ПИТ_РЕГ_УР)&&(Д_ПИТ_РЕГ_УР))  В СОСТ Начало;
 4111          	}
 4112          	СОСТ СменаСостоянияВЫК{
 4113          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/
 4114          		ЕСЛИ ((К_ПИТ_РЕГ_УР) && (Д_ПИТ_РЕГ_УР))  В СОСТ Начало;
 4115          	} 	
 4116          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4117          	СОСТ НарушениеСвязи {
 4118                В СОСТ Начало;
 4119          	}
 4120          }	
 4121          /*========================================================*/
 4122          /*=====   Процесс контроля спонтанного выключения  =====*/
 4123          /*========================================================*/
 4124          ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР{
 4125          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_УР,
 4126          							Д_ПИТ_РЕГ_УР,
 4127          							У_ПИТ_РЕГ_УР,
 4128          							К_Достоверности;
 4129          
 4130          	СОСТ Контроль {
 4131          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/	
 4132          		ЕСЛИ ((К_ПИТ_РЕГ_УР == ВЫК) && (Д_ПИТ_РЕГ_УР))
 4133          		{
 4134          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР;
 4135          			У_ПИТ_РЕГ_УР = ВЫК;
 4136          			В СОСТ Ошибка;
 4137          		}
 4138          	}
 4139          	СОСТ Ошибка {
 4140          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_РЕГУЛЯТОРА_УРОВНЯ)) ОШИБКА;
 4141          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4142          	}
 4143          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 4144          	СОСТ НарушениеСвязи {
 4145          		ОШИБКА;
 4146          	}
 4147          }	
 4148          /*=========================================================*/
 4149          /*=====   Процесс контроля спонтанного включения  =====*/
 4150          /*=========================================================*/
 4151          ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР{
 4152          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_УР,
 4153          							Д_ПИТ_РЕГ_УР,
 4154          							У_ПИТ_РЕГ_УР,
 4155          							К_Достоверности;
 4156          	
 4157          	СОСТ Контроль {
 4158          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/	
 4159          		ЕСЛИ ((К_ПИТ_РЕГ_УР == ВКЛ) && (Д_ПИТ_РЕГ_УР))
 4160          		{
 4161          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР;
 4162          			У_ПИТ_РЕГ_УР = ВКЛ;
 4163          			В СОСТ Ошибка;
 4164          		}
 4165          	}
 4166          	СОСТ Ошибка {
 4167          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_РЕГУЛЯТОРА_УРОВНЯ)) ОШИБКА;
 4168          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4169          	}
 4170          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 4171          	СОСТ НарушениеСвязи {
 4172          		ОШИБКА;
 4173          	}
 4174          }	
 4175          /*================================================================*/
 4176          /*              Процесс Подать питание на насос охлаждения        */
 4177          /*================================================================*/
 4178          ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ{
 4179           ИЗ ПРОЦ Инициализация 	У_ПИТ_НАС_ОХЛ,
 4180          						К_ПИТ_НАСОС_ОХЛ,
 4181          						ФлагГотовУрВодыБО,
 4182          						ФлагГотовТемпВодыБО,
 4183          						Д_ПИТ_НАСОС_ОХЛ,
 4184          						К_Достоверности
 4185          						;
 4186             ЛОГ У_Откат ЛОКАЛ;
 4187             
 4188          
 4189          	СОСТ Начало{
 4190          		У_Откат = У_ПИТ_НАС_ОХЛ;
 4191          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_НАС_ОХЛ В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_НАС_ОХЛ;
 4192          		СТОП ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения;   
 4193          		У_ПИТ_НАС_ОХЛ = ВКЛ;
 4194          		В СЛЕДУЮЩЕЕ;      
 4195          	 }
 4196          	СОСТ Контроль{
 4197          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/	 
 4198          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ == ВКЛ) && (Д_ПИТ_НАСОС_ОХЛ)) {
 4199          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения;
 4200          			СТОП;	
 4201          		} 
 4202          	ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_НАСОС_ОХЛ В СОСТ Ошибка;
 4203          	}    
 4204          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4205          	СОСТ Ошибка {
 4206          		У_ПИТ_НАС_ОХЛ = У_Откат;
 4207          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_НАСОСА_ОХЛАЖДЕНИЯ))	ОШИБКА;
 4208          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4209          	}
 4210          	СОСТ НарушениеСвязи {
 4211          		ОШИБКА;
 4212          	 } 
 4213          } /*конец процесса ВКЛ_ПИТ_НАС_ОХЛАЖДЕНИЯ */
 4214          /*================================================================*/
 4215          /*             Процесс Снять питание с насоса охлаждения          */
 4216          /*================================================================*/
 4217          ПРОЦ ВЫК_ПИТ_НАС_ОХЛ{
 4218           ИЗ ПРОЦ Инициализация 	У_ПИТ_НАС_ОХЛ,
 4219          						К_ПИТ_НАСОС_ОХЛ,
 4220          						Д_ПИТ_НАСОС_ОХЛ,
 4221          						К_Достоверности
 4222          						;
 4223             ЛОГ У_Откат ЛОКАЛ;
 4224             
 4225          	СОСТ Начало{
 4226          		У_Откат = У_ПИТ_НАС_ОХЛ;	
 4227          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;
 4228          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения;
 4229          		У_ПИТ_НАС_ОХЛ = ВЫК;
 4230          		В СЛЕДУЮЩЕЕ;      
 4231          	}
 4232          	СОСТ Контроль{
 4233          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/ 
 4234          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ == ВЫК) && (Д_ПИТ_НАСОС_ОХЛ)) {
 4235          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения;
 4236          			СТОП;	
 4237          		}
 4238          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_НАСОС_ОХЛ В СОСТ Ошибка; 
 4239          	}
 4240          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4241          	СОСТ Ошибка {
 4242          		У_ПИТ_НАС_ОХЛ = У_Откат;
 4243          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_НАСОСА_ОХЛАЖДЕНИЯ))	ОШИБКА;
 4244          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4245          	}
 4246          	СОСТ НарушениеСвязи {
 4247          	   ОШИБКА;
 4248          	} 
 4249          } /*конец процесса ВЫК_ПИТ_НАС_ОХЛАЖДЕНИЯ */
 4250          /*================================================================*/
 4251          /*         Процесс КонтрольСостоянияНасосаОхлаждения     13 декабря  */
 4252          /*================================================================*/
 4253          ПРОЦ КонтрольСостоянияПитанияНАС_ОХЛ{
 4254          	ИЗ ПРОЦ Инициализация 	К_ПИТ_НАСОС_ОХЛ,
 4255          							Д_ПИТ_НАСОС_ОХЛ,
 4256          							СостояниеПИТ_НАСОС_ОХЛ,
 4257          							К_Достоверности;
 4258          	СОСТ Начало {
 4259          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4260          	    ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ){
 4261          			ЕСЛИ (К_ПИТ_НАСОС_ОХЛ){
 4262          				СостояниеПИТ_НАСОС_ОХЛ = ВКЛ;  В СОСТ ВключенСообщаем;
 4263          			}
 4264          			ИНАЧЕ{
 4265          				СостояниеПИТ_НАСОС_ОХЛ = ВЫК;  В СОСТ ВыключенСообщаем;
 4266          			}		
 4267          		}
 4268          	}							
 4269          	СОСТ ВключенСообщаем{ 
 4270          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_НАСОСА_ОХЛАЖДЕНИЯ_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 4271          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4272              }							
 4273              СОСТ ВыключенСообщаем{ 
 4274          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_НАСОСА_ОХЛАЖДЕНИЯ_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 4275          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4276          	}							
 4277             СОСТ СменаСостоянияВКЛ{
 4278          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4279          		ЕСЛИ ((!К_ПИТ_НАСОС_ОХЛ)&&(Д_ПИТ_НАСОС_ОХЛ))  В СОСТ Начало;
 4280          	}
 4281          	СОСТ СменаСостоянияВЫК{
 4282          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4283          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ) && (Д_ПИТ_НАСОС_ОХЛ))  В СОСТ Начало;
 4284          	} 	
 4285          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4286          	СОСТ НарушениеСвязи {
 4287                В СОСТ Начало;
 4288          	}
 4289          }
 4290          /*========================================================*/
 4291          /*=====   Процесс контроля спонтанного выключения  =====*/
 4292          /*========================================================*/
 4293          ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения{
 4294          	ИЗ ПРОЦ Инициализация 	К_ПИТ_НАСОС_ОХЛ,
 4295          							Д_ПИТ_НАСОС_ОХЛ,
 4296          							У_ПИТ_НАС_ОХЛ,
 4297          							К_Достоверности;
 4298          
 4299          	СОСТ Контроль {
 4300          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4301          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ == ВЫК) && (Д_ПИТ_НАСОС_ОХЛ))
 4302          			{
 4303          				СТАРТ ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения;
 4304          				У_ПИТ_НАС_ОХЛ = ВЫК;
 4305          				В СОСТ Ошибка;
 4306          			}
 4307          	}
 4308          	СОСТ Ошибка {
 4309          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_НАСОСА_ОХЛАЖДЕНИЯ)) ОШИБКА;
 4310          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4311          	}
 4312          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 4313          	СОСТ НарушениеСвязи {
 4314          		ОШИБКА;
 4315          	}
 4316          }	
 4317          /*=========================================================*/
 4318          /*=====   Процесс контроля спонтанного включения  =====*/
 4319          /*=========================================================*/
 4320          ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения{
 4321          	ИЗ ПРОЦ Инициализация 	К_ПИТ_НАСОС_ОХЛ,
 4322          							Д_ПИТ_НАСОС_ОХЛ,
 4323          							У_ПИТ_НАС_ОХЛ,
 4324          							К_Достоверности;
 4325          	
 4326          	СОСТ Контроль {
 4327          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4328          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ == ВКЛ) && (Д_ПИТ_НАСОС_ОХЛ)) 
 4329          		{ 
 4330          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения;
 4331          			У_ПИТ_НАС_ОХЛ = ВКЛ;
 4332          			В СОСТ Ошибка;
 4333          		}
 4334          	}
 4335          	СОСТ Ошибка {
 4336          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_НАСОСА_ОХЛАЖДЕНИЯ)) ОШИБКА;
 4337          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4338          	}
 4339              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 4340          	СОСТ НарушениеСвязи {
 4341          		ОШИБКА;
 4342          	}
 4343          }	
 4344          /*=========================================================++++++++++++======*/
 4345          /*==   Процесс  ВКЛЮЧИТЬ Устройство плавного пуска (запуск вакуумирования)   */
 4346          /*== это означает что вакуумного насос начнет работать          			 */
 4347          /*==========================================================++++++++++++=====*/
 4348          ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА{
 4349           ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4350          						У_УСТР_ПЛАВ_ПУСКА,
 4351          						Д_УСТР_ПЛАВ_ПУСКА,
 4352          						К_Достоверности;
 4353             ЛОГ У_Откат ЛОКАЛ;
 4354             
 4355          	СОСТ Начало{
 4356          		У_Откат = У_УСТР_ПЛАВ_ПУСКА;
 4357          		ЕСЛИ (ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА;
 4358          		СТОП ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска;
 4359          		У_УСТР_ПЛАВ_ПУСКА = ВКЛ;
 4360          		В СЛЕДУЮЩЕЕ;      
 4361          	}
 4362          	СОСТ Контроль{
 4363          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/	
 4364          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА == ВКЛ) && (Д_УСТР_ПЛАВ_ПУСКА)) {
 4365          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска;  
 4366          			СТОП;	
 4367          		}
 4368          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_УСТР_ПЛАВ_ПУСКА  	В СОСТ Ошибка;
 4369          	} 
 4370          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4371          	СОСТ Ошибка {
 4372          		У_УСТР_ПЛАВ_ПУСКА = У_Откат;
 4373          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_УСТР_ПЛАВ_ПУСКА))	ОШИБКА;
 4374          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4375          	}
 4376          	СОСТ НарушениеСвязи {
 4377          		ОШИБКА;
 4378          	} 
 4379          }  /*конец процесса ВКЛ_УСТР_ПЛАВ_ПУСКА  */
 4380          /*===============================================================*/
 4381          /*==   Процесс  ВЫКЛЮЧИТЬ Устройство плавного пуска                  */
 4382          /*===============================================================*/
 4383          ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА{
 4384           ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4385          						У_УСТР_ПЛАВ_ПУСКА,
 4386          						Д_УСТР_ПЛАВ_ПУСКА,
 4387          						К_Достоверности;
 4388             ЛОГ У_Откат ЛОКАЛ;
 4389          						
 4390          	СОСТ Начало{
 4391          		У_Откат = У_УСТР_ПЛАВ_ПУСКА;	
 4392          		ЕСЛИ (ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА;
 4393          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска;	
 4394          		У_УСТР_ПЛАВ_ПУСКА = ВЫК;	
 4395          		В СЛЕДУЮЩЕЕ;      
 4396          	}
 4397          	СОСТ КонтрольВыключения{
 4398          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/	
 4399          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА == ВЫК) && (Д_УСТР_ПЛАВ_ПУСКА)) {
 4400          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска;
 4401          			СТОП;	
 4402          		}
 4403          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_УСТР_ПЛАВ_ПУСКА 	В СОСТ Ошибка;
 4404          	}
 4405          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4406          	СОСТ Ошибка {
 4407          		У_УСТР_ПЛАВ_ПУСКА = У_Откат;
 4408          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_УСТР_ПЛАВ_ПУСКА))	ОШИБКА;
 4409          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4410          	}
 4411          	СОСТ НарушениеСвязи {
 4412          		ОШИБКА;
 4413          	} 
 4414          } /*конец процесса ВЫК_УСТР_ПЛАВ_ПУСКА  */
 4415          /*================================================================*/
 4416          /*         Процесс КонтрольСостоянияУстройстваПлавногоПуска   13 декабря   */
 4417          /*================================================================*/
 4418          ПРОЦ КонтрольСостоянияПитанияПЛАВ_ПУСКА{
 4419          	ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4420          							Д_УСТР_ПЛАВ_ПУСКА,
 4421          							СостояниеУСТР_ПЛАВ_ПУСКА,
 4422          							К_Достоверности;
 4423          
 4424          	СОСТ Начало {
 4425          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4426          	    ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА){
 4427          			ЕСЛИ (К_УСТР_ПЛАВ_ПУСКА){
 4428          				СостояниеУСТР_ПЛАВ_ПУСКА = ВКЛ;  В СОСТ ВключенСообщаем;
 4429          			}
 4430          			ИНАЧЕ{
 4431          				СостояниеУСТР_ПЛАВ_ПУСКА = ВЫК;  В СОСТ ВыключенСообщаем;
 4432          			}		
 4433          		}
 4434          	}
 4435          	СОСТ ВключенСообщаем{ 
 4436          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УСТРОЙСТВО_ПЛАВНОГО_ПУСКА_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 4437          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4438              }							
 4439              СОСТ ВыключенСообщаем{ 
 4440          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УСТРОЙСТВО_ПЛАВНОГО_ПУСКА_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 4441          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4442          	}
 4443             СОСТ СменаСостоянияВКЛ{
 4444          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4445          		ЕСЛИ ((!К_УСТР_ПЛАВ_ПУСКА)&&(Д_УСТР_ПЛАВ_ПУСКА))  В СОСТ Начало;
 4446          	}
 4447          	СОСТ СменаСостоянияВЫК{
 4448          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4449          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА) && (Д_УСТР_ПЛАВ_ПУСКА))  В СОСТ Начало;
 4450          	} 
 4451          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4452          	СОСТ НарушениеСвязи {
 4453                В СОСТ Начало;
 4454          	}
 4455          }
 4456          
 4457          /*========================================================*/
 4458          /*=====   Процесс контроля спонтанного выключения  =====*/
 4459          /*========================================================*/
 4460          ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска{
 4461          	ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4462          							Д_УСТР_ПЛАВ_ПУСКА,
 4463          							У_УСТР_ПЛАВ_ПУСКА,
 4464          							К_Достоверности;
 4465          
 4466          	СОСТ Контроль {
 4467          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4468          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА == ВЫК) && (Д_УСТР_ПЛАВ_ПУСКА)) 
 4469          		{	
 4470          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска;
 4471          			У_УСТР_ПЛАВ_ПУСКА = ВЫК;
 4472          			В СОСТ Ошибка;
 4473          		}
 4474          	}
 4475          	СОСТ Ошибка {
 4476          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_УСТРОЙСТВА_ПЛАВНОГО_ПУСКА)) ОШИБКА;
 4477          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4478          	}
 4479          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 4480          	СОСТ НарушениеСвязи {
 4481          		ОШИБКА;
 4482          	}
 4483          }	
 4484          /*=========================================================*/
 4485          /*=====   Процесс контроля спонтанного включения  =====*/
 4486          /*=========================================================*/
 4487          ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска{
 4488          	ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4489          							Д_УСТР_ПЛАВ_ПУСКА,
 4490          							У_УСТР_ПЛАВ_ПУСКА,
 4491          							К_Достоверности;
 4492          	
 4493          	СОСТ Контроль {
 4494          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4495          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА == ВКЛ) && (Д_УСТР_ПЛАВ_ПУСКА)) {
 4496          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска;
 4497          			У_УСТР_ПЛАВ_ПУСКА = ВКЛ;
 4498          			В СОСТ Ошибка;
 4499          		}
 4500          	}
 4501          	СОСТ Ошибка {
 4502          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_УСТРОЙСТВА_ПЛАВНОГО_ПУСКА)) ОШИБКА;
 4503          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4504          	}
 4505              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 4506          	СОСТ НарушениеСвязи {
 4507          		ОШИБКА;
 4508          	}
 4509          }	
 4510          /*====================================================================*/
 4511          /*              Процесс ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ 				      */
 4512          /* Процесс смотрит готовность вакуума, если в норме, то приостанавливается на одну минуту. */
 4513          /* иначе запускает процесс ВКЛ_ВАКУУМНЫЙ_НАСОС, и контролирует   */
 4514          /* глубину откачки вак-ной трубы , как только вакуумирование          */
 4515          /*  достигнет нормы ( нужный вакуум есть) процесс                     */
 4516          /*  через одну минуту снова проверяет давление в вакуумной трубе. Насос вакуумный выключается             */
 4517          /*  Если вакуумирование  не пошло или                                 */
 4518          /*  откачка не на уровне, данный процесс завершается с ошибкой  и     */
 4519          /* насос вакуумный выключается.                                       */
 4520          /*====================================================================*/
 4521          ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ{
 4522           ИЗ ПРОЦ Инициализация 	ФлагГотовВакуумаВТ,
 4523          						ФлагОткачкиТрубыСидеростата,
 4524          						ФлагДавленияКомпрессора,
 4525          						ФП_P_ВтрубеСидер,
 4526          						ФП_T_Врубашке,
 4527          						НП_ЗД_P_ВтрубеСидер,
 4528          						К_ОТКР_ЗАТВОР_ВАК , 
 4529          						К_ЗАКР_ЗАТВОР_ВАК ,
 4530          						К_ШКАФ_ВС_380 ,
 4531          						К_САПУН,
 4532          						К_УСТР_ПЛАВ_ПУСКА,
 4533          						К_ПИТ_УПП_ВАК_НАСОСА ,
 4534          						К_ПИТ_ВЕНТИЛЯТОРА,
 4535          						К_ПИТ_РЕГ_Т,
 4536          						К_ПИТ_РЕГ_УР,
 4537          						К_ПИТ_НАСОС_ОХЛ,
 4538          						НП_ЗД_Гист_P_ВтрубеСидерНиж,
 4539          						НП_ЗД_ПериодаКонтрP_ПриНатекании,
 4540          						НП_ЗД_ПериодаКонтрP_ПриОткачке;
 4541          			
 4542           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 4543          
 4544           СОСТ Начало{
 4545          	ЕСЛИ (ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ  В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ;
 4546          	ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;
 4547          	В СЛЕДУЮЩЕЕ;
 4548           }
 4549           
 4550           СОСТ ПроверкаНеобходимостиВакуумирования{
 4551             ЕСЛИ (ФлагГотовВакуумаВТ == НОРМА) СТОП; /*22 сентября Лях*/ 
 4552             /* В СОСТ ПаузаНаРазвакуумированиеТрубы; */
 4553             ИНАЧЕ {  
 4554          	СТАРТ ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС;    /* в этом процессе */
 4555          	В СЛЕДУЮЩЕЕ;
 4556          	} 
 4557           }
 4558            СОСТ ПередачаСообщения { /* 14 декабря */
 4559          	ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВКЛЮЧЕНО)) В СЛЕДУЮЩЕЕ;
 4560          	ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4561           }
 4562          	СОСТ КонтрольВключенияВакПодсистемы{
 4563          		ЕСЛИ ( ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ){ 
 4564          			ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ ОШИБКА ) {
 4565          				В СОСТ СообщениеОбОтказеВакуумирования; /* !!!!!!!!!!!!????? включение вак. системы не сработало штатно*/ 
 4566          			}
 4567          			ИНАЧЕ
 4568          			{
 4569          				СТАРТ ПРОЦ КонтрольСостоянияОборудования;
 4570          				В СОСТ ЗапоминаемДавлениеВвакуумнойТрубе;
 4571          			}				
 4572          		} 
 4573          	} 
 4574          	СОСТ ЗапоминаемДавлениеВвакуумнойТрубе{
 4575          			ЛП_Предыдущее = ФП_P_ВтрубеСидер;
 4576          			В СЛЕДУЮЩЕЕ;
 4577          	}
 4578          	
 4579          	СОСТ КонтрольДавления{  
 4580          		ЕСЛИ (ФП_P_ВтрубеСидер < (НП_ЗД_P_ВтрубеСидер - НП_ЗД_Гист_P_ВтрубеСидерНиж) )  {  /*достигли нужного давления */
 4581          /*		ЕСЛИ (ФП_P_ВтрубеСидер < (НП_ЗД_P_ВтрубеСидер) ) { */ /*достигли нужного давления */
 4582          			СТОП ПРОЦ КонтрольСостоянияОборудования;
 4583          			СТАРТ ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;   /*222222222*/ 
 4584          			В СЛЕДУЮЩЕЕ;
 4585          		}
 4586          		ИНАЧЕ В СОСТ ПаузаНаОткачкуВвакуумнойТрубе;
 4587          	}
 4588          	
 4589          	СОСТ КонтрольВыключенияВакПодсистемы{
 4590          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ){ 
 4591          			ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ОШИБКА ) {
 4592          				В СОСТ СообщениеПриНеудачномВыкВакНасоса; /* !!!!!!!!!!!! выключение вак. системы не сработало штатно*/ 
 4593          			}
 4594          			ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4595          		} 
 4596          	} 	
 4597          	СОСТ СообщениеОКонцеВакуумирования{
 4598          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВАКУУМИРОВАНИЕ_УСПЕШНО_ЗАВЕРШЕНО)) СТОП; /*22 сентября Лях*/ 
 4599          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ ОШИБКА;
 4600          	}
 4601          	/* данное состояние определяет паузу, после которой надо проверить */
 4602          	/*необходимость вакуумирования */
 4603          /*	СОСТ ПаузаНаРазвакуумированиеТрубы{ */
 4604           /*    ТАЙМАУТ НП_ЗД_ПериодаКонтрP_ПриНатекании В СОСТ ПроверкаНеобходимостиВакуумирования;*/   /*   НП надо сделать ??????? */
 4605          	/* ТАЙМАУТ ПЯТНАДЦАТЬ_МИНУТ В СОСТ ПроверкаНеобходимостиВакуумирования; */
 4606          	/*}*/
 4607          	/* а здесь задерживаемся типа на две минуты, а потом проверяем не достигли мы вакуума*/
 4608          	СОСТ ПаузаНаОткачкуВвакуумнойТрубе{  
 4609          /*		ТАЙМАУТ НП_ЗД_ПериодаКонтрP_ПриОткачке В СЛЕДУЮЩЕЕ;*/
 4610          	ТАЙМАУТ ПЯТЬ_МИНУТ В СЛЕДУЮЩЕЕ;
 4611          	}	
 4612          	СОСТ ПроверкаУменьшенияДавленияВпатрубке{  
 4613          		ЕСЛИ(ФП_P_ВтрубеСидер < ЛП_Предыдущее) В СОСТ ЗапоминаемДавлениеВвакуумнойТрубе;
 4614                  ИНАЧЕ В СОСТ ОткачкаОтсутствует;	
 4615          	} 
 4616          /*====== НЕНОРМАЛЬНЫЕ СИТУАЦИИ =========*/
 4617           СОСТ ОткачкаОтсутствует {
 4618                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_ВАК_ТРУБЕ_НЕ_УМЕНЬШАЕТСЯ))	В СЛЕДУЮЩЕЕ;
 4619                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4620           }
 4621           
 4622           СОСТ СообщениеОбОтказеВакуумирования{
 4623                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ))	В СЛЕДУЮЩЕЕ;
 4624                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 4625           }
 4626          	/*		Сломалось что-то (при включении вак. насоса, например). Пробуем выключить вакуумный насос*/ 
 4627          	/*	 вакуумирование прекращается*/
 4628          	СОСТ ВыключенияВакНасоса{
 4629          		СТАРТ ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;
 4630          		В СЛЕДУЮЩЕЕ;
 4631          	}	
 4632          	СОСТ КонтрольВыключенияВакНасоса{
 4633          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ){ 
 4634          			ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ОШИБКА ) {
 4635          				В СОСТ ВыключениеНаЩиткеКнопарями; /* !!!!!!!!!!!!????? включение вак. системы не сработало штатно*/ 
 4636          			}
 4637          			ИНАЧЕ СТОП;   /* выключилось без ошибок, бежать вниз не надо*/
 4638          		} 
 4639          	} 
 4640          
 4641          	/* Отработка ситуации, когда при выключении вакуумного насоса при вакуумировании ошибка произошла*/
 4642          	СОСТ СообщениеПриНеудачномВыкВакНасоса{
 4643          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ))	В СЛЕДУЮЩЕЕ;
 4644          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 	
 4645          	}
 4646          	
 4647            СОСТ ВыключениеНаЩиткеКнопарями{
 4648              СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 4649              ОШИБКА;
 4650           }
 4651            СОСТ НарушениеСвязи {
 4652          	   ОШИБКА;
 4653          	}
 4654           } /*конец процесса ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ */
 4655          
 4656          
 4657          /*====================================================================*/
 4658          /*              Процесс ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ 				      */
 4659          /*====================================================================*/
 4660          ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ{ /* ! 12 декабря */
 4661           СОСТ Начало{
 4662          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ;  /*в ошибку уходим??? */
 4663          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ АКТИВНОЕ)	ОШИБКА ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС;
 4664          		В СЛЕДУЮЩЕЕ;
 4665          	}
 4666          	
 4667           СОСТ ПередачаОтладочногоСообщения { /* 23 сентября ЛЯХ */
 4668          	ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СТАРТ_ВЫКЛЮЧЕНИЯ_ВАКУУМИРОВАНИЯ_ТРУБЫ)) В СЛЕДУЮЩЕЕ;
 4669          	ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4670           }
 4671           СОСТ АктивенЛиПроцВыключенияВакНасоса{
 4672          		ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ) {
 4673          			СТАРТ ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;
 4674          			В СЛЕДУЮЩЕЕ;
 4675          		}
 4676          		ИНАЧЕ В СЛЕДУЮЩЕЕ;  /*работает процесс выключения*/
 4677           }	
 4678           СОСТ ПроверкаВыключенияВакНасоса{
 4679           		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ){ 
 4680          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ОШИБКА ) {
 4681          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 4682          					ОШИБКА;  /* процесс будет все равно остановлен при откате*/
 4683          				}
 4684          				ИНАЧЕ  В СОСТ ПередачаСообщения;  /* это значит, что нет необходимости останова всех процессов*/
 4685          		}
 4686          	}  
 4687           СОСТ ПередачаСообщения { /* 14 декабря */
 4688          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВЫКЛЮЧЕНО)) СТОП;
 4689          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4690           }
 4691           /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4692           	СОСТ НарушениеСвязи {			/* 14 декабря */
 4693          	   ОШИБКА;
 4694          	}
 4695          }
 4696           
 4697          /*======================================================================*/
 4698          /*              Процесс Включить вакуумный насос                        */
 4699          /*   Этапы включения вакуумного насоса:                                 */ 
 4700          /*   1. Проверяем допустимое давление в компрессоре. Норма - идем дальше */  
 4701          /*   2. Проверяем температуру и уровень воды в баке охлаждения          */ 
 4702          /*      норма - идем дальше   											*/ 
 4703          /*   3. Включаем питание вентилятора                                    */ 
 4704          /*   4. Включаем питание насоса охлаждения                              */  
 4705          /*   5. Закрываем затвор вакуумный                                      */ 
 4706          /*   6. Открываем сапун                                                 */ 
 4707          /*   7. Контролируем температуру воды в рубашке, если норма             */
 4708          /*                                    - идем дальше                     */ 
 4709          /*   8. Включаем питание вакуумного насоса                              */ 
 4710          /*   9. Включаем устройство плавного пуска                              */ 
 4711          /*   10. Выдерживаем одну минуту и закрываем сапун                      */ 
 4712          /*   11. Если ФП_P_ВтрубеСидер >= ФП_P_Впатрубке - открываем затвор     */
 4713          /*       вакуумный. Пошло вакуумирование. Иначе - даем 2 минуты  		*/
 4714          /*		на откачку из патрубка, и      									*/  
 4715          /*       если откачки нет, то                                           */
 4716          /*       и уходим в ошибку .  											*/
 4717          /*======================================================================*/
 4718          ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС{
 4719           ИЗ ПРОЦ Инициализация 	
 4720          						ФП_P_Впатрубке,		
 4721          						ФП_P_ВтрубеСидер,
 4722          						ФлагГотовTВодыРО,
 4723          						ФлагГотовТемпВодыБО,
 4724          						ФлагГотовУрВодыБО,
 4725          						ФП_P_ВбакеКомпрессора,
 4726          						ФП_T_Вбаке,
 4727          						ФлагДавленияКомпрессора;
 4728          					/* установить таймауты и кирдык где возможно зависание */
 4729           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 4730           
 4731          	СОСТ Начало{
 4732          	/* 12 декабря восстановлено !*/
 4733          		ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;  
 4734          		/* нельзя включать насос вакуумный, если давление в компрессоре < 2 атмосфер*/
 4735          		ЕСЛИ (ФлагДавленияКомпрессора != НОРМА) В СОСТ СообщениеОбОтказеВакуумирования;
 4736          		ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4737          	}
 4738          	СОСТ ВключениеПитанияРегУровня{	  
 4739          		СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_УР;
 4740          		В СЛЕДУЮЩЕЕ;
 4741          	}
 4742          	СОСТ КонтрольВключенияПитРегУр{	/*	добавлено 9 декабря	*/
 4743          		ЕСЛИ ( ПРОЦ ВКЛ_ПИТ_РЕГ_УР В СОСТ ПАССИВНОЕ){ 
 4744          				ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_РЕГ_УР В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4745          				ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4746          		}
 4747          	}
 4748          	СОСТ КонтрольГотовностиУровняВодыБО{	/*  14 декабря */
 4749          		ЕСЛИ (ФлагГотовУрВодыБО == НОРМА) В СОСТ ВключениеРегТ;
 4750          		ИНАЧЕ В СОСТ СообщениеОбОтказеВакуумирования;	
 4751          	}
 4752            	
 4753          	СОСТ ВключениеРегТ{ /*	  14 декабря */	
 4754          		СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_Т;   /* питание всегда включено. На всякий случай */
 4755          		В СЛЕДУЮЩЕЕ;			
 4756          	}
 4757          	СОСТ КонтрольВключенияРегТ{	/*	добавлено 11 декабря	*/
 4758          		ЕСЛИ ( ПРОЦ ВКЛ_ПИТ_РЕГ_Т В СОСТ ПАССИВНОЕ){ 
 4759          				ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_РЕГ_Т В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4760          				ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4761          		}
 4762          	}
 4763          	/* за перегревом воды в баке охлаждения следит процесс ПРОЦ КонтрольАварийнойТемпературыВбакеОхлаждения*/
 4764          	
 4765          	СОСТ КонтрольГотовностиТемпературыВодыБО{
 4766          		ЕСЛИ (ФлагГотовТемпВодыБО == НОРМА) В СОСТ ВключаемВентилятор;
 4767          		ИНАЧЕ В СОСТ СообщениеОбОтказеВакуумирования;	/*  14 декабря */
 4768          	}
 4769          	СОСТ ВключаемВентилятор{
 4770          		СТАРТ ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР;
 4771          		В СЛЕДУЮЩЕЕ;
 4772          	}
 4773          	СОСТ КонтрольВключенияВентилятора{
 4774          		ЕСЛИ ( ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР В СОСТ ПАССИВНОЕ){ 
 4775          				ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_ВЕНТИЛЯТОР В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4776          				ИНАЧЕ {
 4777          					СТАРТ ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;   
 4778          					В СОСТ КонтрольВключенияПитанияНасосаОхлаждения;
 4779          				}
 4780          		}
 4781          	}
 4782          	СОСТ КонтрольВключенияПитанияНасосаОхлаждения{
 4783          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ В СОСТ ПАССИВНОЕ){ 
 4784          				ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_НАС_ОХЛ В СОСТ ОШИБКА) В СОСТ СообщениеОбОтказеВакуумирования;
 4785          				ИНАЧЕ {
 4786          					СТАРТ ПРОЦ ЗАКР_ЗАТВОР_ВАК ;
 4787          					В СОСТ КонтрольЗакрытияЗатвораВакуумного;
 4788          				}
 4789          		}
 4790          	}
 4791          	СОСТ КонтрольЗакрытияЗатвораВакуумного{
 4792          		ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ ПАССИВНОЕ){ 
 4793          			ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4794          			ИНАЧЕ {
 4795          				СТАРТ ПРОЦ ОТКР_САПУН;
 4796          				В СОСТ КонтрольОткрытияСапуна;
 4797          			}
 4798          		} 
 4799          	}
 4800          	СОСТ КонтрольОткрытияСапуна{
 4801          		ЕСЛИ ( ПРОЦ ОТКР_САПУН В СОСТ ПАССИВНОЕ){ 
 4802          			ЕСЛИ (ПРОЦ ОТКР_САПУН В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4803          			ИНАЧЕ В СОСТ КонтрольТемпературыРубашки;
 4804          		} 
 4805          	}
 4806          	/* за перегревом и охлаждением воды в рубашке охлаждения следит процесс КонтрольАварийнойТемпературыВрубашкеОхлаждения */
 4807          
 4808          /*ЛЯХ - 25е сентября 2014  - модификация процесса*/
 4809          	СОСТ КонтрольТемпературыРубашки{
 4810          		ЕСЛИ (ФлагГотовTВодыРО == НОРМА) В СЛЕДУЮЩЕЕ;  
 4811          		ИНАЧЕ ЕСЛИ (ФлагГотовTВодыРО == ВЫШЕ_НОРМЫ) В СОСТ СообщениеОбОтказеВакуумирования;
 4812          		ТАЙМАУТ ДЕСЯТЬ_МИНУТ В СОСТ СообщениеОбОтказеВакуумирования;
 4813          	}
 4814          	СОСТ ПодачаПитанияНаУППвакНасоса{
 4815          		СТАРТ ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА;  
 4816          		В СЛЕДУЮЩЕЕ;
 4817          	}	
 4818          	СОСТ КонтрольПодачиПитанияНаУППвакНасоса{
 4819          		ЕСЛИ ( ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА В СОСТ ПАССИВНОЕ){ 
 4820          			ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_УПП_ВАК_НАСОСА В СОСТ ОШИБКА) В СОСТ СообщениеОбОтказеВакуумирования;
 4821          			ИНАЧЕ  В СЛЕДУЮЩЕЕ;
 4822          		} 
 4823          	}
 4824          	СОСТ ВключениеУстройстваПлавногоПуска{
 4825          		СТАРТ ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА;
 4826          		В СЛЕДУЮЩЕЕ;
 4827          	}
 4828          	СОСТ КонтрольВключенияПлавногоПуска{
 4829          		ЕСЛИ (ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА В СОСТ ПАССИВНОЕ){ 
 4830          			ЕСЛИ (ПРОЦ  ВКЛ_УСТР_ПЛАВ_ПУСКА В СОСТ ОШИБКА) В СОСТ СообщениеОбОтказеВакуумирования;
 4831          			ИНАЧЕ  В СЛЕДУЮЩЕЕ;
 4832          		} 
 4833          	} 
 4834          	СОСТ ТаймаутПередЗакрытиемСапуна{  /*насос должен разогнаться*/
 4835           		ТАЙМАУТ ОДНА_МИНУТА  В СЛЕДУЮЩЕЕ; /*19 сентября 2014 года - Лях*/
 4836          	}  
 4837          	СОСТ ЗакрытиеСапуна{  
 4838          		СТАРТ ПРОЦ ЗАКР_САПУН;
 4839          		В СЛЕДУЮЩЕЕ; 
 4840          	} 
 4841          	СОСТ КонтрольЗакрытияСапуна{
 4842          		ЕСЛИ ( ПРОЦ ЗАКР_САПУН В СОСТ ПАССИВНОЕ){ 
 4843          			ЕСЛИ (ПРОЦ ЗАКР_САПУН В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4844          			ИНАЧЕ В СОСТ ЗапоминаемДавлениеВпатрубке;
 4845          		} 
 4846          	}
 4847          	СОСТ ЗапоминаемДавлениеВпатрубке{
 4848          			ЛП_Предыдущее = ФП_P_Впатрубке;
 4849          			В СЛЕДУЮЩЕЕ;
 4850          	}
 4851          	СОСТ КонтрольДавления{  
 4852          		ЕСЛИ (ФП_P_Впатрубке <= ФП_P_ВтрубеСидер) {
 4853          			СТАРТ ПРОЦ ОТКР_ЗАТВОР_ВАК; 
 4854          			В СОСТ КонтрольОткрытияЗВ;
 4855          		}
 4856          		ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4857          	} 
 4858          
 4859          	СОСТ ПаузаНаОткачкуВпатрубке{  
 4860          /*		ТАЙМАУТ ДВЕ_МИНУТЫ В СЛЕДУЮЩЕЕ;  */ /*????? М.Б. меньше надо сделать*/
 4861          		ТАЙМАУТ ТРИ_СЕКУНДЫ В СЛЕДУЮЩЕЕ; 
 4862          	}  
 4863          	СОСТ ПроверкаУменьшенияДавленияВпатрубке{  
 4864          		ЕСЛИ(ФП_P_Впатрубке < ЛП_Предыдущее) В СОСТ ЗапоминаемДавлениеВпатрубке;
 4865                  ИНАЧЕ В СОСТ НетОткачки;
 4866          	} 	
 4867          	СОСТ КонтрольОткрытияЗВ{
 4868          		ЕСЛИ ( ПРОЦ ОТКР_ЗАТВОР_ВАК В СОСТ ПАССИВНОЕ){ 
 4869          			ЕСЛИ (ПРОЦ ОТКР_ЗАТВОР_ВАК В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4870          			ИНАЧЕ { 
 4871          				/* Лях 24 сентября 2014 */	
 4872          				/* СТАРТ ПРОЦ КонтрольВеличиныОткачкиВауумнойТрубыСидеростата; */
 4873          				СТОП;
 4874          			}
 4875          		} 
 4876          	}
 4877              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4878           СОСТ НетОткачки {
 4879                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_ПАТРУБКЕ_НЕ_УМЕНЬШАЕТСЯ))	В СЛЕДУЮЩЕЕ;
 4880                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4881           }
 4882           СОСТ СообщениеОбОтказеВакуумирования{
 4883                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ВАКУУМНОЙ_ПОДСИСТЕМЫ))	ОШИБКА;
 4884                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 4885           } 
 4886           СОСТ НарушениеСвязи {
 4887          	   ОШИБКА;
 4888           }    
 4889          }
 4890          /*================================================================*/
 4891          /*          Процесс Выключить вакуумную подсистему                */
 4892          /*   Этапы выключения вакуумного насоса:                          */
 4893          /*    1. Закрывается затвор вакуумный                             */
 4894          /*    2. Открывается сапун                                        */
 4895          /*    3. Ничего не делаем 20 секунд                               */
 4896          /*    4. Выключаем устройство плавного пуска                      */
 4897          /*    5. Выключаем питание вакуумного насоса                      */
 4898          /*    6. Выключаем питание насоса охлаждения                      */
 4899          /*    7. Выключаем питание вентилятора                            */
 4900          /*================================================================*/
 4901          ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС{
 4902           ЛОГ ФлагОшибки ЛОКАЛ;
 4903           
 4904          	СОСТ Начало{
 4905          		ФлагОшибки = 0;   /* пока ошибок нет*/
 4906          
 4907          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС;
 4908          		/* ! 12 декабря */ /* ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ;  /*в ошибку уходим??? и кранты*/
 4909           		СТАРТ ПРОЦ ЗАКР_ЗАТВОР_ВАК;
 4910          		СТОП ПРОЦ КонтрольВеличиныОткачкиВауумнойТрубыСидеростата;
 4911          		В СЛЕДУЮЩЕЕ;
 4912          	}  
 4913          	СОСТ ПередачаОтладочногоСообщения { /* 23 сентября ЛЯХ */
 4914          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СТАРТ_ВЫКЛЮЧЕНИЯ_ВАКУУМНОГО_НАСОСА)) В СЛЕДУЮЩЕЕ;
 4915          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4916          	}
 4917          	СОСТ КонтрольЗакрытияЗатвораВакуумного{
 4918          		ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ ПАССИВНОЕ){ 
 4919          			ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ ОШИБКА ) {
 4920          			/*	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;  */
 4921          				В СОСТ СообщениеОбОтказеВыклВакСистемы;
 4922          			}
 4923          			ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4924          		} 
 4925          	} 	
 4926          	СОСТ ОткрытьСапун{
 4927          		СТАРТ ПРОЦ ОТКР_САПУН;
 4928          		В СЛЕДУЮЩЕЕ;
 4929          	}	
 4930          	СОСТ КонтрольОткрытияСапуна{
 4931          		ЕСЛИ (ПРОЦ ОТКР_САПУН В СОСТ ПАССИВНОЕ){ 
 4932          			ЕСЛИ (ПРОЦ ОТКР_САПУН В СОСТ ОШИБКА ) {
 4933          				ФлагОшибки = 1;
 4934          				В СОСТ ВыключаемУстройствоПлавногоПуска;
 4935          			}
 4936          			ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4937          		} 
 4938          	} 	
 4939          	СОСТ ТаймаутПередВыключениемПитанияВакуумногоНасоса{  
 4940          		ТАЙМАУТ ДВАДЦАТЬ_СЕКУНД В СЛЕДУЮЩЕЕ; 
 4941          	}
 4942          	СОСТ ВыключаемУстройствоПлавногоПуска{  
 4943          		СТАРТ ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА; В СЛЕДУЮЩЕЕ; 
 4944          	}
 4945          	СОСТ КонтрольВыключенияПлавногоПуска{  
 4946          		ЕСЛИ (ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА В СОСТ ПАССИВНОЕ){ 
 4947          			ЕСЛИ (ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА В СОСТ ОШИБКА ) 	ФлагОшибки = 1;
 4948          			В СОСТ ВыключаемПитаниеПлавногоПуска;
 4949          		}		 
 4950          	}
 4951          	СОСТ ВыключаемПитаниеПлавногоПуска{  
 4952          		СТАРТ ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА; В СЛЕДУЮЩЕЕ; 
 4953          	}
 4954          
 4955          	СОСТ КонтрольВыключенияПитанияПлавногоПуска{  
 4956          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА В СОСТ ПАССИВНОЕ){ 
 4957          			ЕСЛИ (ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА В СОСТ ОШИБКА ) 	ФлагОшибки = 1;
 4958          			В СОСТ ВыключаемПитаниеНасосаОхлаждения;
 4959          		}		 
 4960          	}
 4961          	СОСТ ВыключаемПитаниеНасосаОхлаждения{  
 4962          		СТАРТ ПРОЦ ВЫК_ПИТ_НАС_ОХЛ; В СЛЕДУЮЩЕЕ; 
 4963          	}
 4964          	СОСТ КонтрольВыключенияНасосаОхлаждения{  
 4965          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_НАС_ОХЛ В СОСТ ПАССИВНОЕ){ 
 4966          			ЕСЛИ (ПРОЦ ВЫК_ПИТ_НАС_ОХЛ В СОСТ ОШИБКА ) 	ФлагОшибки = 1;
 4967          			В СОСТ ВыключаемВентилятор;
 4968          		}		 
 4969          	}
 4970          	СОСТ ВыключаемВентилятор{  
 4971          		СТАРТ ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР; В СЛЕДУЮЩЕЕ; 
 4972          	}
 4973          	СОСТ КонтрольВыключенияВентилятора{  
 4974          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР В СОСТ ПАССИВНОЕ){ 
 4975          			ЕСЛИ (ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР В СОСТ ОШИБКА ) 	ФлагОшибки = 1;
 4976          			В СЛЕДУЮЩЕЕ;
 4977          		}		 
 4978          	}	
 4979          	СОСТ АнализПризнакаОшибки{ 
 4980          		ЕСЛИ (ФлагОшибки == 1) В СОСТ СообщениеОбОтказеВыклВакСистемы;  /* ошибки есть */
 4981          		ИНАЧЕ СТОП;
 4982          	}
 4983          
 4984            /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4985          	СОСТ СообщениеОбОтказеВыклВакСистемы{
 4986          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ВАКУУМНОЙ_ПОДСИСТЕМЫ))	ОШИБКА;
 4987          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 4988          	} 
 4989          	СОСТ НарушениеСвязи {
 4990          		ОШИБКА;
 4991          	}  
 4992          	
 4993          } /*конец процесса ВЫК_ВАКУУМНЫЙ_НАСОС */
 4994          
 4995          
 4996           
 4997          }  /* \КОНЕЦ Прогр */

%RCSL-I-SUMMARY, Completed with 0 error(s).
%RCSL-I-SUMMARY, Completed with 0 warning(s).

 %RCSL-I-SUMMARY, Completed with 0 error(s).