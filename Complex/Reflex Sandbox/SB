              Прогр БлокУправлениСценариями {
/* Стенд #1 Автоматизированная электросушилка
Внимание! Период активизации гиперпроцесса равен 100 миллисекундам */

КОНСТ ВКЛ                1;
КОНСТ ВЫКЛ               0;
КОНСТ ВремяНаОтклик		1000;

 
/*Набор команд для ВОУ*/
 ПЕРЕЧИСЛЕНИЕ
 {
	БУС2ВОУ_ПОМЕСТИТЬ_РУКИ,
	БУС2ВОУ_УБРАТЬ_РУКИ,
	БУС2ВОУ_СЛОМАТЬ_СУШИЛКУ,
	БУС2ВОУ_СУШИЛКА_РАБОТАЕТ
 }
 
 /*Набор команд для АУ*/
 ПЕРЕЧИСЛЕНИЕ 
{
	БУС2АУ_В_РУЧНОЕ_УПРАВЛЕНИЕ,
	БУС2АУ_ОТКЛЮЧИТЬ_РУЧНОЕ_УПРАВЛЕНИЕ,
	БУС2АУ_ВКЛЮЧИТЬ_СУШИЛКУ,
	БУС2АУ_ВЫКЛЮЧИТЬ_СУШИЛКУ
};

 /*Набор команд для БВ*/
  ПЕРЕЧИСЛЕНИЕ 
{
	БУС2БВ_РУЧНОЕ_УПРАВЛЕНИЕ_ВКЛЮЧЕНИЕ,
	БУС2БВ_РУЧНОЕ_УПРАВЛЕНИЕ_ВЫКЛЮЧЕНИЕ,
	БУС2БВ_АВТОМАТИЧЕСКОЕ_УПРАВЛЕНИЕ_РУКИ_ПОМЕЩЕНЫ,
	БУС2БВ_АВТОМАТИЧЕСКОЕ_УПРАВЛЕНИЕ_РУКИ_УБРАНЫ,
	БУС2БВ_КОНЕЦ_ШТАНОГО_РЕЖИМА	
};

ПЕРЕЧИСЛЕНИЕ
{
	БУС2БВ_НЕИСПРАВНОСТЬ_РУЧНОЕ_УПРАВЛЕНИЕ_ВКЛЮЧЕНИЕ = БУС2БВ_КОНЕЦ_ШТАНОГО_РЕЖИМА + 1,
	БУС2БВ_НЕИСПРАВНОСТЬ_РУЧНОЕ_УПРАВЛЕНИЕ_ВЫКЛЮЧЕНИЕ,
	БУС2БВ_НЕИСПРАВНОСТЬ_АВТОМАТИЧЕСКОЕ_УПРАВЛЕНИЕ_РУКИ_ПОМЕЩЕНЫ,
	БУС2БВ_НЕИСПРАВНОСТЬ_НЕИСПРАВНОСТЬ_АВТОМАТИЧЕСКОЕ_УПРАВЛЕНИЕ_РУКИ_УБРАНЫ,
};


ПРОЦ Инициализация{

/* ВХОДНЫЕ СИГНАЛЫ: */
 ЛОГ К_РУКИ_ПОД_СУШИЛКОЙ    = {ЛОГ_ВЫХОДЫ1[1]} ДЛЯ ВСЕХ;


/* ВЫХОДНЫЕ СИГНАЛЫ (т.к. привязаны к модулю выходов): */ 
 ЛОГ У_ВКЛ_СУШИЛКУ = {ЛОГ_ВХОДЫ1[1]} ДЛЯ ВСЕХ;

 
/*########  СОСТОЯНИЯ ПРОЦЕССА  #########*/
 СОСТ Начало{  /* NB: 1-е f-сост. 1-го проц. - активно по включению питания */
 	SendMessageToVirtualPlant(БУС2ВОУ_ПОМЕСТИТЬ_РУКИ);
	SendMessageToVerificationBlock(БУС2БВ_АВТОМАТИЧЕСКОЕ_УПРАВЛЕНИЕ_РУКИ_ПОМЕЩЕНЫ);
	В СЛЕДУЮЩЕЕ;
 }
 СОСТ Ожидание1
 {
	ТАЙМАУТ ВремяНаОтклик В СЛЕДУЮЩЕЕ;
 }
 СОСТ ПроверкаОтключения
 {
	SendMessageToVirtualPlant(БУС2ВОУ_УБРАТЬ_РУКИ);

	SendMessageToVerificationBlock(БУС2БВ_АВТОМАТИЧЕСКОЕ_УПРАВЛЕНИЕ_РУКИ_УБРАНЫ);
	В СЛЕДУЮЩЕЕ;
 }
  СОСТ Ожидание2
 {
	ТАЙМАУТ ВремяНаОтклик В СЛЕДУЮЩЕЕ;
 }
 СОСТ ВРучнойРежим
 {
	SendMessageToControlAlgorythm(БУС2АУ_В_РУЧНОЕ_УПРАВЛЕНИЕ);
	SendMessageToControlAlgorythm(БУС2АУ_ВКЛЮЧИТЬ_СУШИЛКУ);
	SendMessageToVerificationBlock(БУС2БВ_РУЧНОЕ_УПРАВЛЕНИЕ_ВКЛЮЧЕНИЕ);
	В СЛЕДУЮЩЕЕ;
 }
  СОСТ Ожидание3
 {
	ТАЙМАУТ ВремяНаОтклик В СЛЕДУЮЩЕЕ;
 }
 СОСТ ЛомаемСушилку
 {
	SendMessageToVirtualPlant(БУС2ВОУ_СЛОМАТЬ_СУШИЛКУ);
	SendMessageToControlAlgorythm(БУС2АУ_ВЫКЛЮЧИТЬ_СУШИЛКУ);
	SendMessageToVerificationBlock(БУС2БВ_НЕИСПРАВНОСТЬ_РУЧНОЕ_УПРАВЛЕНИЕ_ВЫКЛЮЧЕНИЕ);
	В СЛЕДУЮЩЕЕ;
 }
  СОСТ Ожидание4
 {
	ТАЙМАУТ ВремяНаОтклик СТОП;
 }
} /* \ПРОЦ */



}  /* \Прогр */



