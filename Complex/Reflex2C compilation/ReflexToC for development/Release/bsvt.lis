    1                                  Прогр sapun { 
    2          
    3          
    4          /*###########################################################*/
    5          /*#########                     #############################*/
    6          /*#########  ОПИСАНИЕ КОНСТАНТ  #############################*/
    7          /*#########                     #############################*/
    8          /*###########################################################*/
    9          /* ?????????????? Таймауты взяты с потолка */
   10          ТАКТ     50;    /* такт равен 500 миллисекундам */
   11          КОНСТ Т0_1                       0;  /* Константа обеспечивающая паузу в 0.5 сек */
   12          КОНСТ ОДНА_СЕКУНДА               10;  /* Константа обеспечивающая паузу в 1 сек */
   13          КОНСТ ДВЕ_СЕКУНДЫ             2*ОДНА_СЕКУНДА;
   14          КОНСТ ТРИ_СЕКУНДЫ             3*ОДНА_СЕКУНДА;
   15          КОНСТ ТАЙМАУТ_НА_ДОСТОВЕРНОСТЬ ДВЕ_СЕКУНДЫ;
   16          КОНСТ ПЯТЬ_СЕКУНД             5*ОДНА_СЕКУНДА;
   17          КОНСТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ ПЯТЬ_СЕКУНД;
   18          
   19          КОНСТ ДЕСЯТЬ_СЕКУНД          10*ОДНА_СЕКУНДА;
   20          КОНСТ ДВАДЦАТЬ_СЕКУНД        20*ОДНА_СЕКУНДА;
   21          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ЗАТ_ВАК			ПЯТЬ_СЕКУНД;	/* изменено 9 декабря*/
   22          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_САПУНА           	ТРИ_СЕКУНДЫ;   /* изменено 9 декабря*/
   23          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_УСТР_ПЛАВ_ПУСКА   3*ОДНА_СЕКУНДА;
   24          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВАК_НАСОСА 		3*ОДНА_СЕКУНДА;
   25          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВЕНТИЛЯТОРА		ПЯТЬ_СЕКУНД;
   26          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_Т				3*ОДНА_СЕКУНДА;
   27          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_УР			3*ОДНА_СЕКУНДА;
   28          КОНСТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_НАСОС_ОХЛ			3*ОДНА_СЕКУНДА;
   29          КОНСТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ  ДЕСЯТЬ_СЕКУНД;
   30          КОНСТ ОДНА_МИНУТА          60*ОДНА_СЕКУНДА;
   31          КОНСТ ДВЕ_МИНУТЫ          2*ОДНА_МИНУТА;
   32          КОНСТ ПЯТЬ_МИНУТ          5*60*ОДНА_СЕКУНДА;
   33          КОНСТ ДЕСЯТЬ_МИНУТ			10*ОДНА_МИНУТА;
   34          /* КОНСТ ТАЙМАУТ_ВАКУУМИРОВАНИЯ_ТРУБЫ  30*ОДНА_МИНУТА;*/
   35          КОНСТ ТРИДЦАТЬ_МИНУТ          30*ОДНА_МИНУТА;
   36          КОНСТ ПЯТНАДЦАТЬ_МИНУТ          15*ОДНА_МИНУТА;
   37          КОНСТ ТАЙМАУТ_ЗАДЕРЖКА_НА_ОТКАЧКУ ДЕСЯТЬ_СЕКУНД;
   38          
   39          КОНСТ ВКЛ                1;
   40          КОНСТ ВЫК               0;
   41          КОНСТ ОТКР              1;
   42          КОНСТ ЗАКР          	0;
   43          КОНСТ ЕСТЬ               1;
   44          КОНСТ НЕТ                0;
   45          КОНСТ НИЖЕ_НОРМЫ		0;
   46          КОНСТ НОРМА              1;
   47          КОНСТ ВЫШЕ_НОРМЫ		2;
   48          КОНСТ ВНЕ_НОРМЫ			0;
   49          КОНСТ ДОСТОВЕРНО                1;
   50          КОНСТ НЕДОСТОВЕРНО               0;
   51          КОНСТ Не_проверяются       0;  /*   доб.16 января 2014*/
   52          КОНСТ Проверяются      1;
   53          
   54          КОНСТ ТАЙМАУТ_НА_ДИАГНОСТИКУ_РАЗРЫВА_СВЯЗИ 5*ОДНА_СЕКУНДА;
   55          
   56          КОНСТ Т_ПредельнаяВрубашкеОхлаждения          85.0; 
   57          КОНСТ Т_ПредельнаяВбакеОхлаждения          65.0; 
   58          
   59          /*===========================================================*/
   60          /*=== КОДЫ СООБЩЕНИЙ ПРОЦЕССОВ КОНТРОЛЯ                     =*/
   61          /*===========================================================*/
   62          ПЕРЕЧИСЛЕНИЕ {
   63              ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКИЙ,
   64              ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКИЙ,
   65          	ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ,
   66          	ПК_ГУИ_ОТКАЗ_ДАТЧИКОВ_УРОВНЯ,  
   67          	
   68          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКАЯ,
   69          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКАЯ,
   70          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ,
   71          
   72              ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_НИЗКАЯ,
   73          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_ВЫСОКАЯ,
   74          	ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ,
   75          
   76          	ПК_ГУИ_ДАВЛЕНИЕ_В_ВАКУУМНОЙ_ТРУБЕ_В_НОРМЕ,
   77          	ПК_ГУИ_ДАВЛЕНИЕ_В_ВАКУУМНОЙ_ТРУБЕ_ВНЕ_НОРМЫ,
   78          	
   79          	ПК_ГУИ_СКОРОСТЬ_ОТКАЧКИ_В_НОРМЕ,
   80          	ПК_ГУИ_СКОРОСТЬ_ОТКАЧКИ_НИЖЕ_НОРМЫ, /*  ????может заменить на нет откачки??? */
   81          
   82          		
   83          	ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_В_НОРМЕ,
   84          	ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_ВЫШЕ_НОРМЫ,  /* 6 декабря  */
   85              ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_НИЖЕ_НОРМЫ,
   86          	
   87          	/* 23 сентября 2014 Лях */
   88          	ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ_ОТКАЗ_ОБОРУДОВАНИЯ,
   89          	ПК_ГУИ_СТАРТ_ВЫКЛЮЧЕНИЯ_ВАКУУМИРОВАНИЯ_ТРУБЫ,
   90          	ПК_ГУИ_СТАРТ_ВЫКЛЮЧЕНИЯ_ВАКУУМНОГО_НАСОСА
   91          	
   92          };
   93          /*===========================================================*/
   94          /*========= КОМАНДЫ ОПЕРАТОРА =============15================*/
   95          /*===========================================================*/
   96          ПЕРЕЧИСЛЕНИЕ {
   97               КОМ_ГУИ_ОТКР_ЗАТВОР_ВАК= ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_НИЖЕ_НОРМЫ + 1,
   98               КОМ_ГУИ_ЗАКР_ЗАТВОР_ВАК    	,
   99               КОМ_ГУИ_ОТКР_САПУН			    ,
  100               КОМ_ГУИ_ЗАКР_САПУН			    ,
  101               КОМ_ГУИ_ВКЛ_УСТР_ПЛАВ_ПУСКА    ,
  102               КОМ_ГУИ_ВЫК_УСТР_ПЛАВ_ПУСКА    ,
  103          /*	 КОМ_ГУИ_ВКЛ_ПИТ_ВАК_НАСОСА     ,  */ /*  меняем на*/
  104           	 КОМ_ГУИ_ВКЛ_ПИТ_УПП_ВАК_НАСОСА     ,
  105          	 КОМ_ГУИ_ВЫК_ПИТ_УПП_ВАК_НАСОСА     ,
  106          	 КОМ_ГУИ_ВКЛ_ПИТ_ВЕНТИЛЯТОР    ,
  107          	 КОМ_ГУИ_ВЫК_ПИТ_ВЕНТИЛЯТОР    ,
  108               КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_Т    ,
  109          	 КОМ_ГУИ_ВЫК_ПИТ_РЕГ_Т    ,
  110               КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_УР     ,
  111          	 КОМ_ГУИ_ВЫК_ПИТ_РЕГ_УР     , 
  112          	 КОМ_ГУИ_ВКЛ_ПИТ_НАС_ОХЛ ,
  113          	 КОМ_ГУИ_ВЫК_ПИТ_НАС_ОХЛ    , 
  114          	 КОМ_ГУИ_ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ,
  115          	 КОМ_ГУИ_ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ, /*14 декабря	*/
  116          	 КОМ_ГУИ_ВКЛ_ВАКУУМНЫЙ_НАСОС ,/*  у нас  нет этой кнопки ?????	*/
  117          /*	 КОМ_ГУИ_ВЫК_ВАКУУМНЫЙ_НАСОС,  */   /*  14 декабря */
  118               КОМАНДЫ_ОТ_ГУИ = КОМ_ГУИ_ВКЛ_ВАКУУМНЫЙ_НАСОС 
  119          	
  120          };
  121          
  122          
  123          /*===========================================================*/
  124          /*========= КОМАНДЫ ИЗМЕНЕНИЯ ФАКТИЧЕСКИХ ПАРАМЕТРОВ ========*/
  125          /*===========================================================*/
  126          
  127          
  128          ПЕРЕЧИСЛЕНИЕ {
  129          	ИЗМН_ФП_P_ВбакеКомпрессора = КОМАНДЫ_ОТ_ГУИ + 1,
  130          	ИЗМН_ФП_P_Впатрубке,
  131          	ИЗМН_ФП_T_Врубашке,	
  132          	ИЗМН_ФП_T_Вбаке,	
  133              ИЗМН_ФП_P_ВтрубеСидер,
  134              КОМАНДЫ_ИЗМ_ФП = ИЗМН_ФП_P_ВтрубеСидер  /*  42 */
  135          };
  136          
  137          /*===========================================================*/
  138          /*===========================================================*/
  139          /*============= КОДЫ СООБЩЕНИЙ ВАКУУМНОЙ СИСТЕМЫ ============*/
  140          /*===========================================================*/
  141          /*===========================================================*/
  142          ПЕРЕЧИСЛЕНИЕ {                    
  143                ПК_ГУИ_ОТКАЗ_ОТКРЫТИЯ_ЗАТВОРА_ВАКУУМНОГО = КОМАНДЫ_ИЗМ_ФП + 1,
  144                ПК_ГУИ_ОТКАЗ_ЗАКРЫТИЯ_ЗАТВОРА_ВАКУУМНОГО,
  145                ПК_ГУИ_ОТКАЗ_ОТКРЫТИЯ_САПУНА,
  146                ПК_ГУИ_ОТКАЗ_ЗАКРЫТИЯ_САПУНА,
  147          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ВЕНТИЛЯТОРА,
  148          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ВЕНТИЛЯТОРА,
  149          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_УСТР_ПЛАВ_ПУСКА,
  150          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_УСТР_ПЛАВ_ПУСКА,
  151          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ,
  152          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ,
  153          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_РЕГУЛЯТОРА_УРОВНЯ,
  154          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_РЕГУЛЯТОРА_УРОВНЯ,
  155          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_НАСОСА_ОХЛАЖДЕНИЯ,
  156          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_НАСОСА_ОХЛАЖДЕНИЯ,
  157          	  ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ,
  158          	  ПК_ГУИ_НЕТ_УСЛОВИЙ_ДЛЯ_ВЫПОЛНЕНИЯ_КОМАНДЫ,
  159          	  ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВНЕ_НОРМЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ, 				
  160          	  ПК_ГУИ_ОТРИЦАТЕЛЬНАЯ_ТЕМПЕРАТУРА_ВОДЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ,
  161          	  ПК_ГУИ_ДАВЛЕНИЕ_В_ПАТРУБКЕ_НЕ_УМЕНЬШАЕТСЯ,
  162          	  ПК_ГУИ_ДАВЛЕНИЕ_В_ВАК_ТРУБЕ_НЕ_УМЕНЬШАЕТСЯ,
  163          	  ПК_ГУИ_ВАКУУМИРОВАНИЕ_УСПЕШНО_ЗАВЕРШЕНО,	  
  164          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ПИТАНИЯ_УПП_ВАКУУМНОГО_НАСОСА,   
  165          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ПИТАНИЯ_УПП_ВАКУУМНОГО_НАСОСА,  
  166          	  ПК_ГУИ_НЕДОСТОВЕРНЫЕ_ДАННЫЕ_ОБОРУДОВАНИЯ_ВАК_СИСТЕМЫ,
  167          	  
  168          
  169          		ПК_ГУИ_АВАРИЯ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_МЕНЬШЕ_2х_АТМОСФЕР, /* 18 августа 2014 */
  170          		ПК_ГУИ_АВАРИЯ__СРОЧНО_ВЫКЛЮЧИТЬ_ВАК_СИСТЕМУ_В_РУЧНОМ_РЕЖИМЕ,	/* 18 августа 2014 */
  171          		ПК_ГУИ_АВАРИЯ_ПЕРЕГРЕВ_РУБАШКИ_ОХЛАЖДЕНИЯ,				/* 21 августа 2014 */
  172          		ПК_ГУИ_АВАРИЯ_ПЕРЕГРЕВ_БАКА_ОХЛАЖДЕНИЯ_НАСОСА,					/* 18 августа 2014 */
  173          		
  174          
  175          	  ПК_ГУИ_РЕСТАРТ_НЕДОСТОВЕРНЫЕ_ДАННЫЕ_ОБОРУДОВАНИЯ_ВАК_СИСТЕМЫ, /* добавить в гуи 28 января 2014 */
  176          	  ПК_ГУИ_ЕСТЬ_ПИТАНИЕ_ШКАФА_ВС_380,	/* добавить в гуи 27 января 2014 */
  177          	  ПК_ГУИ_НЕТ_ПИТАНИЕ_ШКАФА_ВС_380,	/* добавить в гуи 27 января 2014 */
  178          	  ПК_ГУИ_ВЕНТИЛЯТОР_ВКЛЮЧЕН,
  179          	  ПК_ГУИ_ВЕНТИЛЯТОР_ВЫКЛЮЧЕН,
  180          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_ВЕНТИЛЯТОРА,
  181          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_ВЕНТИЛЯТОРА,
  182          	  ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ОТКРЫТ,
  183          	  ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ЗАКРЫТ,
  184          	  ПК_ГУИ_СРЕДНЕЕ_СОСТОЯНИЕ_ЗАТВОРА_ВАКУУМНОГО,
  185          	  ПК_ГУИ_СОСТОЯНИЕ_ОШИБКИ_ЗАТВОРА_ВАКУУМНОГО,
  186          	  ПК_ГУИ_СПОНТАННОЕ_ОТКРЫТИЕ_ЗАТ_ВАКУУМНОГО,
  187          	  ПК_ГУИ_СПОНТАННОЕ_ЗАКРЫТИЕ_ЗАТ_ВАКУУМНОГО,
  188          	  ПК_ГУИ_САПУН_ОТКРЫТ,
  189          	  ПК_ГУИ_САПУН_ЗАКРЫТ,
  190          	  ПК_ГУИ_СПОНТАННОЕ_ОТКРЫТИЕ_САПУНА,
  191          	  ПК_ГУИ_СПОНТАННОЕ_ЗАКРЫТИЕ_САПУНА,
  192          	  ПК_ГУИ_ПИТАНИЕ_УПП_ВАКУУМНОГО_НАСОСА_ВКЛЮЧЕНО,  /* беда*/
  193          	  ПК_ГУИ_ПИТАНИЕ_УПП_ВАКУУМНОГО_НАСОСА_ВЫКЛЮЧЕНО,  /* беда*/
  194          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_УПП_ВАКУУМНОГО_НАСОСА,
  195          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_УПП_ВАКУУМНОГО_НАСОСА,
  196          	  ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ_ВКЛЮЧЕНО,
  197          	  ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ_ВЫКЛЮЧЕНО,
  198            	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ,
  199          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ,
  200          	  ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_УРОВНЯ_ВКЛЮЧЕНО,
  201          	  ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_УРОВНЯ_ВЫКЛЮЧЕНО,
  202          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_РЕГУЛЯТОРА_УРОВНЯ,
  203          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_РЕГУЛЯТОРА_УРОВНЯ,
  204          	  ПК_ГУИ_ПИТАНИЕ_НАСОСА_ОХЛАЖДЕНИЯ_ВКЛЮЧЕНО,
  205          	  ПК_ГУИ_ПИТАНИЕ_НАСОСА_ОХЛАЖДЕНИЯ_ВЫКЛЮЧЕНО,
  206          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_НАСОСА_ОХЛАЖДЕНИЯ,
  207          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_НАСОСА_ОХЛАЖДЕНИЯ,
  208          	  ПК_ГУИ_УСТРОЙСТВО_ПЛАВНОГО_ПУСКА_ВКЛЮЧЕНО,
  209          	  ПК_ГУИ_УСТРОЙСТВО_ПЛАВНОГО_ПУСКА_ВЫКЛЮЧЕНО,
  210          	  ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_УСТРОЙСТВА_ПЛАВНОГО_ПУСКА,
  211          	  ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_УСТРОЙСТВА_ПЛАВНОГО_ПУСКА,
  212          	  ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ,
  213          	  ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ВАКУУМНОЙ_ПОДСИСТЕМЫ,
  214          	  ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ВАКУУМНОЙ_ПОДСИСТЕМЫ,
  215          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_КОНЦ_ОТКРЫТИЯ_ЗАТВ_ВАКУУМНОГО,
  216                ПК_ГУИ_НЕТ_СВЯЗИ_С_КОНЦ_ОТКРЫТИЯ_ЗАТВ_ВАКУУМНОГО,
  217          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_КОНЦ_ЗАКРЫТИЯ_ЗАТВ_ВАКУУМНОГО,
  218          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_КОНЦ_ЗАКРЫТИЯ_ЗАТВ_ВАКУУМНОГО,
  219                ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_САПУНОМ,
  220          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_САПУНОМ,
  221          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПЛАВНЫМ_ПУСКОМ,
  222          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ПЛАВНЫМ_ПУСКОМ,
  223          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПИТАНИЕМ_ВАК_НАСОСА, 
  224          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ПИТАНИЕМ_ВАК_НАСОСА,	
  225          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ВЕНТИЛЯТОРОМ,
  226          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ВЕНТИЛЯТОРОМ,
  227          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_РЕГ_ТЕМПЕРАТУРЫ,  
  228          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_РЕГ_ТЕМПЕРАТУРЫ,
  229          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_РЕГ_УРОВНЯ,
  230          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_РЕГ_УРОВНЯ,
  231          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_НИЖНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ,
  232          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_НИЖНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ,
  233          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ВЕРХНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ,
  234          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ВЕРХНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ,
  235          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_НАСОСОСОМ_ОХЛ,
  236          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_НАСОСОСОМ_ОХЛ,
  237          	  ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПИТАНИЕМ_ШКАФА_380,   /* добавить в гуи 27 января 2014 */
  238          	  ПК_ГУИ_НЕТ_СВЯЗИ_С_ПИТАНИЕМ_ШКАФА_380,		/* добавить в гуи 27 января 2014 */
  239          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_БАКЕ_КОМПРЕССОРА,
  240          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_БАКЕ_КОМПРЕССОРА,
  241          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_ПАТРУБКЕ,		/* добавить сообщения 3 мая 2014 */
  242          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_ПАТРУБКЕ,		/* добавить сообщения 3 мая 2014 */
  243          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ТЕМПЕРАТУРОЙ_В_РУБАШКЕ_ОХЛ,	/* добавить сообщения 3 мая 2014 */
  244          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ТЕМПЕРАТУРОЙ_В_РУБАШКЕ_ОХЛ,	/* добавить сообщения 3 мая 2014 */
  245          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ТЕМПЕРАТУРОЙ_В_БАКЕ_ОХЛ,		/* добавить сообщения 3 мая 2014 */
  246          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ТЕМПЕРАТУРОЙ_В_БАКЕ_ОХЛ,		/* добавить сообщения 3 мая 2014 */
  247          		ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_ТРУБЕ_СИД,	/* добавить сообщения 3 мая 2014 */
  248          		ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_ТРУБЕ_СИД,	/* добавить сообщения 3 мая 2014 */
  249          	  ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВКЛЮЧЕНО,
  250          	  ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВЫКЛЮЧЕНО
  251          };
  252          
  253          
  254          /*===========================================================*/
  255          /*========= КОДЫ СООБЩЕНИЙ ИЗМЕНЕНИЙ ФП         =============*/
  256          /*===========================================================*/
  257          ПЕРЕЧИСЛЕНИЕ {                    
  258                ПК_ГУИ_ФП_P_ВбакеКомпрессора = ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВЫКЛЮЧЕНО + 1,
  259                ПК_ГУИ_ФП_P_Впатрубке,
  260                ПК_ГУИ_ФП_T_Врубашке,
  261                ПК_ГУИ_ФП_T_Вбаке,
  262                ПК_ГУИ_ФП_P_ВтрубеСидер
  263                
  264          };
  265          /*===========================================================*/
  266          /*= КОДЫ КОМАНД ИЗМЕНЕНИЯ НАСТРОЕЧНЫХ ПАРАМЕТРОВ   ==========*/
  267          /*===========================================================*/
  268          
  269          ПЕРЕЧИСЛЕНИЕ {
  270          ИЗМН_НП_1 = ПК_ГУИ_ФП_P_ВтрубеСидер + 1,
  271          ИЗМН_НП_ЗД_P_ВбакеКомпрессора = ИЗМН_НП_1,
  272          ИЗМН_НП_ЗД_Pатмосф,
  273          ИЗМН_НП_ЗД_P_ВтрубеСидер,	
  274          ИЗМН_НП_ЗД_T_ВрубашкеНижняя,		/* добавлено 20 января 2014 */
  275          ИЗМН_НП_ЗД_T_ВрубашкеВерхняя,	/* добавлено 20 января 2014 */
  276          ИЗМН_НП_ЗД_T_ВбакеНижняя,/* добавлено 20 января 2014 */
  277          ИЗМН_НП_ЗД_T_ВбакеВерхняя,/* добавлено 20 января 2014 */
  278          
  279          ИЗМН_НП_ЗД_ПериодаКонтрP_ПриОткачке,  /* добавлено 7 января 2014 */
  280          ИЗМН_НП_ЗД_ПериодаКонтрP_ПриНатекании, /* добавлено 7 января 2014 */
  281          
  282          ИЗМН_НП_ЗД_Гист_T_Вбаке,
  283          ИЗМН_НП_ЗД_Гист_T_Врубашке,
  284          ИЗМН_НП_ЗД_Гист_P_ВбакеКомпрессора,
  285          ИЗМН_НП_ЗД_Гист_P_ВтрубеСидерВерх,
  286          ИЗМН_НП_ЗД_Гист_P_ВтрубеСидерНиж,
  287          
  288          ИЗМН_НП_N
  289          };
  290          
  291          /*===========================================================*/
  292          /*========= КОДЫ СООБЩЕНИЙ  О НЕВЕРНОЙ КОМАНДЕ ==============*/
  293          /*===========================================================*/
  294          
  295          
  296          ПЕРЕЧИСЛЕНИЕ {
  297               ПК_ГУИ_ОШИБКА_КОДА_КОМАНДЫ_ОТ_ГУИ = ИЗМН_НП_N + 1  
  298          }; 
  299          
  300          /*###########################################################*/
  301          /*###########################################################*/
  302          /*########                                          #########*/
  303          /*########  ОПИСАНИЕ ФУНКЦИЙ                        #########*/
  304          /*########                                          #########*/
  305          /*########                                          #########*/
  306          /*###########################################################*/
  307          
  308          /*:::::::::Функции для работы  с ГУИ :::::::::::::::::::::   */
  309          
  310          /*чтение кода и параметра события от ПИВ из кольцевого буфера в память */
  311          ФУНКЦИЯ ЦЕЛ GetNextMsgGUI(ПУСТО);
  312          
  313          ФУНКЦИЯ ЦЕЛ  GetMsgGUICode        (ПУСТО);  /*чтение из памяти кода события */
  314          ФУНКЦИЯ ПЛАВ GetFloatParamGUI     (ПУСТО);  /*чтение из памяти параметра события  используется */
  315          /* ФУНКЦИЯ КЦЕЛ GetShortParamGUI     (ПУСТО); */
  316          ФУНКЦИЯ ЦЕЛ  GetIntParamGUI       (ПУСТО);  /*чтение с экрана гуи - не исползуется */
  317          ФУНКЦИЯ ДЦЕЛ GetLongParamGUI      (ПУСТО);  /*чтение с экрана гуи - исползуется */
  318          
  319          ФУНКЦИЯ ЦЕЛ  SendMsgGUICode       (ЦЕЛ);
  320          ФУНКЦИЯ ЦЕЛ  SendMsgFloatParamGUI (ЦЕЛ, ПЛАВ);
  321          /* ФУНКЦИЯ ЦЕЛ  SendMsgShortParamGUI (ЦЕЛ, КЦЕЛ); */
  322          /* ФУНКЦИЯ ЦЕЛ  SendMsgIntParamGUI   (ЦЕЛ, ЦЕЛ); */
  323          ФУНКЦИЯ ЦЕЛ  SendMsgLongParamGUI  (ЦЕЛ, ДЦЕЛ);
  324          
  325          ФУНКЦИЯ ЦЕЛ  InitChannelStatus_GUI (ПУСТО); /* инициализация статуса,
  326          /*обнуление числа ошибок */
  327          ФУНКЦИЯ ЦЕЛ  GetChannelStatus_GUI  (ПУСТО);  /* чтение статуса канала 0/1 - не исползуется*/
  328          ФУНКЦИЯ ЦЕЛ  GetErrorNumberCS_GUI  (ПУСТО);  /* чтение числа ошибок КС  - не исползуется*/
  329          ФУНКЦИЯ ЦЕЛ  GetErrorNumberTO_GUI  (ПУСТО);  /* чтение числа ошибок по тайм ауту - не исползуется*/
  330          ФУНКЦИЯ ЦЕЛ  GetInpMsgNumber_GUI (ПУСТО);  /* чтение числа сообщ. во входн. буфере - не исползуется*/
  331          ФУНКЦИЯ ЦЕЛ  GetOutMsgNumber_GUI (ПУСТО); /* чтение числа сообщ. в выходн. буфере -  не исползуется*/
  332          
  333          ФУНКЦИЯ ПЛАВ GetFP_P_BAK_COMPRESSOR		(ПУСТО);	/* чтение давления в баке компрессора */ 
  334          ФУНКЦИЯ ПЛАВ GetFP_P_PATRUBKA			(ПУСТО);   /* чтение давления  в патрубке      */
  335          ФУНКЦИЯ ПЛАВ GetFP_T_RUBACHKA			(ПУСТО);	/* чтение температуры воды в рубашке охлаждения */
  336          ФУНКЦИЯ ПЛАВ GetFP_T_BAK				(ПУСТО);	/* чтение температуры воды в баке охлаждения */ 
  337          ФУНКЦИЯ ПЛАВ GetFP_P_TRUBA				(ПУСТО);	/* чтение давления в трубе сидера */
  338          
  339          
  340          /*###########################################################*/
  341          /*########                                          #########*/
  342          /*########  ОПИСАНИЕ РЕГИСТРОВ МОДУЛЕЙ УСО          #########*/
  343          /*########  (устройство связи с объектом)           #########*/
  344          /*###########################################################*/
  345          
  346          ВХОД  К_ЛОГ_ВХОД_ОТКР_ЗАТВОР_ВАК  	0 0 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  347          ВХОД  К_ЛОГ_ВХОД_ЗАКР_ЗАТВОР_ВАК  	0 1 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  348          ВХОД  К_ЛОГ_ВХОД_САПУН  			0 2 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  349          ВХОД  К_ЛОГ_ВХОД_УСТР_ПЛАВ_ПУСКА  	0 3 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  350          ВХОД  К_ЛОГ_ВХОД_ПИТ_УПП_ВАК_НАСОСА  	0 4 8; /* имя, базовый адрес, доп. адр. порта, 8бит */ 
  351          ВХОД  К_ЛОГ_ВХОД_ПИТ_ВЕНТИЛЯТОРА  	0 5 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  352          ВХОД  К_ЛОГ_ВХОД_ПИТ_РЕГ_Т  		0 6 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  353          ВХОД  К_ЛОГ_ВХОД_ПИТ_РЕГ_УР  		0 7 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  354          ВХОД  К_ЛОГ_ВХОД_УР_ВОДЫ_MIN  		0 8 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  355          ВХОД  К_ЛОГ_ВХОД_УР_ВОДЫ_MAX  		0 9 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  356          ВХОД  К_ЛОГ_ВХОД_ПИТ_НАСОС_ОХЛ  	0 10 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  357          ВХОД  К_ЛОГ_ВХОД_ШКАФ_ВС_380		0 11 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 23 января 2014 */
  358          /* входы для достоверностей фактических значений */
  359          ВХОД  К_ЛОГ_ВХОД_P_ВбакеКомпрессора	0 12 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  360          ВХОД  К_ЛОГ_ВХОД_P_Впатрубке		0 13 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  361          ВХОД  К_ЛОГ_ВХОД_T_Врубашке			0 14 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  362          ВХОД  К_ЛОГ_ВХОД_T_Вбаке			0 15 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  363          ВХОД  К_ЛОГ_ВХОД_P_ВтрубеСидер		0 16 8; /* имя, базовый адрес, доп. адр. порта, 8бит */  /*добавлено 12 мая 2014 */
  364          
  365          
  366          
  367          
  368          /* ВХОД АЦП_T_Вбаке		 			0 66 16; */  /* регистр АЦП */
  369          /*ВХОД АЦП_T_Врубашке	 			0 67 16; */ /* регистр АЦП */
  370          /*ВХОД АЦП_P_ВтрубеСидер	 		0 68 16; */ /* регистр АЦП */
  371          /*ВХОД АЦП_P_Впатрубке 				0 69 16; */ /*   регистр АЦП */
  372          /*ВХОД АЦП_P_ВбакеКомпрессора 		0 70 16; */ /* регистр АЦП */
  373          
  374          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_ВЕНТИЛЯТОРА  1 0 8; /* имя, базовый адрес, доп. адр. порта, 8бит */
  375          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_РЕГ_Т		1 1 8;
  376          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_НАС_ОХЛ		1 2 8;
  377          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_УПП_ВАК_НАСОСА	1 3 8;  
  378          ВЫХОД  У_ЛОГ_ВЫХОД_ЗАТВОР_ВАК		1 4 8;
  379          ВЫХОД  У_ЛОГ_ВЫХОД_САПУН			1 5 8;
  380          ВЫХОД  У_ЛОГ_ВЫХОД_УСТР_ПЛАВ_ПУСКА	1 6 8;
  381          ВЫХОД  У_ЛОГ_ВЫХОД_ПИТ_РЕГ_УР		1 7 8;
  382          
  383          
  384          /*ВЫХОД  ЛОГ_ВЫХОД_GPIO21  1 1 8; */ /* имя, базовый адрес, доп. адр. порта, 8бит */
  385          
  386          
  387          /*###########################################################*/
  388          /*########                                          #########*/
  389          /*########  ПРОЦЕССЫ                                #########*/
  390          /*########                                          #########*/
  391          /*###########################################################*/
  392          
  393          /*
  394           * Процесс Инициализация. Служит для
  395           * развертывания программы. Этот процесс (описанный
  396           * первым) - единственно активный процесс по запуску.
  397           * Кроме этого, процесс Инициализация содержит описание 
  398           * переменных для ссылок из других
  399           * процессов. Это удобно: описания локализованы в одном
  400           * месте.
  401          */
  402          
  403          ПРОЦ Инициализация{
  404          /*===========================================================*/
  405          /*=========== ОПИСАНИЕ ПЕРЕМЕННЫХ ===========================*/
  406          /*===========================================================*/
  407          
  408          /* ВХОДНЫЕ СИГНАЛЫ: */
  409          /*-----------------*/
  410          
  411          
  412          ЛОГ К_ОТКР_ЗАТВОР_ВАК          	= {К_ЛОГ_ВХОД_ОТКР_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ; /*  концевик затвора вакуумного*/
  413          ЛОГ Д_ОТКР_ЗАТВОР_ВАК          	= {К_ЛОГ_ВХОД_ОТКР_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ; /*  достоверность*/
  414          
  415          ЛОГ К_ЗАКР_ЗАТВОР_ВАК          	= {К_ЛОГ_ВХОД_ЗАКР_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ; /*  концевик затвора вакуумного*/
  416          ЛОГ Д_ЗАКР_ЗАТВОР_ВАК          	= {К_ЛОГ_ВХОД_ЗАКР_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ;
  417          
  418          ЛОГ К_САПУН                     = {К_ЛОГ_ВХОД_САПУН[1]} ДЛЯ ВСЕХ;
  419          ЛОГ Д_САПУН                     = {К_ЛОГ_ВХОД_САПУН[1]} ДЛЯ ВСЕХ;
  420          
  421          ЛОГ К_УСТР_ПЛАВ_ПУСКА			= {К_ЛОГ_ВХОД_УСТР_ПЛАВ_ПУСКА[1]} ДЛЯ ВСЕХ;
  422          ЛОГ Д_УСТР_ПЛАВ_ПУСКА			= {К_ЛОГ_ВХОД_УСТР_ПЛАВ_ПУСКА[1]} ДЛЯ ВСЕХ;
  423          
  424          ЛОГ К_ПИТ_УПП_ВАК_НАСОСА	 	= {К_ЛОГ_ВХОД_ПИТ_УПП_ВАК_НАСОСА[1]} ДЛЯ ВСЕХ; 
  425          ЛОГ Д_ПИТ_УПП_ВАК_НАСОСА		= {К_ЛОГ_ВХОД_ПИТ_УПП_ВАК_НАСОСА[1]} ДЛЯ ВСЕХ; 
  426          
  427          ЛОГ К_ПИТ_ВЕНТИЛЯТОРА           = {К_ЛОГ_ВХОД_ПИТ_ВЕНТИЛЯТОРА[1]} ДЛЯ ВСЕХ; 
  428          ЛОГ Д_ПИТ_ВЕНТИЛЯТОРА           = {К_ЛОГ_ВХОД_ПИТ_ВЕНТИЛЯТОРА[1]} ДЛЯ ВСЕХ; 
  429          
  430          ЛОГ К_ПИТ_РЕГ_Т 			    = {К_ЛОГ_ВХОД_ПИТ_РЕГ_Т[1]} ДЛЯ ВСЕХ;
  431          ЛОГ Д_ПИТ_РЕГ_Т 			    = {К_ЛОГ_ВХОД_ПИТ_РЕГ_Т[1]} ДЛЯ ВСЕХ;
  432          
  433          ЛОГ К_ПИТ_РЕГ_УР     			= {К_ЛОГ_ВХОД_ПИТ_РЕГ_УР[1]} ДЛЯ ВСЕХ;
  434          ЛОГ Д_ПИТ_РЕГ_УР     			= {К_ЛОГ_ВХОД_ПИТ_РЕГ_УР[1]} ДЛЯ ВСЕХ;
  435          
  436          ЛОГ К_УР_ВОДЫ_MIN  				= {К_ЛОГ_ВХОД_УР_ВОДЫ_MIN[1]} ДЛЯ ВСЕХ;
  437          ЛОГ Д_УР_ВОДЫ_MIN  				= {К_ЛОГ_ВХОД_УР_ВОДЫ_MIN[1]} ДЛЯ ВСЕХ;
  438          
  439          ЛОГ К_УР_ВОДЫ_MAX   			= {К_ЛОГ_ВХОД_УР_ВОДЫ_MAX[1]} ДЛЯ ВСЕХ;
  440          ЛОГ Д_УР_ВОДЫ_MAX   			= {К_ЛОГ_ВХОД_УР_ВОДЫ_MAX[1]} ДЛЯ ВСЕХ;
  441          
  442          ЛОГ К_ПИТ_НАСОС_ОХЛ 			= {К_ЛОГ_ВХОД_ПИТ_НАСОС_ОХЛ[1]} ДЛЯ ВСЕХ;
  443          ЛОГ Д_ПИТ_НАСОС_ОХЛ 			= {К_ЛОГ_ВХОД_ПИТ_НАСОС_ОХЛ[1]} ДЛЯ ВСЕХ;
  444          
  445          ЛОГ К_ШКАФ_ВС_380 				= {К_ЛОГ_ВХОД_ШКАФ_ВС_380[1]} ДЛЯ ВСЕХ;  /* добавлено 23 января 2014*/
  446          ЛОГ Д_ШКАФ_ВС_380 				= {К_ЛОГ_ВХОД_ШКАФ_ВС_380[1]} ДЛЯ ВСЕХ;	/* добавлено 23 января 2014*/
  447          
  448          /* для достоверностей фактических значений */
  449          
  450          ЛОГ К_ПУТО1 				= {К_ЛОГ_ВХОД_P_ВбакеКомпрессора[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  451          ЛОГ Д_P_ВбакеКомпрессора	= {К_ЛОГ_ВХОД_P_ВбакеКомпрессора[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  452          
  453          ЛОГ К_ПУТО2 				= {К_ЛОГ_ВХОД_P_Впатрубке[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  454          ЛОГ Д_P_Впатрубке			= {К_ЛОГ_ВХОД_P_Впатрубке[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  455          
  456          ЛОГ К_ПУТО3 				= {К_ЛОГ_ВХОД_T_Врубашке[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  457          ЛОГ Д_T_Врубашке			= {К_ЛОГ_ВХОД_T_Врубашке[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  458          
  459          ЛОГ К_ПУТО4 				= {К_ЛОГ_ВХОД_T_Вбаке[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  460          ЛОГ Д_T_Вбаке				= {К_ЛОГ_ВХОД_T_Вбаке[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  461          
  462          ЛОГ К_ПУТО5 				= {К_ЛОГ_ВХОД_P_ВтрубеСидер[1]} ДЛЯ ВСЕХ;  /* добавлено 12 мая 2014*/
  463          ЛОГ Д_P_ВтрубеСидер			= {К_ЛОГ_ВХОД_P_ВтрубеСидер[1]} ДЛЯ ВСЕХ;	/* добавлено 12 мая 2014*/
  464          
  465          
  466          /* ВЫХОДНЫЕ СИГНАЛЫ (т.к. привязаны к модулю выходов): */ 
  467          
  468          ЛОГ У_ПИТ_ВЕНТИЛЯТОРА   			= {У_ЛОГ_ВЫХОД_ПИТ_ВЕНТИЛЯТОРА[1]} ДЛЯ ВСЕХ; 
  469          ЛОГ У_ПИТ_РЕГ_Т      				= {У_ЛОГ_ВЫХОД_ПИТ_РЕГ_Т[1]} ДЛЯ ВСЕХ;   
  470          ЛОГ У_ПИТ_НАС_ОХЛ      				= {У_ЛОГ_ВЫХОД_ПИТ_НАС_ОХЛ[1]} ДЛЯ ВСЕХ;   
  471          ЛОГ У_ПИТ_УПП_ВАК_НАСОСА				= {У_ЛОГ_ВЫХОД_ПИТ_УПП_ВАК_НАСОСА[1]} ДЛЯ ВСЕХ; 
  472          ЛОГ У_ЗАТВОР_ВАК					= {У_ЛОГ_ВЫХОД_ЗАТВОР_ВАК[1]} ДЛЯ ВСЕХ; 
  473          ЛОГ У_САПУН							= {У_ЛОГ_ВЫХОД_САПУН[1]} ДЛЯ ВСЕХ; 
  474          ЛОГ У_УСТР_ПЛАВ_ПУСКА				= {У_ЛОГ_ВЫХОД_УСТР_ПЛАВ_ПУСКА[1]} ДЛЯ ВСЕХ; 
  475          ЛОГ У_ПИТ_РЕГ_УР					= {У_ЛОГ_ВЫХОД_ПИТ_РЕГ_УР[1]} ДЛЯ ВСЕХ; 
  476          
  477          
  478          /*===========================================================*/
  479          /*=========== ЯЧЕЙКИ ИНФОРМАЦИОННЫХ КАНАЛОВ =================*/
  480          /*===========================================================*/
  481          ЦЕЛ КодСобытия_от_ГУИ        ДЛЯ ВСЕХ;
  482          ЦЕЛ КодСобытия_к_ГУИ         ДЛЯ ВСЕХ;
  483          
  484            
  485            
  486          /*===========================================================*/
  487          /*=========== ЯЧЕЙКИ ОБЩЕГО УПРАВЛЕНИЯ ======================*/
  488          /*===========================================================*/
  489          ЛОГ ФлагГотовУрВодыБО ДЛЯ ВСЕХ;  /* Флаг установлен, если уровень воды в баке охлаждения в норме*/ 
  490          ЛОГ ФлагГотовТемпВодыБО ДЛЯ ВСЕХ;  /* Флаг установлен, если  температура в баке охлаждения в норме*/ 
  491          ЦЕЛ ФлагГотовTВодыРО ДЛЯ ВСЕХ;  /* Флаг установлен, если  температура в рубашке охлаждения в норме*/ 
  492          ЛОГ ФлагГотовВакуумаВТ ДЛЯ ВСЕХ;
  493          ЛОГ ФлагОткачкиТрубыСидеростата ДЛЯ ВСЕХ;
  494          ЛОГ ФлагДавленияКомпрессора ДЛЯ ВСЕХ;
  495          
  496          /* Состояние оборудования (пока не используется)*/
  497          
  498          ЛОГ ФлагСостоянияВентилятора ДЛЯ ВСЕХ;
  499          ЛОГ ФлагСостоянияЗатвораВакуумного ДЛЯ ВСЕХ;
  500          ЛОГ ФлагСостоянияСапуна ДЛЯ ВСЕХ;
  501          ЛОГ ФлагСостоянияУстройстваПлавногоПуска ДЛЯ ВСЕХ;
  502          ЛОГ ФлагСостоянияВакуумногоНасоса ДЛЯ ВСЕХ;
  503          ЛОГ ФлагСостоянияРегулятораТемпературы ДЛЯ ВСЕХ;			
  504          ЛОГ ФлагСостоянияРегулятораУровня ДЛЯ ВСЕХ;
  505          ЛОГ ФлагСостоянияНасосаОхлаждения ДЛЯ ВСЕХ;	
  506          		
  507          /*добавлено 15 января 2014 г. для того, чтобы не использовать К_ в высокоуровневых процессах */
  508          ЛОГ КонцевикОткрытияЗатвораВакуумного ДЛЯ ВСЕХ; /*  концевик затвора вакуумного*/
  509          ЛОГ КонцевикЗакрытияЗатвораВакуумного ДЛЯ ВСЕХ;/*  концевик затвора вакуумного*/
  510          ЛОГ СостояниеСапуна 					ДЛЯ ВСЕХ;
  511          ЛОГ СостояниеУСТР_ПЛАВ_ПУСКА 			ДЛЯ ВСЕХ;
  512          ЛОГ СостояниеУППВакуумногоНасоса 			ДЛЯ ВСЕХ;
  513          ЛОГ СостояниеВентилятора 				ДЛЯ ВСЕХ;
  514          ЛОГ СостояниеПитШкафаВС380 				ДЛЯ ВСЕХ;
  515          ЛОГ СостояниеПИТ_РЕГ_Т 				ДЛЯ ВСЕХ;
  516          ЛОГ СостояниеПИТ_РЕГ_УР 			ДЛЯ ВСЕХ;
  517          ЛОГ СостояниеПИТ_НАСОС_ОХЛ 			ДЛЯ ВСЕХ;
  518          
  519          ЛОГ СвязьС_P_ВбакеКомпрессора 		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  520          ЛОГ	СвязьС_P_Впатрубке 				ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  521          ЛОГ	СвязьС_T_Врубашке 				ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  522          ЛОГ	СвязьС_T_Вбаке	 				ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  523          ЛОГ	СвязьС_P_ВтрубеСидер			ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  524          
  525          ЛОГ	СвязьС_РегуляторомУровня		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  526          ЛОГ	СвязьС_РегуляторомТемпературы	ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  527          ЛОГ	СвязьС_Вентилятором				ДЛЯ ВСЕХ;			/* 18 августа 2014 */			
  528          ЛОГ	СвязьС_НасосомОхлаждения		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  529          ЛОГ	СвязьС_КонцевикомОткрытияЗВ		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  530          ЛОГ	СвязьС_КонцевикомЗакрытияЗВ		ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  531          	
  532          ЛОГ	СвязьС_КонцевикомСапуна			ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  533          ЛОГ	СвязьС_ПитаниемПлавногоПуска	ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  534          ЛОГ	СвязьС_ПлавнымПуском			ДЛЯ ВСЕХ;			/* 18 августа 2014 */
  535          /*а связь с концевиками уровня воды????*/
  536          
  537          ЛОГ К_Достоверности 				ДЛЯ ВСЕХ;			/* добавлено 16 января 2014*/
  538          
  539          ДЦЕЛ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА ДЛЯ ВСЕХ; /* ????????чтобы в отмену не уходить */
  540          
  541          
  542          /*===========================================================*/
  543          /*=========== ФАКТИЧЕСКИЕ ПАРАМЕТРЫ =========================*/
  544          /*===========================================================*/
  545          /*ПЛАВ ФП_Pтрубы ДЛЯ ВСЕХ;*/
  546          /* ????????????????????????????????????????????????????????????????? */
  547          /*  Саша Курочкин будет ацепировать */
  548          /*ЦЕЛ	ФП_P_ВбакеКомпрессора 	= {P_ВбакеКомпрессора [16]} 	ДЛЯ ВСЕХ; */
  549          /*ЦЕЛ	ФП_P_Впатрубке	 		= {P_Впатрубке [16]}			ДЛЯ ВСЕХ; 	*/
  550          /*ЦЕЛ	ФП_T_Врубашке 			= {T_Врубашке [16]}				ДЛЯ ВСЕХ; 	*/
  551          /*ЦЕЛ	ФП_T_Вбаке 				= {T_Вбаке [16]}				ДЛЯ ВСЕХ;	*/ 
  552          /*ЦЕЛ	ФП_P_ВтрубеСидер 		= {P_ВтрубеСидер [16]} 			ДЛЯ ВСЕХ; 	*/
  553          
  554          
  555          ПЛАВ ФП_P_ВбакеКомпрессора ДЛЯ ВСЕХ; 
  556          ПЛАВ ФП_P_Впатрубке ДЛЯ ВСЕХ;
  557          ПЛАВ ФП_T_Врубашке ДЛЯ ВСЕХ;	
  558          ПЛАВ ФП_T_Вбаке ДЛЯ ВСЕХ;
  559          ПЛАВ ФП_P_ВтрубеСидер ДЛЯ ВСЕХ;
  560          /*===========================================================*/
  561          /*============       НАСТРОЕЧНЫЕ ПАРАМЕТРЫ        ===========*/
  562          /*===========================================================*/
  563          ПЛАВ НП_ЗД_P_ВбакеКомпрессора  ДЛЯ ВСЕХ;
  564          ПЛАВ НП_ЗД_Pатмосф             ДЛЯ ВСЕХ;
  565          ПЛАВ НП_ЗД_P_ВтрубеСидер ДЛЯ ВСЕХ;
  566          
  567          ПЛАВ НП_ЗД_T_ВрубашкеНижняя  		ДЛЯ ВСЕХ;	/* добавлено 20 января 2014 */
  568          ПЛАВ НП_ЗД_T_ВрубашкеВерхняя  		ДЛЯ ВСЕХ;	/* добавлено 20 января 2014 */
  569          ПЛАВ НП_ЗД_T_ВбакеНижняя  			ДЛЯ ВСЕХ;	/* добавлено 20 января 2014 */
  570          ПЛАВ НП_ЗД_T_ВбакеВерхняя  			ДЛЯ ВСЕХ;	/* добавлено 20 января 2014 */
  571          
  572          ДЦЕЛ НП_ЗД_ПериодаКонтрP_ПриОткачке ДЛЯ ВСЕХ;  /* добавлено 7 января 2014 */
  573          ДЦЕЛ НП_ЗД_ПериодаКонтрP_ПриНатекании ДЛЯ ВСЕХ; /* добавлено 7 января 2014 */
  574          
  575          ПЛАВ НП_ЗД_Гист_T_Вбаке  			ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  576          ПЛАВ НП_ЗД_Гист_T_Врубашке  		ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  577          ПЛАВ НП_ЗД_Гист_P_ВбакеКомпрессора 	ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  578          ПЛАВ НП_ЗД_Гист_P_ВтрубеСидерВерх  	ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  579          ПЛАВ НП_ЗД_Гист_P_ВтрубеСидерНиж  	ДЛЯ ВСЕХ;	/* добавлено 3 февраля 2014 */
  580          
  581          /*########  СОСТОЯНИЯ ПРОЦЕССА  #########*/
  582           СОСТ Начало{ 		/* добавлено 16 января 2014 */
  583          	ФлагГотовУрВодыБО = ВНЕ_НОРМЫ;
  584          	ФлагГотовТемпВодыБО = ВНЕ_НОРМЫ;
  585          	ФлагГотовTВодыРО = ВНЕ_НОРМЫ;
  586          	ФлагГотовВакуумаВТ = ВНЕ_НОРМЫ;
  587          	ФлагОткачкиТрубыСидеростата = ВНЕ_НОРМЫ;
  588          	ФлагДавленияКомпрессора = ВНЕ_НОРМЫ;
  589          /*ШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШ*/
  590          /* сделано для отладки, т.к. у нас нет имитаторов всех элементов вак. системы         */
  591          /*	К_Достоверности = Не_проверяются; */			/* режим без проверки достоверностей К*/
  592          	К_Достоверности = Проверяются;		/* режим с проверкой достоверностей К     */
  593          /*ШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШШ*/
  594          	/*======================================================================================*/
  595          	/*Процессы. для отображения на ГУИ наличие связи с датчиками, а точнее с мохами			*/	
  596          	/*  Сообщают: есть связь или нет														*/
  597          	/*======================================================================================*/	
  598          	СТАРТ ПРОЦ КонтрольДостоверностиОткрЗатВакуумного;
  599          	СТАРТ ПРОЦ КонтрольДостоверностиЗакрЗатВакуумного;
  600          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияСапуна;
  601          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияУстройстваПлавПуска;
  602          	СТАРТ ПРОЦ КонтрольДостоверностиСостПитанияУППВакНасоса;
  603          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияВентилятора;
  604          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияРегТемпературы;
  605          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияРегУровня;
  606          	СТАРТ ПРОЦ КонтрольДостоверностиУровняВодыМинимум;
  607          	СТАРТ ПРОЦ КонтрольДостоверностиУровняВодыМаксимум;
  608          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияНасОхлаждения;
  609          	СТАРТ ПРОЦ КонтрольДостоверностиСостоянияПитанияШКАФА_ВС;   
  610          	СТАРТ ПРОЦ КонтрольДостоверностиДавленияВбакеКомпрессора;
  611          	СТАРТ ПРОЦ КонтрольДостоверностиДавленияВпатрубке;
  612          	СТАРТ ПРОЦ КонтрольДостоверностиТемпературыВрубашкеОхлаждения;
  613          	СТАРТ ПРОЦ КонтрольДостоверностиТемпературыВбакеОхлаждения;
  614          	СТАРТ ПРОЦ КонтрольДостоверностиДавленияВтрубеСидеростата;
  615          	В СЛЕДУЮЩЕЕ;
  616           }
  617           /* это чтобы лампочку погасить*/
  618           	СОСТ КонтрольИдетЛиВакуумированиеВакуумирования{
  619          		ЕСЛИ ((ПРОЦ  ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) &&
  620          			(ПРОЦ  ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ)) {
  621          				ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВЫКЛЮЧЕНО)) В СЛЕДУЮЩЕЕ;
  622          		}
  623          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  624          	}
  625           
  626           СОСТ ВыборРаботыСдостоверностями{
  627          
  628          	ЕСЛИ (К_Достоверности == Не_проверяются) В СОСТ НеПроверяемДостоверностьКонтроля;
  629          	ИНАЧЕ В СОСТ ПроверяемДостоверностьКонтроля;
  630           }
  631           СОСТ НеПроверяемДостоверностьКонтроля{  /* восстановление управления*/
  632          	/* позволяет установить управленческие команды по контрольным сигналам*/
  633          	ЕСЛИ (К_САПУН) 				У_САПУН = ВКЛ;
  634          	ЕСЛИ (К_УСТР_ПЛАВ_ПУСКА) 	У_УСТР_ПЛАВ_ПУСКА = ВКЛ;
  635          	ЕСЛИ (К_ПИТ_УПП_ВАК_НАСОСА) 	У_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;   
  636          	ЕСЛИ (К_ПИТ_ВЕНТИЛЯТОРА) 	У_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;
  637          	ЕСЛИ (К_ПИТ_РЕГ_Т) 			У_ПИТ_РЕГ_Т = ВКЛ;
  638          	ЕСЛИ (К_ПИТ_РЕГ_УР) 		У_ПИТ_РЕГ_УР = ВКЛ;
  639          	ЕСЛИ (К_ПИТ_НАСОС_ОХЛ) 		У_ПИТ_НАС_ОХЛ = ВКЛ;	
  640          	ЕСЛИ  ((К_ОТКР_ЗАТВОР_ВАК) && (!К_ЗАКР_ЗАТВОР_ВАК)) 	У_ЗАТВОР_ВАК = ОТКР; 
  641          	ЕСЛИ ((!К_ОТКР_ЗАТВОР_ВАК) && (К_ЗАКР_ЗАТВОР_ВАК)) 		У_ЗАТВОР_ВАК = ЗАКР;
  642          	
  643          	В СОСТ НачалоРаботы; 
  644           }
  645           СОСТ ПроверяемДостоверностьКонтроля{   /* восстановление управления и ожидание достоверных данных*/
  646          										/* т.к. от железа в момент включения true может прийти*/
  647          							
  648          										
  649          	ЕСЛИ ( 	
  650          			(Д_P_ВбакеКомпрессора) &&		/* август 2014*/
  651          			(Д_P_Впатрубке) &&
  652          			(Д_T_Врубашке) &&
  653          			(Д_T_Вбаке) &&
  654          			(Д_P_ВтрубеСидер) &&
  655          			
  656          			(Д_ОТКР_ЗАТВОР_ВАК) &&				
  657          			(Д_ЗАКР_ЗАТВОР_ВАК) &&
  658          			(Д_САПУН) &&
  659          			(Д_УСТР_ПЛАВ_ПУСКА) &&
  660          			(Д_ПИТ_УПП_ВАК_НАСОСА) &&     
  661          			(Д_ПИТ_ВЕНТИЛЯТОРА) &&
  662          			(Д_ПИТ_РЕГ_Т) &&
  663          			(Д_ПИТ_РЕГ_УР) &&
  664          			(Д_УР_ВОДЫ_MIN) &&
  665          			(Д_УР_ВОДЫ_MAX) &&
  666          			(Д_ПИТ_НАСОС_ОХЛ) && 
  667          			(Д_ШКАФ_ВС_380)  
  668          			) {
  669          				ЕСЛИ (К_САПУН) 				У_САПУН = ВКЛ;
  670          				ЕСЛИ (К_УСТР_ПЛАВ_ПУСКА)	У_УСТР_ПЛАВ_ПУСКА = ВКЛ;
  671          				ЕСЛИ (К_ПИТ_УПП_ВАК_НАСОСА)  	У_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;   
  672          				ЕСЛИ (К_ПИТ_ВЕНТИЛЯТОРА)  	У_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;
  673          				ЕСЛИ (К_ПИТ_РЕГ_Т)			У_ПИТ_РЕГ_Т = ВКЛ;
  674          				ЕСЛИ (К_ПИТ_РЕГ_УР) 		У_ПИТ_РЕГ_УР = ВКЛ;
  675          				ЕСЛИ (К_ПИТ_НАСОС_ОХЛ)   	У_ПИТ_НАС_ОХЛ = ВКЛ;
  676          				ЕСЛИ  ((К_ОТКР_ЗАТВОР_ВАК) && (!К_ЗАКР_ЗАТВОР_ВАК)) У_ЗАТВОР_ВАК = ОТКР; 
  677          				ЕСЛИ ((!К_ОТКР_ЗАТВОР_ВАК) && (К_ЗАКР_ЗАТВОР_ВАК)) 	У_ЗАТВОР_ВАК = ЗАКР; 
  678          				В СОСТ НачалоРаботы;
  679          	}
  680          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ;
  681           }
  682           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  683          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕДОСТОВЕРНЫЕ_ДАННЫЕ_ОБОРУДОВАНИЯ_ВАК_СИСТЕМЫ)) В СОСТ ВыборРаботыСдостоверностями;
  684          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  685           }
  686          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
  687          	СОСТ НарушениеСвязи {
  688          		В СОСТ ВыборРаботыСдостоверностями;
  689          		/* Это главный процесс, поэтому пока не появятся достоверности, я зацикливаю*/	
  690          	}
  691          
  692          СОСТ НачалоРаботы{	
  693          /*    ОШИБКА_ФУНКЦИОНИРОВАНИЯ = ВЫК;  */
  694              ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА = 1; /* параметр регулирует частоту подачи */
  695          	                                   /* сообщений в зависимости от заполненности буфера сообщений... */
  696          
  697          /*===========================================================*/
  698          /*========= ИНИЦИАЛИЗАЦИЯ НАСТРОЕЧНЫХ ПАРАМЕТРОВ   ==========*/
  699          /*===========================================================*/
  700          /*	Их надо читать из конфигурационного файла */
  701          
  702          	НП_ЗД_P_ВбакеКомпрессора = 4; /*атмосфер (бар) */  /* 14 декабря */
  703          	НП_ЗД_Pатмосф            = 0.05; 
  704          	НП_ЗД_P_ВтрубеСидер =  0.05; /* атмосфер*/	/* 6 декабря ???????*/
  705          	НП_ЗД_T_ВрубашкеНижняя  	= 		15.0;		/* добавлено 20 января 2014 */
  706          	НП_ЗД_T_ВрубашкеВерхняя  = 	70.0;	/*85.0;*/	/* добавлено 20 января 2014 */
  707          	НП_ЗД_T_ВбакеНижняя =  	10.0;/* добавлено 20 января 2014 */
  708          	НП_ЗД_T_ВбакеВерхняя =  	60.0;/* добавлено 20 января 2014 */
  709          
  710          	НП_ЗД_ПериодаКонтрP_ПриОткачке  = 2.0;    /*2 минуты  */     /* добавлено 7 января 2014 */
  711          	НП_ЗД_ПериодаКонтрP_ПриНатекании = 15.0;    /*15 минут  */  /* добавлено 7 января 2014 */	
  712          	
  713          	НП_ЗД_Гист_T_Вбаке = 2;  				/* добавлено 3 февраля 2014 */
  714          	НП_ЗД_Гист_T_Врубашке = 2;  			/* добавлено 3 февраля 2014 */
  715          	НП_ЗД_Гист_P_ВбакеКомпрессора = 0.5;	/* добавлено 3 февраля 2014 */
  716          	НП_ЗД_Гист_P_ВтрубеСидерВерх = 0.005;	/* добавлено 3 февраля 2014 */
  717          	НП_ЗД_Гист_P_ВтрубеСидерНиж = 0.0025;	/* добавлено 3 февраля 2014 */
  718          	
  719          	СТАРТ ПРОЦ ЧтениеКольцевогоБуфера;	
  720              СТАРТ ПРОЦ РЕГУЛЯТОР_ТРАФИКА;
  721          	/*======================================================================================*/
  722          	/*Если идет вакуумирование трубы, то данные процессы пытаются выключить вакуумирование,	*/
  723          	/*	если связи нет. Если удается выключить, то на начало, иначе - выдается сообщение 	*/
  724          	/* о ручном выключении из подвала и делается переход на рестарт главного процесса 		*/
  725          	/*======================================================================================*/
  726          	СТАРТ ПРОЦ ЧтениеДавленияВбакеКомпрессора;			/*	18 августа 2014	*/
  727          	СТАРТ ПРОЦ ЧтениеДавленияВпатрубке;					/*	18 августа 2014	*/
  728          	СТАРТ ПРОЦ ЧтениеТемпературыВрубашкеОхлаждения;  	/* 	18 августа 2014	*/
  729          	СТАРТ ПРОЦ ЧтениеТемпературыВбакеОхлаждения;		/*	18 августа 2014	*/
  730          	СТАРТ ПРОЦ ЧтениеДавленияВтрубеСидеростата;			/*	18 августа 2014	*/
  731             	СТАРТ ПРОЦ ПроверкаСвязиС_РегуляторомУровня; 		/*	18 августа 2014	*/
  732          	СТАРТ ПРОЦ ПроверкаСвязиС_РегуляторомТемпературы; 	/*	18 августа 2014	*/
  733          	СТАРТ ПРОЦ ПроверкаСвязиС_Вентилятором;	/*	18 августа 2014	*/
  734          	СТАРТ ПРОЦ ПроверкаСвязиС_НасососомОхлажденияДвигателя;  /*	18 августа 2014	*/
  735          	СТАРТ ПРОЦ ПроверкаСвязиС_КонцевикомОткрытияЗатвораВакуумного;  /*	18 августа 2014	*/
  736          	СТАРТ ПРОЦ ПроверкаСвязиС_КонцевикомЗакрытияЗатвораВакуумного;  /*	18 августа 2014	*/
  737          	СТАРТ ПРОЦ ПроверкаСвязиС_КонцевикомСапуна;  /*	18 августа 2014	*/
  738          	СТАРТ ПРОЦ ПроверкаСвязиС_ПитаниемПлавногоПуска;  /*	18 августа 2014	*/
  739          	СТАРТ ПРОЦ ПроверкаСвязиС_ПлавнымПуском;  /*	18 августа 2014	*/		
  740          	/*======================================================================================*/	
  741          	
  742          	СТАРТ ПРОЦ КонтрольИзменения_ФП_P_ВбакеКомпрессора;
  743          	СТАРТ ПРОЦ КонтрольИзменения_ФП_P_Впатрубке;
  744          	СТАРТ ПРОЦ КонтрольИзменения_ФП_T_Врубашке;
  745          	СТАРТ ПРОЦ КонтрольИзменения_ФП_T_Вбаке;
  746          	СТАРТ ПРОЦ КонтрольИзменения_ФП_P_ВтрубеСидер;
  747          	/**/
  748          	СТАРТ ПРОЦ КонтрольТемпературыРубашкиОхлаждения;
  749          	СТАРТ ПРОЦ КонтрольДавленияВбакеКомпрессора;    /* выдает Норма  не норма */
  750          	СТАРТ ПРОЦ КонтрольАварийногоДавленияВбакеКомпрессора;	/*  нет  дублирования */
  751          	СТАРТ ПРОЦ КонтрольАварийнойТемпературыВрубашкеОхлаждения;
  752          	СТАРТ ПРОЦ КонтрольАварийнойТемпературыВбакеОхлаждения;
  753          	СТАРТ ПРОЦ КонтрольУровняВодыБакаОхлаждения;  
  754          	СТАРТ ПРОЦ КонтрольТемпературыВодыБакаОхлаждения;
  755          	
  756          	/*======================================================================================*/
  757          	/*  триггерные процессы, информирующие состояние элементов вакуумной системы: вкл или выкл*/	
  758          	/*======================================================================================*/
  759          	СТАРТ ПРОЦ КонтрольСостоянияПитанияВентилятора; 
  760          	СТАРТ ПРОЦ КонтрольСостоянияПитанияСапуна;
  761          	СТАРТ ПРОЦ КонтрольСостоянияПитанияУППВакНасоса;
  762          	СТАРТ ПРОЦ КонтрольСостоянияПитанияРЕГ_Т;
  763          	СТАРТ ПРОЦ КонтрольСостоянияПитанияРЕГ_УР;
  764          	СТАРТ ПРОЦ КонтрольСостоянияПитанияНАС_ОХЛ;
  765          	СТАРТ ПРОЦ КонтрольСостоянияПитанияПЛАВ_ПУСКА;
  766          	СТАРТ ПРОЦ КонтрольСостоянияПитанияШКАФА_ВС; /*добавлено 27 января 2014 */
  767          	СТАРТ ПРОЦ КонтрольСостоянияЗатвораВакуумного;
  768          	/*======================================================================================*/	
  769          	СТАРТ ПРОЦ КонтрольГотовностиВакуума_в_Вакуумной_Трубе;
  770          	
  771          	СТОП;
  772           }
  773          }
  774          /*========================================================*/
  775          /*                                                        */
  776          /*==            Останов всех процессов и старт по-новой ==*/
  777          /*                                                        */
  778          /*========================================================*/
  779          ПРОЦ ОстановВсехПроцессовИстартПроцИнициализация{
  780          	СОСТ Начало{
  781          /*		СТОП ПРОЦ РЕГУЛЯТОР_ТРАФИКА; */
  782          /*		СТОП ПРОЦ ЧтениеКольцевогоБуфера;*/
  783          		СТОП ПРОЦ ОбработкаКомандИзмененияНП_от_ГУИ;
  784          		СТОП ПРОЦ ОбработкаКомандУправления_от_ГУИ; 
  785          /*******  добавлено 16 июля 2014*/		
  786          		СТОП ПРОЦ ЧтениеДавленияВбакеКомпрессора;
  787          		СТОП ПРОЦ ЧтениеДавленияВпатрубке;
  788          		СТОП ПРОЦ ЧтениеТемпературыВрубашкеОхлаждения;  /* добавлено 13 мая 2014*/
  789          		СТОП ПРОЦ ЧтениеТемпературыВбакеОхлаждения;
  790          		СТОП ПРОЦ ЧтениеДавленияВтрубеСидеростата;
  791          /*  добавлено 22 августа 2014*/	
  792          		СТОП ПРОЦ ПроверкаСвязиС_РегуляторомУровня; /*	 августа 2014	*/
  793          		СТОП ПРОЦ ПроверкаСвязиС_РегуляторомТемпературы; /*	18 августа 2014	*/
  794          		СТОП ПРОЦ ПроверкаСвязиС_Вентилятором;	/*	 августа 2014	*/
  795          		СТОП ПРОЦ ПроверкаСвязиС_НасососомОхлажденияДвигателя;  /*	18 августа 2014	*/
  796          		СТОП ПРОЦ ПроверкаСвязиС_КонцевикомОткрытияЗатвораВакуумного;  /*	18 августа 2014	*/
  797          		СТОП ПРОЦ ПроверкаСвязиС_КонцевикомЗакрытияЗатвораВакуумного;  /*	18 августа 2014	*/	
  798          		СТОП ПРОЦ ПроверкаСвязиС_КонцевикомСапуна;  /*	18 августа 2014	*/	
  799          		СТОП ПРОЦ ПроверкаСвязиС_ПитаниемПлавногоПуска;  /*	18 августа 2014	*/
  800          		СТОП ПРОЦ ПроверкаСвязиС_ПлавнымПуском;  /*	18 августа 2014	*/			
  801          		
  802          	
  803          		
  804          /*        добавлено 16 июля 2014*/
  805          		
  806          		СТОП ПРОЦ КонтрольИзменения_ФП_P_ВбакеКомпрессора; 
  807          		СТОП ПРОЦ КонтрольИзменения_ФП_P_Впатрубке; 
  808          		СТОП ПРОЦ КонтрольИзменения_ФП_T_Врубашке;	
  809          		СТОП ПРОЦ КонтрольИзменения_ФП_T_Вбаке;	
  810          		СТОП ПРОЦ КонтрольИзменения_ФП_P_ВтрубеСидер; 
  811          
  812          		СТОП ПРОЦ КонтрольВеличиныОткачкиВауумнойТрубыСидеростата;
  813          		СТОП ПРОЦ КонтрольГотовностиВакуума_в_Вакуумной_Трубе;
  814          		СТОП ПРОЦ КонтрольУровняВодыБакаОхлаждения;  
  815          		СТОП ПРОЦ КонтрольТемпературыВодыБакаОхлаждения; 
  816          		СТОП ПРОЦ КонтрольТемпературыРубашкиОхлаждения;
  817          		СТОП ПРОЦ КонтрольДавленияВбакеКомпрессора;
  818          		
  819          		СТОП ПРОЦ КонтрольАварийногоДавленияВбакеКомпрессора;
  820          		СТОП ПРОЦ КонтрольАварийнойТемпературыВрубашкеОхлаждения;
  821          		СТОП ПРОЦ КонтрольАварийнойТемпературыВбакеОхлаждения;
  822          		
  823          		СТОП ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР;
  824          		СТОП ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР;
  825          		СТОП ПРОЦ КонтрольСостоянияПитанияВентилятора; 
  826          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияВентилятора;
  827          		СТОП ПРОЦ КонтрольСпонтанногоВключенияВентилятора;
  828          		СТОП ПРОЦ ОТКР_ЗАТВОР_ВАК;
  829          		СТОП ПРОЦ ЗАКР_ЗАТВОР_ВАК;
  830          		СТОП ПРОЦ КонтрольСостоянияЗатвораВакуумного;  /* 12 декабря*/
  831          		СТОП ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного;
  832          		СТОП ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного;
  833          		СТОП ПРОЦ ОТКР_САПУН;
  834          		СТОП ПРОЦ ЗАКР_САПУН;
  835          		СТОП ПРОЦ КонтрольСпонтанногоЗакрытияСапуна;
  836          		СТОП ПРОЦ КонтрольСпонтанногоОткрытияСапуна;
  837          		СТОП ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА;  
  838          		СТОП ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА;  
  839          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса;  
  840          		СТОП ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса;	
  841          /*		СТОП ПРОЦ ВКЛ_ПИТ_РЕГ_Т;  */
  842          /*		СТОП ПРОЦ ВЫК_ПИТ_РЕГ_Т;   */
  843          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т;
  844          		СТОП ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т;
  845          /*		СТОП ПРОЦ ВКЛ_ПИТ_РЕГ_УР;  */
  846          /*		СТОП ПРОЦ ВЫК_ПИТ_РЕГ_УР;  */
  847          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР;
  848          		СТОП ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР;
  849          		СТОП ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;
  850          		СТОП ПРОЦ ВЫК_ПИТ_НАС_ОХЛ;
  851          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения;
  852          		СТОП ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения;
  853          		СТОП ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА;
  854          		СТОП ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА;
  855          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска;
  856          		СТОП ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска;
  857          		СТОП ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС;
  858          		/* 23 сентября ЛЯХ */
  859          		СТОП ПРОЦ КонтрольСостоянияОборудования;
  860          		СТОП ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС; 
  861          		СТОП ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ;
  862          		СТОП ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ;  /* 12 декабря !*/
  863          		СТОП ПРОЦ КонтрольСостоянияПитанияШКАФА_ВС;
  864          
  865          		
  866          /*		СТОП ПРОЦ КонтрольДостоверностиОткрЗатВакуумного;  */
  867          /*		СТОП ПРОЦ КонтрольДостоверностиЗакрЗатВакуумного;	*/
  868          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияСапуна;	*/
  869          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияУстройстваПлавПуска;*/
  870          /*		СТОП ПРОЦ КонтрольДостоверностиСостПитанияУППВакНасоса;*/
  871          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияВентилятора;*/
  872          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияРегТемпературы;*/
  873          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияРегУровня;*/
  874          /*		СТОП ПРОЦ КонтрольДостоверностиУровняВодыМинимум;*/
  875          /*		СТОП ПРОЦ КонтрольДостоверностиУровняВодыМаксимум;*/
  876          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияНасОхлаждения;*/
  877          /*		СТОП ПРОЦ КонтрольДостоверностиСостоянияПитанияШКАФА_ВС;*/
  878          /*		СТОП ПРОЦ КонтрольДостоверностиДавленияВбакеКомпрессора;*/
  879          /*		СТОП ПРОЦ КонтрольДостоверностиДавленияВпатрубке;*/
  880          /*		СТОП ПРОЦ КонтрольДостоверностиТемпературыВрубашкеОхлаждения;*/
  881          /*		СТОП ПРОЦ КонтрольДостоверностиТемпературыВбакеОхлаждения;*/
  882          /*		СТОП ПРОЦ КонтрольДостоверностиДавленияВтрубеСидеростата;*/
  883          		СТАРТ ПРОЦ Инициализация;
  884          		СТОП;
  885          	}
  886          }
  887          
  888          /*========================================================*/
  889          /*== Процессы контроля достоверности параметров К       ==*/
  890          /*      от Курочкина  (от девайсиков)                    */
  891          /*========================================================*/
  892          /* Данные процессы контроля достоверности (связи)         */
  893          /* 												          */
  894          /*===========================================Бак компрессора =============*/
  895          /* добавлено 13 мая 2014 */
  896          ПРОЦ КонтрольДостоверностиДавленияВбакеКомпрессора{
  897           ИЗ ПРОЦ Инициализация  Д_P_ВбакеКомпрессора;
  898          
  899           СОСТ Начало {
  900                ЕСЛИ (Д_P_ВбакеКомпрессора == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  901                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
  902           }
  903           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
  904               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_БАКЕ_КОМПРЕССОРА)) В СЛЕДУЮЩЕЕ;
  905               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  906           }
  907           СОСТ ОжиданиеНедостоверности {
  908                ЕСЛИ (Д_P_ВбакеКомпрессора == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  909           }
  910           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  911               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_БАКЕ_КОМПРЕССОРА)) В СЛЕДУЮЩЕЕ;
  912               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  913           }
  914           СОСТ ОжиданиеЕстьДостоверность {
  915                ЕСЛИ (Д_P_ВбакеКомпрессора == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
  916           }
  917          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
  918           СОСТ НарушениеСвязи {
  919          	   В СОСТ Начало;
  920           }
  921          }
  922          /*===========================================Патрубок =============*/
  923          /* добавлено 13 мая 2014 */
  924          ПРОЦ КонтрольДостоверностиДавленияВпатрубке{
  925           ИЗ ПРОЦ Инициализация  Д_P_Впатрубке;
  926          
  927           СОСТ Начало {
  928                ЕСЛИ (Д_P_Впатрубке == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  929                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
  930           }
  931           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
  932               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_ПАТРУБКЕ)) В СЛЕДУЮЩЕЕ;
  933               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  934           }
  935           СОСТ ОжиданиеНедостоверности {
  936                ЕСЛИ (Д_P_Впатрубке == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  937           }
  938           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  939               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_ПАТРУБКЕ)) В СЛЕДУЮЩЕЕ;
  940               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  941           }
  942           СОСТ ОжиданиеЕстьДостоверность {
  943                ЕСЛИ (Д_P_Впатрубке == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
  944           }
  945          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
  946           СОСТ НарушениеСвязи {
  947          	   В СОСТ Начало;
  948           }
  949          }
  950          
  951          /*===============================Рубашка охлаждения =============*/
  952          /* добавлено 13 мая 2014 */
  953          ПРОЦ КонтрольДостоверностиТемпературыВрубашкеОхлаждения{
  954           ИЗ ПРОЦ Инициализация  Д_T_Врубашке;
  955          
  956           СОСТ Начало {
  957                ЕСЛИ (Д_T_Врубашке == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  958                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
  959           }
  960           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
  961               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ТЕМПЕРАТУРОЙ_В_РУБАШКЕ_ОХЛ)) В СЛЕДУЮЩЕЕ;
  962               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  963           }
  964           СОСТ ОжиданиеНедостоверности {
  965                ЕСЛИ (Д_T_Врубашке == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  966           }
  967           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  968               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ТЕМПЕРАТУРОЙ_В_РУБАШКЕ_ОХЛ)) В СЛЕДУЮЩЕЕ;
  969               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  970           }
  971           СОСТ ОжиданиеЕстьДостоверность {
  972                ЕСЛИ (Д_T_Врубашке == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
  973           }
  974          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
  975           СОСТ НарушениеСвязи {
  976          	   В СОСТ Начало;
  977           }
  978          }
  979          /*===============================Бак охлаждения =============*/
  980          /* добавлено 13 мая 2014 */
  981          ПРОЦ КонтрольДостоверностиТемпературыВбакеОхлаждения{
  982           ИЗ ПРОЦ Инициализация  Д_T_Вбаке;
  983          
  984           СОСТ Начало {
  985                ЕСЛИ (Д_T_Вбаке == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  986                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
  987           }
  988           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
  989               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ТЕМПЕРАТУРОЙ_В_БАКЕ_ОХЛ)) В СЛЕДУЮЩЕЕ;
  990               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  991           }
  992           СОСТ ОжиданиеНедостоверности {
  993                ЕСЛИ (Д_T_Вбаке == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
  994           }
  995           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
  996               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ТЕМПЕРАТУРОЙ_В_БАКЕ_ОХЛ)) В СЛЕДУЮЩЕЕ;
  997               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
  998           }
  999           СОСТ ОжиданиеЕстьДостоверность {
 1000                ЕСЛИ (Д_T_Вбаке == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1001           }
 1002          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1003           СОСТ НарушениеСвязи {
 1004          	   В СОСТ Начало;
 1005           }
 1006          }
 1007          /*===========================================Труба сидеростата =============*/
 1008          /* добавлено 13 мая 2014 */
 1009          ПРОЦ КонтрольДостоверностиДавленияВтрубеСидеростата{
 1010           ИЗ ПРОЦ Инициализация  Д_P_ВтрубеСидер;
 1011          
 1012           СОСТ Начало {
 1013                ЕСЛИ (Д_P_ВтрубеСидер == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1014                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1015           }
 1016           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1017               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ДАВЛЕНИЕМ_В_ТРУБЕ_СИД)) В СЛЕДУЮЩЕЕ;
 1018               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1019           }
 1020           СОСТ ОжиданиеНедостоверности {
 1021                ЕСЛИ (Д_P_ВтрубеСидер == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1022           }
 1023           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1024               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ДАВЛЕНИЕМ_В_ТРУБЕ_СИД)) В СЛЕДУЮЩЕЕ;
 1025               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1026           }
 1027           СОСТ ОжиданиеЕстьДостоверность {
 1028                ЕСЛИ (Д_P_ВтрубеСидер == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1029           }
 1030          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1031           СОСТ НарушениеСвязи {
 1032          	   В СОСТ Начало;
 1033           }
 1034          }
 1035          
 1036          
 1037          /*===========================================Питание ШКАФА 380=============*/
 1038          /* добавлено 27 января 2014 */
 1039          ПРОЦ КонтрольДостоверностиСостоянияПитанияШКАФА_ВС{
 1040           ИЗ ПРОЦ Инициализация  Д_ШКАФ_ВС_380;
 1041          
 1042           СОСТ Начало {
 1043                ЕСЛИ (Д_ШКАФ_ВС_380 == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1044                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1045           }
 1046           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1047               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПИТАНИЕМ_ШКАФА_380)) В СЛЕДУЮЩЕЕ;
 1048               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1049           }
 1050           СОСТ ОжиданиеНедостоверности {
 1051                ЕСЛИ (Д_ШКАФ_ВС_380 == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1052           }
 1053           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1054               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ПИТАНИЕМ_ШКАФА_380)) В СЛЕДУЮЩЕЕ;
 1055               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1056           }
 1057           СОСТ ОжиданиеЕстьДостоверность {
 1058                ЕСЛИ (Д_ШКАФ_ВС_380 == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1059           }
 1060          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1061           СОСТ НарушениеСвязи {
 1062          	   В СОСТ Начало;
 1063           }
 1064          }
 1065          /*===========================================ОТКР_ЗАТВОР_ВАК=============*/
 1066          ПРОЦ КонтрольДостоверностиОткрЗатВакуумного{
 1067           ИЗ ПРОЦ Инициализация  Д_ОТКР_ЗАТВОР_ВАК;
 1068          
 1069           СОСТ Начало {
 1070                ЕСЛИ (Д_ОТКР_ЗАТВОР_ВАК == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1071                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1072           }
 1073           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1074               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_КОНЦ_ОТКРЫТИЯ_ЗАТВ_ВАКУУМНОГО)) В СЛЕДУЮЩЕЕ;
 1075               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1076           }
 1077           СОСТ ОжиданиеНедостоверности {
 1078                ЕСЛИ (Д_ОТКР_ЗАТВОР_ВАК == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1079           }
 1080           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1081               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_КОНЦ_ОТКРЫТИЯ_ЗАТВ_ВАКУУМНОГО)) В СЛЕДУЮЩЕЕ;
 1082               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1083           }
 1084           СОСТ ОжиданиеЕстьДостоверность {
 1085                ЕСЛИ (Д_ОТКР_ЗАТВОР_ВАК == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1086           }
 1087          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1088           СОСТ НарушениеСвязи {
 1089          	   В СОСТ Начало;
 1090           }
 1091          }
 1092          /*===========================================ЗАКР_ЗАТВОР_ВАК=============*/
 1093          ПРОЦ КонтрольДостоверностиЗакрЗатВакуумного{
 1094           ИЗ ПРОЦ Инициализация  Д_ЗАКР_ЗАТВОР_ВАК;
 1095          
 1096           СОСТ Начало {
 1097                ЕСЛИ (Д_ЗАКР_ЗАТВОР_ВАК == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1098                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1099           }
 1100           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1101               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_КОНЦ_ЗАКРЫТИЯ_ЗАТВ_ВАКУУМНОГО)) В СЛЕДУЮЩЕЕ;
 1102               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1103           }
 1104           СОСТ ОжиданиеНедостоверности {
 1105                ЕСЛИ (Д_ЗАКР_ЗАТВОР_ВАК == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1106           }
 1107           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1108               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_КОНЦ_ЗАКРЫТИЯ_ЗАТВ_ВАКУУМНОГО)) В СЛЕДУЮЩЕЕ;
 1109               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1110           }
 1111           СОСТ ОжиданиеЕстьДостоверность {
 1112                ЕСЛИ (Д_ЗАКР_ЗАТВОР_ВАК == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1113           }
 1114          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1115           СОСТ НарушениеСвязи {
 1116          	   В СОСТ Начало;
 1117           }
 1118          }
 1119          /*===========================================Д_САПУН=============*/
 1120          ПРОЦ КонтрольДостоверностиСостоянияСапуна{
 1121           ИЗ ПРОЦ Инициализация  Д_САПУН;
 1122          
 1123           СОСТ Начало {
 1124                ЕСЛИ (Д_САПУН == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1125                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1126           }
 1127           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1128               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_САПУНОМ)) В СЛЕДУЮЩЕЕ;
 1129               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1130           }
 1131           СОСТ ОжиданиеНедостоверности {
 1132                ЕСЛИ (Д_САПУН == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1133           }
 1134           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1135               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_САПУНОМ)) В СЛЕДУЮЩЕЕ;
 1136               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1137           }
 1138           СОСТ ОжиданиеЕстьДостоверность {
 1139                ЕСЛИ (Д_САПУН == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1140           }
 1141          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1142           СОСТ НарушениеСвязи {
 1143          	   В СОСТ Начало;
 1144           }
 1145          }
 1146          
 1147          /*===========================================Д_УСТР_ПЛАВ_ПУСКА=============*/
 1148          ПРОЦ КонтрольДостоверностиСостоянияУстройстваПлавПуска{
 1149           ИЗ ПРОЦ Инициализация  Д_УСТР_ПЛАВ_ПУСКА;
 1150          
 1151           СОСТ Начало {
 1152                ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1153                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1154           }
 1155           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1156               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПЛАВНЫМ_ПУСКОМ)) В СЛЕДУЮЩЕЕ;
 1157               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1158           }
 1159           СОСТ ОжиданиеНедостоверности {
 1160                ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1161           }
 1162           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1163               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ПЛАВНЫМ_ПУСКОМ)) В СЛЕДУЮЩЕЕ;
 1164               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1165           }
 1166           СОСТ ОжиданиеЕстьДостоверность {
 1167                ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1168           }
 1169          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1170           СОСТ НарушениеСвязи {
 1171          	   В СОСТ Начало;
 1172           }
 1173          }
 1174          /*===========================================Д_ПИТ_УПП_ВАК_НАСОСА=============*/ 
 1175          
 1176          ПРОЦ КонтрольДостоверностиСостПитанияУППВакНасоса{
 1177           ИЗ ПРОЦ Инициализация  Д_ПИТ_УПП_ВАК_НАСОСА;  
 1178          
 1179           СОСТ Начало {
 1180                ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;   
 1181                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1182           }
 1183           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1184               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ПИТАНИЕМ_ВАК_НАСОСА)) В СЛЕДУЮЩЕЕ;  
 1185               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1186           }
 1187           СОСТ ОжиданиеНедостоверности {
 1188                ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ; 
 1189           }
 1190           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1191               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ПИТАНИЕМ_ВАК_НАСОСА)) В СЛЕДУЮЩЕЕ;   
 1192               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1193           }
 1194           СОСТ ОжиданиеЕстьДостоверность {
 1195                ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;   
 1196           }
 1197          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1198           СОСТ НарушениеСвязи {
 1199          	   В СОСТ Начало;
 1200           }
 1201          }
 1202          /*===========================================Д_ПИТ_ВЕНТИЛЯТОРА=============*/
 1203          ПРОЦ КонтрольДостоверностиСостоянияПитанияВентилятора{
 1204           ИЗ ПРОЦ Инициализация  Д_ПИТ_ВЕНТИЛЯТОРА;
 1205          
 1206           СОСТ Начало {
 1207                ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1208                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1209           }
 1210           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1211               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ВЕНТИЛЯТОРОМ)) В СЛЕДУЮЩЕЕ;
 1212               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1213           }
 1214           СОСТ ОжиданиеНедостоверности {
 1215                ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1216           }
 1217           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1218               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ВЕНТИЛЯТОРОМ)) В СЛЕДУЮЩЕЕ;
 1219               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1220           }
 1221           СОСТ ОжиданиеЕстьДостоверность {
 1222                ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1223           }
 1224          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1225           СОСТ НарушениеСвязи {
 1226          	   В СОСТ Начало;
 1227           }
 1228          }
 1229          /*===========================================Д_ПИТ_РЕГ_Т=============*/
 1230          ПРОЦ КонтрольДостоверностиСостоянияПитанияРегТемпературы{
 1231           ИЗ ПРОЦ Инициализация  Д_ПИТ_РЕГ_Т;
 1232          
 1233           СОСТ Начало {
 1234                ЕСЛИ (Д_ПИТ_РЕГ_Т == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1235                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1236           }
 1237           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1238               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_РЕГ_ТЕМПЕРАТУРЫ)) В СЛЕДУЮЩЕЕ;
 1239               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1240           }
 1241           СОСТ ОжиданиеНедостоверности {
 1242                ЕСЛИ (Д_ПИТ_РЕГ_Т == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1243           }
 1244           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1245               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_РЕГ_ТЕМПЕРАТУРЫ)) В СЛЕДУЮЩЕЕ;
 1246               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1247           }
 1248           СОСТ ОжиданиеЕстьДостоверность {
 1249                ЕСЛИ (Д_ПИТ_РЕГ_Т == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1250           }
 1251          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1252           СОСТ НарушениеСвязи {
 1253          	   В СОСТ Начало;
 1254           }
 1255          }
 1256          
 1257          /*===========================================Д_ПИТ_РЕГ_УР=============*/
 1258          ПРОЦ КонтрольДостоверностиСостоянияПитанияРегУровня{
 1259           ИЗ ПРОЦ Инициализация  Д_ПИТ_РЕГ_УР;
 1260          
 1261           СОСТ Начало {
 1262                ЕСЛИ (Д_ПИТ_РЕГ_УР == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1263                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1264           }
 1265           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1266               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_РЕГ_УРОВНЯ)) В СЛЕДУЮЩЕЕ;
 1267               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1268           }
 1269           СОСТ ОжиданиеНедостоверности {
 1270                ЕСЛИ (Д_ПИТ_РЕГ_УР == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1271           }
 1272           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1273               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_РЕГ_УРОВНЯ)) В СЛЕДУЮЩЕЕ;
 1274               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1275           }
 1276           СОСТ ОжиданиеЕстьДостоверность {
 1277                ЕСЛИ (Д_ПИТ_РЕГ_УР == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1278           }
 1279          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1280           СОСТ НарушениеСвязи {
 1281          	   В СОСТ Начало;
 1282           }
 1283          }
 1284          /*===========================================Д_УР_ВОДЫ_MIN=============*/
 1285          ПРОЦ КонтрольДостоверностиУровняВодыМинимум{
 1286           ИЗ ПРОЦ Инициализация  Д_УР_ВОДЫ_MIN;
 1287          
 1288           СОСТ Начало {
 1289                ЕСЛИ (Д_УР_ВОДЫ_MIN == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1290                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1291           }
 1292           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1293               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_НИЖНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1294               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1295           }
 1296           СОСТ ОжиданиеНедостоверности {
 1297                ЕСЛИ (Д_УР_ВОДЫ_MIN == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1298           }
 1299           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1300               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_НИЖНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1301               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1302           }
 1303           СОСТ ОжиданиеЕстьДостоверность {
 1304                ЕСЛИ (Д_УР_ВОДЫ_MIN == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1305           }
 1306          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1307           СОСТ НарушениеСвязи {
 1308          	   В СОСТ Начало;
 1309           }
 1310          }
 1311          /*===========================================Д_УР_ВОДЫ_MAX=============*/
 1312          ПРОЦ КонтрольДостоверностиУровняВодыМаксимум{
 1313           ИЗ ПРОЦ Инициализация  Д_УР_ВОДЫ_MAX;
 1314          
 1315           СОСТ Начало {
 1316                ЕСЛИ (Д_УР_ВОДЫ_MAX == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1317                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1318           }
 1319           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1320               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_ВЕРХНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1321               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1322           }
 1323           СОСТ ОжиданиеНедостоверности {
 1324                ЕСЛИ (Д_УР_ВОДЫ_MAX == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1325           }
 1326           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1327               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_ВЕРХНИМ_КОНЦЕВИКОМ_УР_ВОДЫ_БАКА_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1328               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1329           }
 1330           СОСТ ОжиданиеЕстьДостоверность {
 1331                ЕСЛИ (Д_УР_ВОДЫ_MAX == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1332           }
 1333          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1334           СОСТ НарушениеСвязи {
 1335          	   В СОСТ Начало;
 1336           }
 1337          }
 1338          /*===========================================Д_ПИТ_НАСОС_ОХЛ=============*/
 1339          ПРОЦ КонтрольДостоверностиСостоянияПитанияНасОхлаждения{
 1340           ИЗ ПРОЦ Инициализация  Д_ПИТ_НАСОС_ОХЛ;
 1341           СОСТ Начало {
 1342                ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ == ДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1343                ИНАЧЕ В СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ;
 1344           }
 1345           СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ {
 1346               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_СВЯЗЬ_С_НАСОСОСОМ_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1347               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1348           }
 1349           СОСТ ОжиданиеНедостоверности {
 1350                ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ == НЕДОСТОВЕРНО) В СЛЕДУЮЩЕЕ;
 1351           }
 1352           СОСТ СообК_ГУИ_НЕТ_ДОСТОВЕРНОСТИ {
 1353               ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_СВЯЗИ_С_НАСОСОСОМ_ОХЛ)) В СЛЕДУЮЩЕЕ;
 1354               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1355           }
 1356           СОСТ ОжиданиеЕстьДостоверность {
 1357                ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ == ДОСТОВЕРНО) В СОСТ СообК_ГУИ_ЕСТЬ_ДОСТОВЕРНОСТЬ;
 1358           }
 1359          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 1360           СОСТ НарушениеСвязи {
 1361          	   В СОСТ Начало;
 1362           }
 1363          }
 1364          /*========================================================*/
 1365          /*                                                        */
 1366          /*==            ЧТЕНИЕ ФАКТИЧЕСКИХ ПАРАМЕТРОВ           ==*/
 1367          /*                                                        */
 1368          /* процессы читают параметры и реагируют на разрыв связи  */
 1369          /*========================================================*/
 1370          
 1371          /*=============================================================*/
 1372          /*  Новый процесс 13 мая 2014   Модифицирован в августе 2014   */
 1373          /*=============================================================*/
 1374          ПРОЦ ЧтениеДавленияВбакеКомпрессора{
 1375          ИЗ ПРОЦ Инициализация ФП_P_ВбакеКомпрессора,
 1376          					   Д_P_ВбакеКомпрессора,
 1377          					   К_Достоверности,
 1378          					   СвязьС_P_ВбакеКомпрессора;
 1379           СОСТ Начало {
 1380          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_P_ВбакеКомпрессора = ВКЛ;  /* для отладки без достоверностей*/ 
 1381          	ЕСЛИ (Д_P_ВбакеКомпрессора) {
 1382          		СвязьС_P_ВбакеКомпрессора = ЕСТЬ;  /* это тайминизированный параметр*/
 1383          		ФП_P_ВбакеКомпрессора 	= GetFP_P_BAK_COMPRESSOR();
 1384          		В СОСТ Начало;
 1385          	}
 1386          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1387           }
 1388          
 1389          	СОСТ ПроверкаИдетЛиВакуумирование{
 1390          		СвязьС_P_ВбакеКомпрессора = НЕТ;
 1391          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1392          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1393          	}	
 1394          	СОСТ КонтрольВыключения{
 1395          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1396          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1397          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1398          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1399          				}
 1400          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1401          		}
 1402          	} 
 1403          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1404          	СОСТ НарушениеСвязи {
 1405          			ОШИБКА;
 1406          	} 	
 1407          }
 1408          /*=============================================================*/
 1409          /*  Новый процесс 20 августа 2014   						   */
 1410          /*=============================================================*/
 1411          ПРОЦ ОтлючитьВакуумированиеВручную{
 1412          	СОСТ ПереходВручноеОтключение{
 1413          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_АВАРИЯ__СРОЧНО_ВЫКЛЮЧИТЬ_ВАК_СИСТЕМУ_В_РУЧНОМ_РЕЖИМЕ))В СЛЕДУЮЩЕЕ;
 1414          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 1415          	} 
 1416          	СОСТ ОстановПроцессов{
 1417          		ЕСЛИ (!(ПРОЦ ОстановВсехПроцессовИстартПроцИнициализация В СОСТ АКТИВНОЕ))
 1418          			СТАРТ ПРОЦ ОстановВсехПроцессовИстартПроцИнициализация;   
 1419          		СТОП;
 1420          	} 
 1421          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1422          	СОСТ НарушениеСвязи {
 1423          			ОШИБКА;
 1424          	} 	
 1425          
 1426          }
 1427          /*=============================================================*/
 1428          /*  Новый процесс 13 мая 2014                                  */
 1429          /*=============================================================*/
 1430          ПРОЦ ЧтениеДавленияВпатрубке{
 1431          ИЗ ПРОЦ Инициализация ФП_P_Впатрубке,
 1432          					   Д_P_Впатрубке,
 1433          					   К_Достоверности,
 1434          					   СвязьС_P_Впатрубке;
 1435          
 1436           СОСТ Начало {
 1437          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_P_Впатрубке = ВКЛ;  /* для отладки без достоверностей*/ 
 1438          	ЕСЛИ (Д_P_Впатрубке) {
 1439          		СвязьС_P_Впатрубке = ЕСТЬ;    /* это тайминизированный параметр*/
 1440          		ФП_P_Впатрубке 		= GetFP_P_PATRUBKA();
 1441          		В СОСТ Начало;
 1442          	}
 1443          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1444           }
 1445          	СОСТ ПроверкаИдетЛиВакуумирование{
 1446          		СвязьС_P_Впатрубке = НЕТ;	
 1447          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1448          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1449          	}
 1450          	
 1451          	СОСТ КонтрольВыключения{
 1452          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1453          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1454          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1455          					СТОП;  /*процесс будет все равно остановлен при откате*/
 1456          				}
 1457          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1458          		}
 1459          	} 
 1460          
 1461          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1462          	СОСТ НарушениеСвязи {
 1463          			ОШИБКА;
 1464          	} 
 1465          }
 1466          /*=============================================================*/
 1467          /*  Новый процесс 13 мая 2014                                  */
 1468          /*=============================================================*/
 1469          ПРОЦ ЧтениеТемпературыВрубашкеОхлаждения{
 1470          ИЗ ПРОЦ Инициализация ФП_T_Врубашке,
 1471          					   Д_T_Врубашке,
 1472          					   К_Достоверности,
 1473          					   СвязьС_T_Врубашке;
 1474          
 1475           СОСТ Начало {
 1476          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_T_Врубашке = ВКЛ;  /* для отладки без достоверностей*/ 
 1477          	ЕСЛИ (Д_T_Врубашке) {
 1478          		СвязьС_T_Врубашке = ЕСТЬ;   /* это тайминизированный параметр*/
 1479          		ФП_T_Врубашке 		= GetFP_T_RUBACHKA();
 1480          		В СОСТ Начало;
 1481          	}
 1482          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1483           }
 1484          	СОСТ ПроверкаИдетЛиВакуумирование{
 1485          		СвязьС_T_Врубашке = НЕТ;	
 1486          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1487          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1488          	}	
 1489          	СОСТ КонтрольВыключения{
 1490          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1491          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1492          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1493          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1494          				}
 1495          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1496          		}
 1497          	}   
 1498          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1499          	СОСТ НарушениеСвязи {
 1500          			ОШИБКА;
 1501          	} 
 1502          }
 1503          /*=============================================================*/
 1504          /*  Новый процесс 13 мая 2014                                  */
 1505          /*=============================================================*/
 1506          ПРОЦ ЧтениеТемпературыВбакеОхлаждения{
 1507          ИЗ ПРОЦ Инициализация ФП_T_Вбаке,
 1508          					   Д_T_Вбаке,
 1509          					   К_Достоверности,
 1510          					   СвязьС_T_Вбаке;
 1511          
 1512           СОСТ Начало {
 1513          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_T_Вбаке = ВКЛ;  /* для отладки без достоверностей*/ 
 1514          	ЕСЛИ (Д_T_Вбаке) {
 1515          		СвязьС_T_Вбаке = ЕСТЬ;	/* это тайминизированный параметр*/
 1516          		ФП_T_Вбаке 			= GetFP_T_BAK();
 1517          		В СОСТ Начало;
 1518          	}
 1519          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1520           }
 1521          	СОСТ ПроверкаИдетЛиВакуумирование{
 1522          		СвязьС_T_Вбаке = НЕТ;	
 1523          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1524          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1525          	}	
 1526          	СОСТ КонтрольВыключения{
 1527          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1528          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1529          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1530          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1531          				}
 1532          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1533          		}
 1534          	} 
 1535           
 1536          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1537          	СОСТ НарушениеСвязи {
 1538          			ОШИБКА;  /*м б В НАЧАЛО   ????? подумать*/
 1539          	} 
 1540          }
 1541          
 1542          /*=============================================================*/
 1543          /*  Новый процесс 13 мая 2014                                  */
 1544          /*=============================================================*/
 1545          ПРОЦ ЧтениеДавленияВтрубеСидеростата{
 1546          ИЗ ПРОЦ Инициализация ФП_P_ВтрубеСидер,
 1547          					   Д_P_ВтрубеСидер,
 1548          					   К_Достоверности,
 1549          					   СвязьС_P_ВтрубеСидер;
 1550           СОСТ Начало {
 1551          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_P_ВтрубеСидер = ВКЛ;  /* для отладки без достоверностей*/ 
 1552          	ЕСЛИ (Д_P_ВтрубеСидер) {
 1553          		СвязьС_P_ВтрубеСидер = ЕСТЬ;
 1554          		ФП_P_ВтрубеСидер 	= GetFP_P_TRUBA();
 1555          		В СОСТ Начало;
 1556          	}
 1557          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1558           }
 1559          	СОСТ ПроверкаИдетЛиВакуумирование{
 1560          		СвязьС_P_ВтрубеСидер = НЕТ;	
 1561          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1562          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1563          	}	
 1564          	СОСТ КонтрольВыключения{
 1565          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1566          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1567          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1568          					СТОП;  /*процесс будет все равно остановлен при откате*/
 1569          				}
 1570          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1571          		}
 1572          	} 
 1573          
 1574          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1575          	СОСТ НарушениеСвязи {
 1576          			ОШИБКА;   /*если убрать рестарт, то надо идти в начало  !!!!!!!!!!!!!!!!*/
 1577          	} 
 1578          }
 1579          /*========================================================*/
 1580          /*                                                        */
 1581          /*==            ЧТЕНИЕ ЛОГИЧЕСКИХ ПАРАМЕТРОВ            ==*/
 1582          /*                                                        */
 1583          /*========================================================*/
 1584          /*=============================================================*/
 1585          /*  Новые процессы 18 августа 2014       */
 1586          /*=============================================================*/
 1587          /*=============================================================*/
 1588          /*  Новый процесс 18 августа 2014       */
 1589          /*=============================================================*/
 1590          ПРОЦ ПроверкаСвязиС_РегуляторомУровня{
 1591          ИЗ ПРОЦ Инициализация К_ПИТ_РЕГ_УР,
 1592          					  Д_ПИТ_РЕГ_УР,
 1593          					  К_Достоверности,
 1594          					  СвязьС_РегуляторомУровня;
 1595           СОСТ Начало {
 1596          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР;  /* для отладки без достоверностей*/ 
 1597          	ЕСЛИ (Д_ПИТ_РЕГ_УР) {
 1598          		СвязьС_РегуляторомУровня = ЕСТЬ;		/* это тайминизированный параметр пока не используется*/
 1599          		В СОСТ Начало;
 1600          	}
 1601          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1602           }
 1603           СОСТ ПроверкаИдетЛиВакуумирование{	
 1604          		СвязьС_РегуляторомУровня = НЕТ;
 1605          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1606          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1607          	}
 1608          	СОСТ КонтрольВыключения{
 1609          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1610          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1611          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1612          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1613          				}
 1614          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1615          		}
 1616          	} 
 1617          
 1618          }
 1619          /* =============================================  */
 1620          ПРОЦ ПроверкаСвязиС_РегуляторомТемпературы{
 1621          ИЗ ПРОЦ Инициализация К_ПИТ_РЕГ_Т,
 1622          					  Д_ПИТ_РЕГ_Т,
 1623          					  К_Достоверности,
 1624          					  СвязьС_РегуляторомТемпературы;
 1625           СОСТ Начало {
 1626          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т;  /* для отладки без достоверностей*/ 
 1627          	ЕСЛИ (Д_ПИТ_РЕГ_Т) {
 1628          		СвязьС_РегуляторомТемпературы = ЕСТЬ;		/* это тайминизированный параметр*/
 1629          		В СОСТ Начало;
 1630          	}
 1631          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1632           }
 1633          
 1634          	СОСТ ПроверкаИдетЛиВакуумирование{
 1635          		СвязьС_РегуляторомТемпературы = НЕТ;	
 1636          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1637          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1638          	}
 1639          	СОСТ КонтрольВыключения{
 1640          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1641          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1642          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1643          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1644          				}
 1645          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1646          		}
 1647          	} 
 1648          
 1649          }
 1650          
 1651          
 1652          /* =============================================  */
 1653          ПРОЦ ПроверкаСвязиС_Вентилятором{
 1654          ИЗ ПРОЦ Инициализация К_ПИТ_ВЕНТИЛЯТОРА,
 1655          					  Д_ПИТ_ВЕНТИЛЯТОРА,
 1656          					  К_Достоверности,
 1657          					  СвязьС_Вентилятором;
 1658           СОСТ Начало {
 1659          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА;  /* для отладки без достоверностей*/ 
 1660          	ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА) {
 1661          		СвязьС_Вентилятором = ЕСТЬ;		/* это тайминизированный параметр*/
 1662          		В СОСТ Начало;
 1663          	}
 1664          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1665           }
 1666           
 1667          	СОСТ ПроверкаИдетЛиВакуумирование{
 1668          		СвязьС_Вентилятором = НЕТ;	
 1669          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1670          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1671          	}
 1672          	СОСТ КонтрольВыключения{
 1673          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1674          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1675          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1676          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1677          				}
 1678          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1679          		}
 1680          	} 
 1681          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1682           
 1683          }
 1684          /* =============================================  */
 1685          ПРОЦ ПроверкаСвязиС_НасососомОхлажденияДвигателя{
 1686          ИЗ ПРОЦ Инициализация Д_ПИТ_НАСОС_ОХЛ,
 1687          					  К_Достоверности,
 1688          					  СвязьС_НасосомОхлаждения;
 1689           СОСТ Начало {
 1690          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ;  /* для отладки без достоверностей*/ 
 1691          	ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ) {
 1692          		СвязьС_НасосомОхлаждения = ЕСТЬ;		/* это тайминизированный параметр*/
 1693          		В СОСТ Начало;
 1694          	}
 1695          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1696           }
 1697          
 1698          	СОСТ ПроверкаИдетЛиВакуумирование{
 1699          		СвязьС_НасосомОхлаждения = НЕТ;	
 1700          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1701          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1702          	}
 1703          	СОСТ КонтрольВыключения{
 1704          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1705          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1706          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1707          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1708          				}
 1709          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1710          		}
 1711          	} 
 1712          }
 1713          /* =============================================  */
 1714          ПРОЦ ПроверкаСвязиС_КонцевикомОткрытияЗатвораВакуумного{
 1715          ИЗ ПРОЦ Инициализация Д_ОТКР_ЗАТВОР_ВАК,
 1716          					  К_Достоверности,
 1717          					  СвязьС_КонцевикомОткрытияЗВ;
 1718           СОСТ Начало {
 1719          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ОТКР_ЗАТВОР_ВАК;  /* для отладки без достоверностей*/ 
 1720          	ЕСЛИ (Д_ОТКР_ЗАТВОР_ВАК) {
 1721          		СвязьС_КонцевикомОткрытияЗВ = ЕСТЬ;		/* это тайминизированный параметр*/
 1722          		В СОСТ Начало;
 1723          	}
 1724          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1725           }
 1726          	СОСТ ПроверкаИдетЛиВакуумирование{
 1727          		СвязьС_КонцевикомОткрытияЗВ = НЕТ;	
 1728          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1729          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1730          	}
 1731          	СОСТ КонтрольВыключения{
 1732          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1733          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1734          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1735          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1736          				}
 1737          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1738          		}
 1739          	} 
 1740          }
 1741          /* =============================================  */
 1742          ПРОЦ ПроверкаСвязиС_КонцевикомЗакрытияЗатвораВакуумного{
 1743          ИЗ ПРОЦ Инициализация Д_ЗАКР_ЗАТВОР_ВАК,
 1744          					  К_Достоверности,
 1745          					  СвязьС_КонцевикомЗакрытияЗВ;
 1746           СОСТ Начало {
 1747          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ЗАКР_ЗАТВОР_ВАК;  /* для отладки без достоверностей*/ 
 1748          	ЕСЛИ (Д_ЗАКР_ЗАТВОР_ВАК) {
 1749          		СвязьС_КонцевикомЗакрытияЗВ = ЕСТЬ;		/* это тайминизированный параметр*/
 1750          		В СОСТ Начало;
 1751          	}
 1752          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1753           }
 1754           
 1755          	СОСТ ПроверкаИдетЛиВакуумирование{
 1756          		СвязьС_КонцевикомЗакрытияЗВ = НЕТ;	
 1757          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1758          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1759          	}
 1760          	СОСТ КонтрольВыключения{
 1761          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1762          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1763          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1764          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1765          				}
 1766          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1767          		}
 1768          	} 
 1769          }
 1770          /* =============================================  */
 1771          ПРОЦ ПроверкаСвязиС_КонцевикомСапуна{
 1772          ИЗ ПРОЦ Инициализация Д_САПУН,
 1773          					  К_Достоверности,
 1774          					  СвязьС_КонцевикомСапуна;
 1775           СОСТ Начало {
 1776          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН;  /* для отладки без достоверностей*/ 
 1777          	ЕСЛИ (Д_САПУН) {
 1778          		СвязьС_КонцевикомСапуна = ЕСТЬ;		/* это тайминизированный параметр*/
 1779          		В СОСТ Начало;
 1780          	}
 1781          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1782           }
 1783          
 1784          	СОСТ ПроверкаИдетЛиВакуумирование{
 1785          		СвязьС_КонцевикомСапуна = НЕТ;	
 1786          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1787          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1788          	}
 1789          	СОСТ КонтрольВыключения{
 1790          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1791          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1792          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1793          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1794          				}
 1795          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1796          		}
 1797          	} 
 1798          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1799          	СОСТ НарушениеСвязи {
 1800          			ОШИБКА;   /*если убрать рестарт, то надо идти в начало везде для чтения !!!!!!!!!!!!!!!!*/
 1801          	} 
 1802          }
 1803          /* =============================================  */
 1804          ПРОЦ ПроверкаСвязиС_ПитаниемПлавногоПуска{
 1805          ИЗ ПРОЦ Инициализация Д_ПИТ_УПП_ВАК_НАСОСА,
 1806          					  К_Достоверности,
 1807          					  СвязьС_ПитаниемПлавногоПуска;
 1808           СОСТ Начало {
 1809          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА;  /* для отладки без достоверностей*/ 
 1810          	ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА) {
 1811          		СвязьС_ПитаниемПлавногоПуска = ЕСТЬ;		/* это тайминизированный параметр*/
 1812          		В СОСТ Начало;
 1813          	}
 1814          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1815           }
 1816          	СОСТ ПроверкаИдетЛиВакуумирование{
 1817          		СвязьС_ПитаниемПлавногоПуска = НЕТ;	
 1818          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1819          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1820          	}
 1821          	СОСТ КонтрольВыключения{
 1822          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1823          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1824          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1825          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1826          				}
 1827          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1828          		}
 1829          	} 
 1830          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1831          	СОСТ НарушениеСвязи {
 1832          			ОШИБКА;   /*если убрать рестарт, то надо идти в начало везде для чтения !!!!!!!!!!!!!!!!*/
 1833          	} 
 1834          }
 1835          /* =============================================  */
 1836          ПРОЦ ПроверкаСвязиС_ПлавнымПуском{
 1837          ИЗ ПРОЦ Инициализация Д_УСТР_ПЛАВ_ПУСКА,
 1838          					  К_Достоверности,
 1839          					  СвязьС_ПлавнымПуском;
 1840           СОСТ Начало {
 1841          	ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА;  /* для отладки без достоверностей*/ 
 1842          	ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА) {
 1843          		СвязьС_ПлавнымПуском = ЕСТЬ;		/* это тайминизированный параметр*/
 1844          		В СОСТ Начало;
 1845          	}
 1846          	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ; 
 1847           }
 1848          
 1849          	СОСТ ПроверкаИдетЛиВакуумирование{
 1850          		СвязьС_ПлавнымПуском = НЕТ;	
 1851          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Начало;
 1852          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 1853          	}
 1854          	СОСТ КонтрольВыключения{
 1855          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 1856          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 1857          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 1858          					СТОП;  /* процесс будет все равно остановлен при откате*/
 1859          				}
 1860          				ИНАЧЕ  В СОСТ Начало;  /* это значит, что нет необходимости останова всех процессов*/
 1861          		}
 1862          	} 
 1863          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 1864          	СОСТ НарушениеСвязи {
 1865          			ОШИБКА;   /*если убрать рестарт, то надо идти в начало везде для чтения !!!!!!!!!!!!!!!!*/
 1866          	} 
 1867          }
 1868          
 1869          
 1870          
 1871          
 1872          /*=============================================================*/
 1873          /*=         РЕГУЛЯТОР ТРАФИКА                    ==============*/
 1874          /*=         ЕСЛИ КАНАЛЫ ЗАБИТЫ, ТО                           ==*/
 1875          /*=         УВЕЛИЧИВАЕТСЯ ВРЕМЯ МЕЖДУ                        ==*/
 1876          /*=         СЕРВЕРОМ И ВЫДАЧЕЙ В GUI                         ==*/
 1877          /*=         ФАКТИЧЕСКИХ ПАРАМЕТРОВ                           ==*/
 1878          /*= GetOutMsgNumber_GUI читает число сообщ. в выходн. буфере ==*/
 1879          /*=============================================================*/
 1880          ПРОЦ РЕГУЛЯТОР_ТРАФИКА{
 1881           ИЗ ПРОЦ Инициализация ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 1882           СОСТ Начало{
 1883              ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА = GetOutMsgNumber_GUI()/5 + 1;  /*динамический таймаут*/
 1884              ЗАЦИКЛИТЬ;
 1885           }
 1886          }
 1887          
 1888          /*==============================================*/
 1889          /*==============================================*/
 1890          /*=                                            =*/
 1891          /*=      ПРОЦЕСС ЧтениеКольцевогоБуфера        =*/
 1892          /*=                                            =*/
 1893          /*==============================================*/
 1894          /*==============================================*/
 1895          ПРОЦ ЧтениеКольцевогоБуфера{
 1896          ИЗ ПРОЦ Инициализация
 1897                                  КодСобытия_от_ГУИ;       /* */
 1898          
 1899           СОСТ Начало{
 1900              /*  читаем код и параметр события из кольцевого буфера в структуру */
 1901              ЕСЛИ (GetNextMsgGUI()) {
 1902                КодСобытия_от_ГУИ = GetMsgGUICode();
 1903                      ЕСЛИ ((КодСобытия_от_ГУИ >= КОМ_ГУИ_ОТКР_ЗАТВОР_ВАК) &&
 1904                            (КодСобытия_от_ГУИ <= КОМАНДЫ_ОТ_ГУИ)) {
 1905          				СТАРТ ПРОЦ ОбработкаКомандУправления_от_ГУИ;
 1906          				В СОСТ КонтрольВыполненияК;
 1907                      } 
 1908          			ИНАЧЕ ЕСЛИ ((КодСобытия_от_ГУИ >= ИЗМН_НП_1) &&
 1909                                   (КодСобытия_от_ГУИ <= ИЗМН_НП_N)) {
 1910                               СТАРТ ПРОЦ ОбработкаКомандИзмененияНП_от_ГУИ;
 1911                               В СОСТ КонтрольИзмененияНП;
 1912          			}
 1913          			ИНАЧЕ В СОСТ НекорректноеСобытие;
 1914              }
 1915           } 
 1916           
 1917           СОСТ КонтрольВыполненияК{
 1918              ЕСЛИ(ПРОЦ ОбработкаКомандУправления_от_ГУИ В СОСТ ПАССИВНОЕ)
 1919              В СОСТ Начало;
 1920           }
 1921            СОСТ КонтрольИзмененияНП{
 1922              ЕСЛИ(ПРОЦ ОбработкаКомандИзмененияНП_от_ГУИ В СОСТ ПАССИВНОЕ)
 1923              В СОСТ Начало;
 1924           }
 1925            /*===== НЕНОРМАЛЬНЫЕ СИТУАЦИИ === */
 1926            СОСТ НекорректноеСобытие{
 1927               ЕСЛИ (SendMsgLongParamGUI(ПК_ГУИ_ОШИБКА_КОДА_КОМАНДЫ_ОТ_ГУИ, КодСобытия_от_ГУИ))
 1928                 В СОСТ Начало;
 1929               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 1930           }
 1931          
 1932           СОСТ НарушениеСвязи {
 1933          	В СОСТ Начало;
 1934               СТОП;   /* м.б. в начало?!!!!!!!!!!!!!! что я и сделал*/
 1935           }
 1936          }
 1937          /*===================================================*/
 1938          /*==                                               ==*/
 1939          /*==  ПРОЦЕСС ИЗМЕНЕНИЯ НАСТРОЕЧНЫХ ПАРАМЕТРОВ     ==*/
 1940          /*==                                               ==*/
 1941          /*===================================================*/
 1942          ПРОЦ ОбработкаКомандИзмененияНП_от_ГУИ{
 1943          ИЗ ПРОЦ Инициализация 	КодСобытия_от_ГУИ,
 1944          						КодСобытия_к_ГУИ,
 1945          						НП_ЗД_Pатмосф,
 1946          						НП_ЗД_P_ВтрубеСидер,
 1947          						НП_ЗД_P_ВбакеКомпрессора,
 1948          						НП_ЗД_T_ВрубашкеНижняя,
 1949          						НП_ЗД_T_ВрубашкеВерхняя,
 1950          						НП_ЗД_T_ВбакеНижняя,
 1951          						НП_ЗД_T_ВбакеВерхняя,
 1952          						
 1953          						НП_ЗД_Гист_T_Вбаке,  			/* добавлено 3 февраля 2014 */
 1954          						НП_ЗД_Гист_T_Врубашке,  		/* добавлено 3 февраля 2014 */
 1955          						НП_ЗД_Гист_P_ВбакеКомпрессора,  /* добавлено 3 февраля 2014 */
 1956          						НП_ЗД_Гист_P_ВтрубеСидерВерх,  	/* добавлено 3 февраля 2014 */
 1957          						НП_ЗД_Гист_P_ВтрубеСидерНиж,		 /* добавлено 3 февраля 2014 */
 1958          						
 1959          						НП_ЗД_ПериодаКонтрP_ПриОткачке,  /* добавлено 7 января 2014 */
 1960          						НП_ЗД_ПериодаКонтрP_ПриНатекании;  /* добавлено 7 января 2014 */
 1961          						
 1962          						
 1963          ПЛАВ ЛП_Параметр_к_ПИВ ЛОКАЛ;
 1964           СОСТ Анализ{
 1965              РАЗБОР (КодСобытия_от_ГУИ) {
 1966          	    СЛУЧАЙ ИЗМН_НП_ЗД_Pатмосф:
 1967                    НП_ЗД_Pатмосф  = GetFloatParamGUI();
 1968                    КодСобытия_к_ГУИ = ИЗМН_НП_ЗД_Pатмосф;
 1969                    В СОСТ ПодтверждениеИзмененияНП;
 1970          			КОНЕЦ;
 1971          	    СЛУЧАЙ ИЗМН_НП_ЗД_P_ВбакеКомпрессора:
 1972          		   НП_ЗД_P_ВбакеКомпрессора  = GetFloatParamGUI();
 1973                    КодСобытия_к_ГУИ = НП_ЗД_P_ВбакеКомпрессора;
 1974                    В СОСТ ПодтверждениеИзмененияНП;		   
 1975          			КОНЕЦ;
 1976          	    СЛУЧАЙ ИЗМН_НП_ЗД_P_ВтрубеСидер:
 1977          		   НП_ЗД_P_ВтрубеСидер  = GetFloatParamGUI();
 1978                    КодСобытия_к_ГУИ = НП_ЗД_P_ВтрубеСидер;
 1979                    В СОСТ ПодтверждениеИзмененияНП;		   
 1980          			КОНЕЦ;
 1981          	    СЛУЧАЙ ИЗМН_НП_ЗД_T_ВрубашкеНижняя:		/* добавлено 20 января 2014 */
 1982          		   НП_ЗД_T_ВрубашкеНижняя  = GetFloatParamGUI();
 1983                    КодСобытия_к_ГУИ = НП_ЗД_T_ВрубашкеНижняя;
 1984                    В СОСТ ПодтверждениеИзмененияНП;		   
 1985          			КОНЕЦ;
 1986          	    СЛУЧАЙ ИЗМН_НП_ЗД_T_ВрубашкеВерхняя:		/* добавлено 20 января 2014 */
 1987          		   НП_ЗД_T_ВрубашкеВерхняя  = GetFloatParamGUI();
 1988                    КодСобытия_к_ГУИ = НП_ЗД_T_ВрубашкеВерхняя;
 1989                    В СОСТ ПодтверждениеИзмененияНП;		   
 1990          			КОНЕЦ;			
 1991          	    СЛУЧАЙ ИЗМН_НП_ЗД_T_ВбакеНижняя:	/* добавлено 20 января 2014 */
 1992          		   НП_ЗД_T_ВбакеНижняя  = GetFloatParamGUI();
 1993                    КодСобытия_к_ГУИ = НП_ЗД_T_ВбакеНижняя;
 1994                    В СОСТ ПодтверждениеИзмененияНП;		   
 1995          			КОНЕЦ;			
 1996          	    СЛУЧАЙ ИЗМН_НП_ЗД_T_ВбакеВерхняя:	/* добавлено 20 января 2014 */
 1997          		   НП_ЗД_T_ВбакеВерхняя  = GetFloatParamGUI();
 1998                    КодСобытия_к_ГУИ = НП_ЗД_T_ВбакеВерхняя;
 1999                    В СОСТ ПодтверждениеИзмененияНП;		   
 2000          			КОНЕЦ;
 2001          
 2002          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_T_Вбаке:	/* добавлено 3 февраля 2014 */
 2003          		   НП_ЗД_Гист_T_Вбаке  = GetFloatParamGUI();
 2004                    КодСобытия_к_ГУИ = НП_ЗД_Гист_T_Вбаке;
 2005                    В СОСТ ПодтверждениеИзмененияНП;		   
 2006          			КОНЕЦ;	
 2007          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_T_Врубашке:	/* добавлено 3 февраля 2014 */
 2008          		   НП_ЗД_Гист_T_Врубашке  = GetFloatParamGUI();
 2009                    КодСобытия_к_ГУИ = НП_ЗД_Гист_T_Врубашке;
 2010                    В СОСТ ПодтверждениеИзмененияНП;		   
 2011          			КОНЕЦ;	
 2012          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_P_ВбакеКомпрессора:	/* добавлено 3 февраля 2014 */
 2013          		   НП_ЗД_Гист_P_ВбакеКомпрессора  = GetFloatParamGUI();
 2014                    КодСобытия_к_ГУИ = НП_ЗД_Гист_P_ВбакеКомпрессора;
 2015                    В СОСТ ПодтверждениеИзмененияНП;		   
 2016          			КОНЕЦ;			
 2017          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_P_ВтрубеСидерВерх:	/* добавлено 3 февраля 2014 */
 2018          		   НП_ЗД_Гист_P_ВтрубеСидерВерх  = GetFloatParamGUI();
 2019                    КодСобытия_к_ГУИ = НП_ЗД_Гист_P_ВтрубеСидерВерх;
 2020                    В СОСТ ПодтверждениеИзмененияНП;		   
 2021          			КОНЕЦ;				
 2022          	    СЛУЧАЙ ИЗМН_НП_ЗД_Гист_P_ВтрубеСидерНиж:	/* добавлено 3 февраля 2014 */
 2023          		   НП_ЗД_Гист_P_ВтрубеСидерНиж  = GetFloatParamGUI();
 2024                    КодСобытия_к_ГУИ = НП_ЗД_Гист_P_ВтрубеСидерНиж;
 2025                    В СОСТ ПодтверждениеИзмененияНП;		   
 2026          			КОНЕЦ;
 2027          
 2028                 СЛУЧАЙ ИЗМН_НП_ЗД_ПериодаКонтрP_ПриОткачке:
 2029                    НП_ЗД_ПериодаКонтрP_ПриОткачке = GetLongParamGUI();
 2030                    КодСобытия_к_ГУИ = ИЗМН_НП_ЗД_ПериодаКонтрP_ПриОткачке;
 2031                    В СОСТ ПодтверждениеИзмененияНП;
 2032                    КОНЕЦ;
 2033          
 2034                 СЛУЧАЙ ИЗМН_НП_ЗД_ПериодаКонтрP_ПриНатекании:
 2035                    НП_ЗД_ПериодаКонтрP_ПриНатекании = GetLongParamGUI();
 2036                    КодСобытия_к_ГУИ = ИЗМН_НП_ЗД_ПериодаКонтрP_ПриНатекании;
 2037                    В СОСТ ПодтверждениеИзмененияНП;
 2038                    КОНЕЦ;
 2039          			
 2040          		УМОЛЧАНИЕ:
 2041                    В СОСТ НекорректноеСобытие;
 2042                    КОНЕЦ;
 2043              } /* конец разбора */
 2044          	СТОП;	
 2045          
 2046           }
 2047           СОСТ ПодтверждениеИзмененияНП{
 2048              ЕСЛИ (SendMsgLongParamGUI(КодСобытия_к_ГУИ, GetLongParamGUI())) СТОП;
 2049              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2050           }
 2051           /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2052           СОСТ НекорректноеСобытие {
 2053              ЕСЛИ (SendMsgLongParamGUI(ПК_ГУИ_ОШИБКА_КОДА_КОМАНДЫ_ОТ_ГУИ, КодСобытия_от_ГУИ))
 2054                   СТОП;
 2055              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2056           }
 2057            СОСТ НарушениеСвязи {
 2058              ОШИБКА;
 2059           }
 2060          }
 2061          /*=========================================*/
 2062          /*=                                       =*/
 2063          /*=     ОБРАБОТКА КОМАНД ОТ ГУИ           =*/
 2064          /*=                                       =*/
 2065          /*=========================================*/
 2066          ПРОЦ ОбработкаКомандУправления_от_ГУИ{
 2067          ИЗ ПРОЦ Инициализация
 2068          						/*	ТекущийРежим,*/
 2069                              КодСобытия_от_ГУИ,
 2070          					К_УСТР_ПЛАВ_ПУСКА,
 2071          					ФлагГотовУрВодыБО,
 2072          					ФП_T_Вбаке,
 2073          					К_ПИТ_ВЕНТИЛЯТОРА,
 2074          					К_ПИТ_НАСОС_ОХЛ,
 2075          					К_ОТКР_ЗАТВОР_ВАК,
 2076          					К_ЗАКР_ЗАТВОР_ВАК,
 2077          					К_САПУН,
 2078          					ФлагГотовTВодыРО,
 2079          					ФП_P_ВтрубеСидер,
 2080          					ФП_P_Впатрубке,
 2081          					НП_ЗД_Pатмосф,
 2082          					К_Достоверности,
 2083          					
 2084          					СостояниеУСТР_ПЛАВ_ПУСКА;
 2085          ЦЕЛ ЛП_КодСообщенияДляGUI ЛОКАЛ;
 2086          
 2087           СОСТ Анализ{
 2088              РАЗБОР (КодСобытия_от_ГУИ) {
 2089          
 2090          /*------------------------без условий ----------------------------------------------*/
 2091          	    СЛУЧАЙ КОМ_ГУИ_ОТКР_ЗАТВОР_ВАК:
 2092          			СТАРТ ПРОЦ ОТКР_ЗАТВОР_ВАК;		
 2093          		КОНЕЦ;		
 2094          /*шшшшшшшшшшшшшшшшшшшшшшш условия открытия  шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2095          /*	    СЛУЧАЙ КОМ_ГУИ_ОТКР_ЗАТВОР_ВАК:															*/
 2096          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { 	*/			/* вакуумирования нет */
 2097          /*				ЕСЛИ (ФП_P_ВтрубеСидер >= ФП_P_Впатрубке) */  		/* можно открывать */
 2098          /*					СТАРТ ПРОЦ ОТКР_ЗАТВОР_ВАК;  												*/
 2099          /*				ИНАЧЕ {																			*/
 2100          /*					ЛП_КодСообщенияДляGUI = ПК_ГУИ_НЕТ_УСЛОВИЙ_ДЛЯ_ВЫПОЛНЕНИЯ_КОМАНДЫ;			*/
 2101          /*					В СОСТ ПередачаСообщенияСПараметромГУИ;										*/
 2102          /*				}																				*/	
 2103          /*		  } ИНАЧЕ {																				*/
 2104          /*		    ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;		*/
 2105          /*			В СОСТ ПередачаСообщенияСПараметромГУИ;												*/
 2106          /*		  }																						*/
 2107          /*		КОНЕЦ;  																				*/
 2108          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2109          
 2110          /*------------------------без условий ----------------------------------------------*/																				
 2111          	    СЛУЧАЙ КОМ_ГУИ_ЗАКР_ЗАТВОР_ВАК:
 2112          			СТАРТ ПРОЦ ЗАКР_ЗАТВОР_ВАК; 		
 2113          			КОНЕЦ;		
 2114          /*шшшшшшшшшшшшшшшшшшшшшшш условия закрытия  шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2115          /*	    СЛУЧАЙ КОМ_ГУИ_ЗАКР_ЗАТВОР_ВАК:															*/
 2116          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { */ 			/* вакуумирование не включено*/
 2117          /*				СТАРТ ПРОЦ ЗАКР_ЗАТВОР_ВАК; 													*/
 2118          /*		  	} ИНАЧЕ {																			*/
 2119          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2120          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2121          /*		 	}																					*/
 2122          /*		КОНЕЦ;																					*/
 2123          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2124          			
 2125          /*------------------------без условий ----------------------------------------------*/
 2126          	    СЛУЧАЙ КОМ_ГУИ_ОТКР_САПУН:
 2127          			СТАРТ ПРОЦ ОТКР_САПУН;		
 2128          		КОНЕЦ;		
 2129          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2130          /*	    СЛУЧАЙ КОМ_ГУИ_ОТКР_САПУН:									   					*/
 2131          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2132          /*				СТАРТ ПРОЦ ОТКР_САПУН; 													*/
 2133          /*			} ИНАЧЕ {																			*/
 2134          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2135          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2136          /*			}																					*/
 2137          /*		КОНЕЦ;																					*/
 2138          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2139          		
 2140          /*------------------------без условий ----------------------------------------------*/
 2141          	    СЛУЧАЙ КОМ_ГУИ_ЗАКР_САПУН:
 2142          			СТАРТ ПРОЦ ЗАКР_САПУН;
 2143          		КОНЕЦ; 																			
 2144          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2145          /*	    СЛУЧАЙ КОМ_ГУИ_ЗАКР_САПУН:									   					*/
 2146          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2147          /*				СТАРТ ПРОЦ ЗАКР_САПУН; 													*/
 2148          /*			} ИНАЧЕ {																			*/
 2149          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2150          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2151          /*			}																					*/
 2152          /*		КОНЕЦ;																					*/
 2153          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/			  
 2154          
 2155          /*------------------------без условий ----------------------------------------------*/
 2156          		СЛУЧАЙ КОМ_ГУИ_ВКЛ_УСТР_ПЛАВ_ПУСКА:
 2157          			СТАРТ ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА;
 2158          		КОНЕЦ;
 2159          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2160          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_УСТР_ПЛАВ_ПУСКА:									   					*/
 2161          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2162          /*				СТАРТ ВКЛ_УСТР_ПЛАВ_ПУСКА; 													*/
 2163          /*			} ИНАЧЕ {																			*/
 2164          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2165          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2166          /*			}																					*/
 2167          /*		КОНЕЦ;	
 2168          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2169          
 2170          /*------------------------без условий ----------------------------------------------*/	
 2171          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_УСТР_ПЛАВ_ПУСКА: 
 2172          			СТАРТ ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА;
 2173                   КОНЕЦ;			
 2174          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2175          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_УСТР_ПЛАВ_ПУСКА:									   					*/
 2176          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2177          /*				СТАРТ ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА; 													*/
 2178          /*			} ИНАЧЕ {																			*/
 2179          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2180          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2181          /*			}																					*/
 2182          /*		КОНЕЦ;	
 2183          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2184          
 2185          
 2186          /*------------------------без условий ----------------------------------------------*/		  
 2187          		СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_УПП_ВАК_НАСОСА:   
 2188          			СТАРТ ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА;   
 2189                    КОНЕЦ;
 2190          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2191          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_УПП_ВАК_НАСОСА:		  							   					*/ 
 2192          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2193          /*				СТАРТ ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА; 													*/ 
 2194          /*			} ИНАЧЕ {																			*/
 2195          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2196          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2197          /*			}																					*/
 2198          /*		КОНЕЦ;																					*/
 2199          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/			  
 2200          
 2201          
 2202          /*------------------------без условий ----------------------------------------------*/		  
 2203          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_УПП_ВАК_НАСОСА:  
 2204          			СТАРТ ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА;  
 2205                    КОНЕЦ;
 2206          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2207          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_УПП_ВАК_НАСОСА:									   					*/ 
 2208          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2209          /*				СТАРТ ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА; 													*/ 
 2210          /*			} ИНАЧЕ {																			*/
 2211          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2212          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2213          /*			}																					*/
 2214          /*		КОНЕЦ;	
 2215          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2216          
 2217          	  
 2218          /*------------------------без условий ----------------------------------------------*/
 2219          	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_ВЕНТИЛЯТОР:
 2220          			СТАРТ ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР;		
 2221                    КОНЕЦ;
 2222          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2223          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_ВЕНТИЛЯТОР:									   					*/
 2224          /*		  	ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		   /*вакуумирования нет 		*/
 2225          /*				СТАРТ ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР; 													*/
 2226          /*			} ИНАЧЕ {																			*/
 2227          /*				ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2228          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2229          /*			}																					*/
 2230          /*		КОНЕЦ;																					*/
 2231          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2232          
 2233          
 2234          /*------------------------без условий ----------------------------------------------*/  
 2235          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_ВЕНТИЛЯТОР:
 2236          			СТАРТ ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР;	
 2237                    КОНЕЦ;
 2238          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2239          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_ВЕНТИЛЯТОР:												    	*/
 2240          /*			ЕСЛИ (СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */		      	  /* вакуумирования нет */
 2241          /*				СТАРТ ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР; 													*/
 2242          /*			} ИНАЧЕ { */ 											      /* идет вакуумирование*/
 2243          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2244          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2245          /*			} 																					*/
 2246          /*		КОНЕЦ;   																				*/
 2247          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2248          
 2249          
 2250          /*------------------------без условий ----------------------------------------------*/	  
 2251          		СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_Т:
 2252          			СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_Т;
 2253                    КОНЕЦ;
 2254          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2255          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_Т:															*/	  
 2256          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */					 /* вакуумирования нет */
 2257          /*				ЕСЛИ (ФП_T_Вбаке > 0.0){ 														*/													 
 2258          /*					ЕСЛИ (ФлагГотовУрВодыБО == НОРМА) {											*/
 2259          /*						СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_Т;												*/ 
 2260          /*					} ИНАЧЕ {																	*/
 2261          /*						 ЛП_КодСообщенияДляGUI = ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВНЕ_НОРМЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ; */
 2262          /*						 В СОСТ ПередачаСообщенияСПараметромГУИ;								*/
 2263          /*					}																			*/
 2264          /*				} ИНАЧЕ {																		*/
 2265          /*					ЛП_КодСообщенияДляGUI = ПК_ГУИ_ОТРИЦАТЕЛЬНАЯ_ТЕМПЕРАТУРА_ВОДЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;*/
 2266          /*					В СОСТ ПередачаСообщенияСПараметромГУИ;										*/				
 2267          /*				}																				*/
 2268          /*			} ИНАЧЕ {  */ 												/* идет вакуумирование*/
 2269          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2270          /*			В СОСТ ПередачаСообщенияСПараметромГУИ;												*/
 2271          /*			}																					*/
 2272          /*		КОНЕЦ;																					*/ 
 2273          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/	
 2274          
 2275          	  
 2276          /*------------------------без условий ----------------------------------------------*/	 
 2277          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_РЕГ_Т:
 2278          			СТАРТ ПРОЦ ВЫК_ПИТ_РЕГ_Т;
 2279                  КОНЕЦ;			
 2280          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2281          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_РЕГ_Т:															*/
 2282          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */ 		/* вакуумирование не включено*/
 2283          /*				СТАРТ ПРОЦ ВЫК_ПИТ_РЕГ_Т;														*/
 2284          /*		  	} ИНАЧЕ { */  										/* идет вакуумирование*/
 2285          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2286          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2287          /*			}																					*/
 2288          /*          КОНЕЦ;																				*/
 2289          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2290          
 2291          /*------------------------без условий ----------------------------------------------*/
 2292          	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_УР:
 2293          		  	СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_УР;
 2294                  КОНЕЦ;
 2295          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		  
 2296          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_РЕГ_УР: 															*/
 2297          /*		  	ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { */  	/* вакуумирование не включено*/
 2298          /*				СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_УР;														*/
 2299          /*		  	} ИНАЧЕ { */  									/* идет вакуумирование*/
 2300          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2301          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2302          /*		  	} 																					*/
 2303          /*        КОНЕЦ;																				*/
 2304          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2305          
 2306          
 2307          /*------------------------без условий ----------------------------------------------*/
 2308          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_РЕГ_УР:
 2309          		  	СТАРТ ПРОЦ ВЫК_ПИТ_РЕГ_УР;
 2310                  КОНЕЦ;		
 2311          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2312          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_РЕГ_УР:															*/
 2313          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { */  		/* вакуумирование не включено*/
 2314          /*				СТАРТ ПРОЦ ВЫК_ПИТ_РЕГ_УР;														*/
 2315          /*		  	} ИНАЧЕ {  */							 /* идет вакуумирование*/
 2316          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2317          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2318          /*		  	} 																					*/
 2319          /*		  КОНЕЦ;																				*/
 2320          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2321          
 2322          /*------------------------без условий ----------------------------------------------*/
 2323          	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_НАС_ОХЛ:
 2324          			СТАРТ ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;
 2325          		  КОНЕЦ;
 2326          /*шшшшшшшшшшшшшшшшшшшшшшш условия включения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2327          /*	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ПИТ_НАС_ОХЛ:															*/	  
 2328          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) {  */					 /* вакуумирования нет */
 2329          /*				ЕСЛИ (ФП_T_Вбаке > 0.0){ 														*/													 
 2330          /*					ЕСЛИ (ФлагГотовУрВодыБО == НОРМА) {											*/
 2331          /*						СТАРТ ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;												*/ 
 2332          /*					} ИНАЧЕ {																	*/
 2333          /*						 ЛП_КодСообщенияДляGUI = ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВНЕ_НОРМЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ; */
 2334          /*						 В СОСТ ПередачаСообщенияСПараметромГУИ;								*/
 2335          /*					}																			*/
 2336          /*				} ИНАЧЕ {																		*/
 2337          /*					ЛП_КодСообщенияДляGUI = ПК_ГУИ_ОТРИЦАТЕЛЬНАЯ_ТЕМПЕРАТУРА_ВОДЫ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;*/
 2338          /*					В СОСТ ПередачаСообщенияСПараметромГУИ;										*/				
 2339          /*				}																				*/
 2340          /*			} ИНАЧЕ {  */ 												/* идет вакуумирование*/
 2341          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2342          /*			В СОСТ ПередачаСообщенияСПараметромГУИ;												*/
 2343          /*			}																					*/
 2344          /*		КОНЕЦ;	
 2345          
 2346          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2347          
 2348          /*------------------------без условий ----------------------------------------------*/
 2349          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_НАС_ОХЛ:		  
 2350          		  	СТАРТ ПРОЦ ВЫК_ПИТ_НАС_ОХЛ;		  
 2351          		КОНЕЦ;		  
 2352          /*шшшшшшшшшшшшшшшшшшшшшшш условия выключения шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/		
 2353          /*	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ПИТ_НАС_ОХЛ:															*/
 2354          /*			ЕСЛИ(СостояниеУСТР_ПЛАВ_ПУСКА == ВЫК) { */  		/* вакуумирование не включено*/
 2355          /*				СТАРТ ПРОЦ ВЫК_ПИТ_НАС_ОХЛ;														*/
 2356          /*		  	} ИНАЧЕ {  */							 /* идет вакуумирование*/
 2357          /*		    	ЛП_КодСообщенияДляGUI = ПК_ГУИ_ИДЕТ_ВАКУУМИРОВАНИЕ_ОТКАЗ_ВЫПОЛНЕНИЯ_КОМАНДЫ;	*/
 2358          /*				В СОСТ ПередачаСообщенияСПараметромГУИ;											*/
 2359          /*		  	} 																					*/
 2360          /*		  КОНЕЦ;																				*/
 2361          /*шшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшшш*/
 2362          
 2363          		  
 2364          	    СЛУЧАЙ КОМ_ГУИ_ВКЛ_ВАКУУМНЫЙ_НАСОС:   /*  данной кнопки нет и не надо */
 2365                    СТАРТ ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС; 
 2366                    КОНЕЦ;  
 2367          	    СЛУЧАЙ КОМ_ГУИ_ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ:  /*  14 декабря */
 2368          			К_Достоверности = Проверяются; 			/* есть проверка на достоверность */
 2369          			СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ;  /*! 12 декабря*/
 2370                    КОНЕЦ;  
 2371          
 2372          		  СЛУЧАЙ КОМ_ГУИ_ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ:   /* достигает вакуума и выключает вак. насос и через 30 минут снова включает, если ва 2373          куума недостаточно */
 2374          			К_Достоверности = Проверяются; 			/* есть проверка на достоверность */         
 2375          			СТАРТ ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ;
 2376                    КОНЕЦ;
 2377          		  
 2378          		УМОЛЧАНИЕ:
 2379                    В СОСТ НекорректноеСобытие;
 2380                    КОНЕЦ;
 2381              } /* конец разбора */
 2382          	СТОП;
 2383           }
 2384          
 2385          
 2386           /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2387           СОСТ НекорректноеСобытие {
 2388              ЕСЛИ (SendMsgLongParamGUI(ПК_ГУИ_ОШИБКА_КОДА_КОМАНДЫ_ОТ_ГУИ, КодСобытия_от_ГУИ))
 2389                   СТОП;   
 2390              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2391           }
 2392           СОСТ ПередачаСообщенияСПараметромГУИ{
 2393              ЕСЛИ (SendMsgLongParamGUI(ЛП_КодСообщенияДляGUI, КодСобытия_от_ГУИ))
 2394                  СТОП;
 2395              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2396           }
 2397          
 2398           СОСТ НарушениеСвязи {
 2399              ОШИБКА;
 2400           }
 2401          } /* конец ПРОЦ ОбработкаКомандУправленияРегуляторами_от_ПИВ   */
 2402          
 2403          /*====================================================*/
 2404          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2405          /*==           изменения ФП_P_ВбакеКомпрессора        */
 2406          /*====================================================*/
 2407          ПРОЦ КонтрольИзменения_ФП_P_ВбакеКомпрессора{
 2408           ИЗ ПРОЦ Инициализация  ФП_P_ВбакеКомпрессора, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2409           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2410           СОСТ Начало{
 2411              ЛП_Предыдущее = (!ФП_P_ВбакеКомпрессора);
 2412              В СЛЕДУЮЩЕЕ;
 2413           }
 2414           СОСТ КонтрольИзменения{
 2415              ЕСЛИ (ЛП_Предыдущее != ФП_P_ВбакеКомпрессора) {
 2416                   ЛП_Предыдущее = ФП_P_ВбакеКомпрессора;
 2417                   В СЛЕДУЮЩЕЕ;
 2418              }
 2419           }
 2420           СОСТ СообщОбИзменении{
 2421               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_P_ВбакеКомпрессора, ЛП_Предыдущее))
 2422                   В СОСТ ТрафикПауза;
 2423               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2424           }
 2425           СОСТ ТрафикПауза{
 2426              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2427          
 2428           }
 2429          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2430           СОСТ НарушениеСвязи{
 2431               В СОСТ КонтрольИзменения;
 2432           }
 2433          }
 2434          /* ПРОЦ КонтрольИзменения_ФП_P_ВбакеКомпрессора  */
 2435          
 2436          /*====================================================*/
 2437          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2438          /*==           изменения ИЗМН_ФП_P_Впатрубке     */
 2439          /*====================================================*/
 2440          ПРОЦ КонтрольИзменения_ФП_P_Впатрубке{
 2441           ИЗ ПРОЦ Инициализация  ФП_P_Впатрубке, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2442           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2443           СОСТ Начало{
 2444              ЛП_Предыдущее = (!ФП_P_Впатрубке);
 2445              В СЛЕДУЮЩЕЕ;
 2446           }
 2447           СОСТ КонтрольИзменения{
 2448              ЕСЛИ (ЛП_Предыдущее != ФП_P_Впатрубке) {
 2449                   ЛП_Предыдущее = ФП_P_Впатрубке;
 2450                   В СЛЕДУЮЩЕЕ;
 2451              }
 2452           }
 2453           СОСТ СообщОбИзменении{
 2454               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_P_Впатрубке, ЛП_Предыдущее))
 2455                   В СОСТ ТрафикПауза;
 2456               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2457           }
 2458           СОСТ ТрафикПауза{
 2459              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2460          
 2461           }
 2462          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2463           СОСТ НарушениеСвязи{
 2464               В СОСТ КонтрольИзменения;
 2465           }
 2466          }
 2467          /* ПРОЦ КонтрольИзменения_ФП_P_Впатрубке  */
 2468          
 2469          /*====================================================*/
 2470          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2471          /*==           изменения ИЗМН_ФП_T_Врубашке     */
 2472          /*====================================================*/
 2473          ПРОЦ КонтрольИзменения_ФП_T_Врубашке{
 2474           ИЗ ПРОЦ Инициализация  ФП_T_Врубашке, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2475           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2476           СОСТ Начало{
 2477              ЛП_Предыдущее = (!ФП_T_Врубашке);
 2478              В СЛЕДУЮЩЕЕ;
 2479           }
 2480           СОСТ КонтрольИзменения{
 2481              ЕСЛИ (ЛП_Предыдущее != ФП_T_Врубашке) {
 2482                   ЛП_Предыдущее = ФП_T_Врубашке;
 2483                   В СЛЕДУЮЩЕЕ;
 2484              }
 2485           }
 2486           СОСТ СообщОбИзменении{
 2487               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_T_Врубашке, ЛП_Предыдущее))
 2488                   В СОСТ ТрафикПауза;
 2489               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2490           }
 2491           СОСТ ТрафикПауза{
 2492              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2493          
 2494           }
 2495          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2496           СОСТ НарушениеСвязи{
 2497               В СОСТ КонтрольИзменения;
 2498           }
 2499          }
 2500          /* ПРОЦ КонтрольИзменения_ФП_T_Врубашке  */
 2501          
 2502          /*====================================================*/
 2503          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2504          /*==           изменения ИЗМН_ФП_T_Вбаке     */
 2505          /*====================================================*/
 2506          ПРОЦ КонтрольИзменения_ФП_T_Вбаке{
 2507           ИЗ ПРОЦ Инициализация  ФП_T_Вбаке, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2508           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2509           СОСТ Начало{
 2510              ЛП_Предыдущее = (!ФП_T_Вбаке);
 2511              В СЛЕДУЮЩЕЕ;
 2512           }
 2513           СОСТ КонтрольИзменения{
 2514              ЕСЛИ (ЛП_Предыдущее != ФП_T_Вбаке) {
 2515                   ЛП_Предыдущее = ФП_T_Вбаке;
 2516                   В СЛЕДУЮЩЕЕ;
 2517              }
 2518           }
 2519           СОСТ СообщОбИзменении{
 2520               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_T_Вбаке, ЛП_Предыдущее))
 2521                   В СОСТ ТрафикПауза;
 2522               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2523           }
 2524           СОСТ ТрафикПауза{
 2525              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2526          
 2527           }
 2528          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2529           СОСТ НарушениеСвязи{
 2530               В СОСТ КонтрольИзменения;
 2531           }
 2532          }
 2533          /* ПРОЦ КонтрольИзменения_ФП_T_Вбаке  */
 2534          
 2535          /*====================================================*/
 2536          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2537          /*==           изменения ИЗМН_ФП_P_ВтрубеСидер     */
 2538          /*====================================================*/	
 2539           ПРОЦ КонтрольИзменения_ФП_P_ВтрубеСидер{
 2540           ИЗ ПРОЦ Инициализация  ФП_P_ВтрубеСидер, ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА;
 2541           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2542           СОСТ Начало{
 2543              ЛП_Предыдущее = (!ФП_P_ВтрубеСидер);
 2544              В СЛЕДУЮЩЕЕ;
 2545           }
 2546           СОСТ КонтрольИзменения{
 2547              ЕСЛИ (ЛП_Предыдущее != ФП_P_ВтрубеСидер) {
 2548                   ЛП_Предыдущее = ФП_P_ВтрубеСидер;
 2549                   В СЛЕДУЮЩЕЕ;
 2550              }
 2551           }
 2552           СОСТ СообщОбИзменении{
 2553               ЕСЛИ (SendMsgFloatParamGUI(ПК_ГУИ_ФП_P_ВтрубеСидер, ЛП_Предыдущее))
 2554                   В СОСТ ТрафикПауза;
 2555               ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2556           }
 2557           СОСТ ТрафикПауза{
 2558              ТАЙМАУТ ЗАДЕРЖКА_НА_РАЗГРУЗКУ_ТРАФИКА В СОСТ КонтрольИзменения;
 2559          
 2560           }
 2561          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2562           СОСТ НарушениеСвязи{
 2563               В СОСТ КонтрольИзменения;
 2564           }
 2565          }
 2566          /* ПРОЦ КонтрольИзменения_ФП_P_ВтрубеСидер  */   
 2567          
 2568          
 2569          /*====================================================*/
 2570          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2571          /*== 		Контроль Откачки в Трубе сидеростата 	==*/
 2572          /*====================================================*/
 2573          ПРОЦ КонтрольВеличиныОткачкиВауумнойТрубыСидеростата{
 2574          ИЗ ПРОЦ Инициализация 	ФлагОткачкиТрубыСидеростата,
 2575          						ФП_P_ВтрубеСидер;
 2576          ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 2577          /*  Вопрос от Татьяны: там Проверяется скорость откачки. Но если достигнута некая глубина вакуумирования,*/
 2578          /* скорость откачки становится маленькой. Тогда алгоритм все равно сообщает постоянно, */
 2579          /*в каком состоянии скорость откачки. Это нормально? */					
 2580           СОСТ Начало{
 2581          	ЛП_Предыдущее = ФП_P_ВтрубеСидер;
 2582          	ТАЙМАУТ ТАЙМАУТ_ЗАДЕРЖКА_НА_ОТКАЧКУ В СЛЕДУЮЩЕЕ;
 2583           }
 2584           СОСТ АнализОткачки{
 2585          	ЕСЛИ ((ЛП_Предыдущее - ФП_P_ВтрубеСидер) > 0.00) {    /*  величина откачки  ?????* м.б. настр параметр ввести*/
 2586                  ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СКОРОСТЬ_ОТКАЧКИ_В_НОРМЕ)) {
 2587          					ФлагОткачкиТрубыСидеростата = НОРМА;
 2588          					В СОСТ Начало;
 2589          		} 
 2590              } ИНАЧЕ{
 2591          	ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СКОРОСТЬ_ОТКАЧКИ_НИЖЕ_НОРМЫ)) {
 2592          					ФлагОткачкиТрубыСидеростата = ВНЕ_НОРМЫ;
 2593          					В СОСТ Начало;
 2594          		} 
 2595          	}
 2596           }
 2597          }
 2598          /*====================================================*/
 2599          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2600          /*== Контроль Готовности Вакуума в Вакуумной Трубе  ==*/
 2601          /*====================================================*/
 2602          
 2603          ПРОЦ КонтрольГотовностиВакуума_в_Вакуумной_Трубе{
 2604          ИЗ ПРОЦ Инициализация  	ФП_P_ВтрубеСидер,
 2605          						НП_ЗД_P_ВтрубеСидер,
 2606          						ФлагГотовВакуумаВТ,
 2607          						НП_ЗД_Гист_P_ВтрубеСидерВерх,
 2608          						НП_ЗД_Гист_P_ВтрубеСидерНиж;
 2609          СОСТ Начало{
 2610             ЕСЛИ (ФП_P_ВтрубеСидер <= НП_ЗД_P_ВтрубеСидер) {  /* 0.05 */
 2611                   ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_ВАКУУМНОЙ_ТРУБЕ_В_НОРМЕ)) {
 2612          					ФлагГотовВакуумаВТ = НОРМА;
 2613          					В СОСТ ДавлениеНормальное;
 2614          					}
 2615              } ИНАЧЕ {
 2616                          ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_ВАКУУМНОЙ_ТРУБЕ_ВНЕ_НОРМЫ)) {
 2617          					ФлагГотовВакуумаВТ = ВНЕ_НОРМЫ;
 2618          				   В СОСТ ДавлениеВысокое;
 2619          				}
 2620              }
 2621              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2622           }
 2623          
 2624          
 2625           
 2626          СОСТ ДавлениеНормальное{  /*  > 0.055 */
 2627                 ЕСЛИ (ФП_P_ВтрубеСидер > (НП_ЗД_P_ВтрубеСидер + НП_ЗД_Гист_P_ВтрубеСидерВерх))  В СОСТ Начало;  /* ?????поправить идем, если 2628           выше нормы */
 2629           } 
 2630          СОСТ ДавлениеВысокое{  /* недостаточный вакуум   < 0.025*/
 2631                 ЕСЛИ (ФП_P_ВтрубеСидер < (НП_ЗД_P_ВтрубеСидер - НП_ЗД_Гист_P_ВтрубеСидерНиж))  В СОСТ Начало;	/* ?????поправить идем, если н 2632          иже нормы */
 2633           }  
 2634          
 2635          /* НЕНОРМАЛЬНЫЕ СИТУАЦИИ */
 2636           СОСТ НарушениеСвязи{
 2637               В СОСТ Начало;
 2638           }
 2639          }
 2640          
 2641          /* конец ПРОЦ КонтрольГотовностиВакуума_в_Вакуумной Трубе
 2642          
 2643          /*====================================================*/
 2644          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2645          /*==           Уровень воды в баке охлаждения       ==*/
 2646          /*====================================================*/
 2647          ПРОЦ КонтрольУровняВодыБакаОхлаждения{  /*  */
 2648           ИЗ ПРОЦ Инициализация
 2649                                  К_УР_ВОДЫ_MIN,
 2650                                  К_УР_ВОДЫ_MAX,
 2651          						ФлагГотовУрВодыБО,
 2652          						Д_УР_ВОДЫ_MIN,
 2653          						Д_УР_ВОДЫ_MAX,
 2654          						К_Достоверности;
 2655          						
 2656           СОСТ Начало{
 2657          	ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/ 
 2658          	ЕСЛИ ((Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX)) { 
 2659          	
 2660          		ЕСЛИ ((!К_УР_ВОДЫ_MIN) && (!К_УР_ВОДЫ_MAX)) {		/*ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКИЙ */
 2661          						ФлагГотовУрВодыБО = ВНЕ_НОРМЫ;
 2662          						В СОСТ СообщениеНизкийУровеньВоды;
 2663          		} ИНАЧЕ { 
 2664          			ЕСЛИ ((К_УР_ВОДЫ_MIN) && (К_УР_ВОДЫ_MAX)) { /*ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКИЙ */
 2665          						ФлагГотовУрВодыБО = ВНЕ_НОРМЫ;
 2666          						В СОСТ СообщениеВысокийУровеньВоды;
 2667          			} ИНАЧЕ {
 2668          				ЕСЛИ ((!К_УР_ВОДЫ_MIN) && (К_УР_ВОДЫ_MAX)) {  /* ПК_ГУИ_ОТКАЗ_ДАТЧИКОВ_УРОВНЯ */
 2669          						ФлагГотовУрВодыБО = ВНЕ_НОРМЫ;
 2670          						В СОСТ СообщениеОтказДатчиков;
 2671          				} ИНАЧЕ  {   /* ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ */
 2672          						ФлагГотовУрВодыБО = НОРМА;
 2673          						В СОСТ СообщениеУровеньВодыВнорме;
 2674          					
 2675          				}
 2676          			}	 
 2677          		}	 
 2678          	}	/* конец((Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX)) */
 2679           } /* конец состояния*/						
 2680          						
 2681          	СОСТ СообщениеНизкийУровеньВоды{
 2682          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКИЙ))В  СОСТ НизкийУровеньВоды;
 2683          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 2684          	} 
 2685          	СОСТ СообщениеВысокийУровеньВоды{
 2686          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКИЙ))В  СОСТ ВысокийУровеньВоды;
 2687          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 2688          	} 						
 2689          	СОСТ СообщениеОтказДатчиков{
 2690          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ДАТЧИКОВ_УРОВНЯ))В  СОСТ ОтказДатчиков;
 2691          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 2692          	} 						
 2693          	СОСТ СообщениеУровеньВодыВнорме{
 2694          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УРОВЕНЬ_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ))В  СОСТ УровеньВодыВнорме;
 2695          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 2696          	} 						
 2697          
 2698          	СОСТ НизкийУровеньВоды{
 2699          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/  
 2700          		ЕСЛИ (((К_УР_ВОДЫ_MIN) || (К_УР_ВОДЫ_MAX)) && (Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX))  В СОСТ Начало;
 2701          	}
 2702          	СОСТ ВысокийУровеньВоды{
 2703           		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/ 
 2704                 ЕСЛИ (((!К_УР_ВОДЫ_MIN) || (!К_УР_ВОДЫ_MAX)) && (Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX)) В СОСТ Начало; 
 2705          	}
 2706          	СОСТ УровеньВодыВнорме{
 2707            		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/ 
 2708          		ЕСЛИ (((!К_УР_ВОДЫ_MIN) || (К_УР_ВОДЫ_MAX)) && (Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX)){ 
 2709          			В СОСТ Начало;
 2710          		}
 2711          	}
 2712          	СОСТ ОтказДатчиков{
 2713          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_УР_ВОДЫ_MIN = ВКЛ; Д_УР_ВОДЫ_MAX = ВКЛ; }/* для отладки без достоверностей*/  
 2714          		ЕСЛИ (((К_УР_ВОДЫ_MIN) || (!К_УР_ВОДЫ_MAX)) && (Д_УР_ВОДЫ_MIN) && (Д_УР_ВОДЫ_MAX))В СОСТ Начало;	
 2715           } 
 2716          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2717          	СОСТ НарушениеСвязи {
 2718          		В СОСТ Начало;
 2719          	}
 2720          }   /*   Конец ПРОЦ КонтрольУровняВодыБакаОхлаждения */
 2721          
 2722          
 2723          /*====================================================*/
 2724          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2725          /*==       Температуры воды в баке охлаждения       ==*/
 2726          /*====================================================*/
 2727          ПРОЦ КонтрольТемпературыВодыБакаОхлаждения{
 2728           ИЗ ПРОЦ Инициализация 	
 2729          						ФП_T_Вбаке,	
 2730                                  ФлагГотовТемпВодыБО,
 2731          						НП_ЗД_T_ВбакеНижняя,
 2732          						НП_ЗД_T_ВбакеВерхняя,
 2733          						НП_ЗД_Гист_T_Вбаке; /* добавлено 20 января 2014 */
 2734          						
 2735           СОСТ Начало{
 2736              ЕСЛИ (ФП_T_Вбаке < НП_ЗД_T_ВбакеНижняя) { /* 10  добавлено 20 января 2014 */
 2737                   ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_НИЗКАЯ)) {
 2738          					ФлагГотовТемпВодыБО = ВНЕ_НОРМЫ;
 2739          					В СОСТ НизкаяТемператураВоды;
 2740          					}
 2741              } ИНАЧЕ ЕСЛИ (ФП_T_Вбаке > НП_ЗД_T_ВбакеВерхняя) {		/* 60  добавлено 20 января 2014 */
 2742                        ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_ВЫСОКАЯ)) {
 2743          			   ФлагГотовТемпВодыБО = ВНЕ_НОРМЫ;
 2744          			   В СОСТ ВысокаяТемператураВоды;
 2745          			   }
 2746              } ИНАЧЕ {
 2747                          ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_БАКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ)) {
 2748          					ФлагГотовТемпВодыБО = НОРМА;
 2749          				   В СОСТ ТемператураВнорме;
 2750          				}
 2751              }
 2752          		 
 2753              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2754           }
 2755           
 2756          
 2757           СОСТ НизкаяТемператураВоды{					/*  2*/
 2758          	ЕСЛИ (ФП_T_Вбаке > (НП_ЗД_T_ВбакеНижняя + НП_ЗД_Гист_T_Вбаке))  В СОСТ Начало;
 2759          	ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2760           }
 2761          
 2762           СОСТ ВысокаяТемператураВоды{
 2763          	ЕСЛИ (ФП_T_Вбаке < (НП_ЗД_T_ВбакеВерхняя - НП_ЗД_Гист_T_Вбаке))  В СОСТ Начало;
 2764          	ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2765           }
 2766            СОСТ ТемператураВнорме{
 2767                 ЕСЛИ ((ФП_T_Вбаке < (НП_ЗД_T_ВбакеНижняя - НП_ЗД_Гист_T_Вбаке)) || 
 2768          	         (ФП_T_Вбаке > (НП_ЗД_T_ВбакеВерхняя + НП_ЗД_Гист_T_Вбаке)))  В СОСТ Начало;
 2769           } 
 2770           
 2771          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2772           СОСТ НарушениеСвязи {
 2773              В СОСТ Начало;
 2774           }
 2775          }   /*   Конец ПРОЦ КонтрольТемпературыВодыБакаОхлаждения */
 2776          
 2777          
 2778          
 2779          /*====================================================*/
 2780          /*					ПРОЦЕСС КОНТРОЛЯ				  */
 2781          /*==       Температуры воды в рубашке охлаждения    ==*/
 2782          /*====================================================*/
 2783          ПРОЦ КонтрольТемпературыРубашкиОхлаждения{
 2784           ИЗ ПРОЦ Инициализация 	
 2785          						ФП_T_Врубашке,	
 2786                                  ФлагГотовTВодыРО,
 2787          						НП_ЗД_T_ВрубашкеНижняя,
 2788          						НП_ЗД_T_ВрубашкеВерхняя,
 2789          						НП_ЗД_Гист_T_Врубашке;
 2790          						
 2791           СОСТ Начало{
 2792              ЕСЛИ (ФП_T_Врубашке < НП_ЗД_T_ВрубашкеНижняя) {  /* 40	изменено 20 января 2014 */
 2793                   ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_НИЗКАЯ)) {
 2794          					ФлагГотовTВодыРО = НИЖЕ_НОРМЫ;
 2795          					В СОСТ НизкаяТемператураВоды;
 2796          					}
 2797              } ИНАЧЕ ЕСЛИ (ФП_T_Врубашке > НП_ЗД_T_ВрубашкеВерхняя) {		/* 85 изменено 20 января 2014 */
 2798                        ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_ВЫСОКАЯ)) {
 2799          			   ФлагГотовTВодыРО = ВЫШЕ_НОРМЫ;
 2800          			   В СОСТ ВысокаяТемператураВоды;
 2801          			   }
 2802              } ИНАЧЕ {
 2803                          ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ТЕМПЕРАТУРА_ВОДЫ_В_РУБАШКЕ_ОХЛАЖДЕНИЯ_В_НОРМЕ)) {
 2804          					ФлагГотовTВодыРО = НОРМА;
 2805          				   В СОСТ ТемператураВнорме;
 2806          				}
 2807                   }
 2808              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2809           }
 2810          
 2811           СОСТ НизкаяТемператураВоды{
 2812                 
 2813          		ЕСЛИ (ФП_T_Врубашке > (НП_ЗД_T_ВрубашкеНижняя + НП_ЗД_Гист_T_Врубашке))  В СОСТ Начало;
 2814          		ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2815           }
 2816          
 2817           СОСТ ВысокаяТемператураВоды{
 2818                  ЕСЛИ (ФП_T_Врубашке < (НП_ЗД_T_ВрубашкеВерхняя - НП_ЗД_Гист_T_Врубашке))  В СОСТ Начало;
 2819          		ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2820           }
 2821           
 2822          
 2823           СОСТ ТемператураВнорме{
 2824                  ЕСЛИ ((ФП_T_Врубашке < (НП_ЗД_T_ВрубашкеНижняя - НП_ЗД_Гист_T_Врубашке)) || 
 2825          	         (ФП_T_Врубашке > (НП_ЗД_T_ВрубашкеВерхняя + НП_ЗД_Гист_T_Врубашке)))  В СОСТ Начало;
 2826           } 
 2827          СОСТ Задержка{
 2828                ТАЙМАУТ ОДНА_МИНУТА В СОСТ Начало;
 2829           }
 2830           
 2831          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2832           СОСТ НарушениеСвязи {
 2833              В СОСТ Начало;
 2834           }
 2835          }   /*   Конец ПРОЦ КонтрольТемпературыВодыВрубашкеОхлаждения */
 2836          
 2837          /*====================================================*/
 2838          /*					ПРОЦЕСС КОНТРОЛЯ	             */			  
 2839          /*== 		Контроль давления в баке компрессора  	==*/
 2840          /*====================================================*/
 2841          ПРОЦ КонтрольДавленияВбакеКомпрессора{
 2842          ИЗ ПРОЦ Инициализация  	ФП_P_ВбакеКомпрессора,
 2843          						ФлагДавленияКомпрессора,
 2844          						НП_ЗД_P_ВбакеКомпрессора,
 2845          						НП_ЗД_Гист_P_ВбакеКомпрессора;
 2846          
 2847           СОСТ Начало{    						/*  4  */
 2848              ЕСЛИ (ФП_P_ВбакеКомпрессора < НП_ЗД_P_ВбакеКомпрессора) {
 2849                  ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_НИЖЕ_НОРМЫ)) {
 2850          					ФлагДавленияКомпрессора = ВНЕ_НОРМЫ;
 2851          					В СОСТ НизкоеДавление;
 2852          		}
 2853              } ИНАЧЕ ЕСЛИ (ФП_P_ВбакеКомпрессора >= (НП_ЗД_P_ВбакеКомпрессора)) {
 2854          				ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_В_НОРМЕ)) {
 2855          					ФлагДавленияКомпрессора = НОРМА;
 2856          					В СОСТ ДавлениеВнорме;
 2857          				}
 2858          			}
 2859              ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2860           }
 2861           СОСТ НизкоеДавление{														/*0.5*/
 2862          		ЕСЛИ (ФП_P_ВбакеКомпрессора > ((НП_ЗД_P_ВбакеКомпрессора ) + НП_ЗД_Гист_P_ВбакеКомпрессора))
 2863          																				В СОСТ Начало;
 2864           }
 2865           СОСТ ДавлениеВнорме{														/*0.5*/
 2866                  ЕСЛИ (ФП_P_ВбакеКомпрессора < (НП_ЗД_P_ВбакеКомпрессора - НП_ЗД_Гист_P_ВбакеКомпрессора))  В СОСТ Начало;
 2867           } 
 2868           СОСТ Задержка{
 2869                ТАЙМАУТ ДВЕ_СЕКУНДЫ В СОСТ Начало;
 2870           }
 2871          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2872           СОСТ НарушениеСвязи {
 2873              В СОСТ Начало;
 2874           }
 2875          }
 2876          /*====================================================*/
 2877          /*					ПРОЦЕСС КОНТРОЛЯ	              */			  
 2878          /*==Контроль аварийного давления в баке компрессора ==*/
 2879          /*				добавлено август 2014				  */
 2880          /*====================================================*/
 2881          ПРОЦ КонтрольАварийногоДавленияВбакеКомпрессора{
 2882          	ИЗ ПРОЦ Инициализация 	ФП_P_ВбакеКомпрессора;
 2883          	СОСТ Начало {
 2884          		ЕСЛИ (ФП_P_ВбакеКомпрессора <= 2.0) В СЛЕДУЮЩЕЕ;
 2885          	}	
 2886          	СОСТ АварийноеДавлениеВбакеКомпрессора{
 2887           		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_АВАРИЯ_ДАВЛЕНИЕ_В_БАКЕ_КОМПРЕССОРА_МЕНЬШЕ_2х_АТМОСФЕР)) В СОСТ ПроверкаИдетЛиВакуумирование;
 2888          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2889          	}
 2890          	СОСТ ПроверкаИдетЛиВакуумирование{	
 2891          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Пауза;
 2892          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 2893          	}
 2894          	СОСТ КонтрольВыключения{
 2895          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 2896          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 2897          				ИНАЧЕ  В СОСТ ОжиданиеПовышенияДавления;  /* это значит, что нет необходимости останова всех процессов*/
 2898          		}
 2899          	} 
 2900          	СОСТ ОжиданиеПовышенияДавления{ 
 2901          		ЕСЛИ (ФП_P_ВбакеКомпрессора > 2.0) В СОСТ Начало;
 2902          	}
 2903          	СОСТ Пауза{
 2904               ТАЙМАУТ ПЯТЬ_СЕКУНД В СОСТ Начало;   
 2905          	}	
 2906          
 2907          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2908           СОСТ НарушениеСвязи {
 2909              В СОСТ Начало;
 2910           }
 2911          }
 2912          /*========================================================*/
 2913          /*					ПРОЦЕСС КОНТРОЛЯ	                  */			  
 2914          /*==Контроль аварийной температуры в рубашке охлаждения ==*/
 2915          /*				добавлено август 2014				      */
 2916          /*========================================================*/
 2917          ПРОЦ КонтрольАварийнойТемпературыВрубашкеОхлаждения{
 2918          	ИЗ ПРОЦ Инициализация 	ФП_T_Врубашке,
 2919          							НП_ЗД_T_ВрубашкеВерхняя;
 2920          	СОСТ Начало {
 2921          		ЕСЛИ (ФП_T_Врубашке >  Т_ПредельнаяВрубашкеОхлаждения) В СЛЕДУЮЩЕЕ;
 2922          	}	
 2923          	СОСТ АварийнаяТемператураВрубахеОхлаждения{
 2924           		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_АВАРИЯ_ПЕРЕГРЕВ_РУБАШКИ_ОХЛАЖДЕНИЯ)) В СОСТ ПроверкаИдетЛиВакуумирование;
 2925          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2926          	}
 2927          	СОСТ ПроверкаИдетЛиВакуумирование{	
 2928          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Пауза;
 2929          		ИНАЧЕ СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 2930          	}
 2931          	СОСТ КонтрольВыключения{
 2932          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 2933          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 2934          				ИНАЧЕ  В СОСТ ОжиданиеСниженияТемпературы;  /* это значит, что нет необходимости останова всех процессов*/
 2935          		}
 2936          	} 
 2937          	СОСТ ОжиданиеСниженияТемпературы{ 
 2938          		ЕСЛИ (ФП_T_Врубашке < НП_ЗД_T_ВрубашкеВерхняя) В СОСТ Начало;
 2939          	}
 2940          	СОСТ Пауза{
 2941               ТАЙМАУТ ПЯТЬ_СЕКУНД В СОСТ Начало;   
 2942          	}	
 2943          
 2944          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2945           СОСТ НарушениеСвязи {
 2946              В СОСТ Начало;
 2947           }
 2948          }
 2949          /*========================================================*/
 2950          /*					ПРОЦЕСС КОНТРОЛЯ	                  */			  
 2951          /*==Контроль аварийной температуры в баке охлаждения ВН ==*/
 2952          /*				добавлено август 2014				      */
 2953          /*========================================================*/
 2954          ПРОЦ КонтрольАварийнойТемпературыВбакеОхлаждения{
 2955          	ИЗ ПРОЦ Инициализация 	ФП_T_Вбаке,
 2956          							НП_ЗД_T_ВбакеВерхняя;
 2957          	СОСТ Начало {
 2958          		ЕСЛИ (ФП_T_Вбаке >  Т_ПредельнаяВбакеОхлаждения) В СЛЕДУЮЩЕЕ;
 2959          	}	
 2960          	СОСТ АварийнаяТемператураВБакеОхлаждения{
 2961          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_АВАРИЯ_ПЕРЕГРЕВ_БАКА_ОХЛАЖДЕНИЯ_НАСОСА)) В СОСТ ПроверкаИдетЛиВакуумирование;
 2962          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 2963          	}
 2964          	СОСТ ПроверкаИдетЛиВакуумирование{	
 2965          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ) В СОСТ Пауза;
 2966          		ИНАЧЕ 	СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ; В СЛЕДУЮЩЕЕ;
 2967          	}
 2968          	СОСТ КонтрольВыключения{
 2969          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 2970          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 2971          				ИНАЧЕ  В СОСТ ОжиданиеСниженияТемпературы;  /* это значит, что нет необходимости останова всех процессов*/
 2972          		}
 2973          	} 
 2974          	СОСТ ОжиданиеСниженияТемпературы{ 
 2975          		ЕСЛИ (ФП_T_Вбаке < НП_ЗД_T_ВбакеВерхняя) В СОСТ Начало;
 2976          	}
 2977          	СОСТ Пауза{
 2978               ТАЙМАУТ ПЯТЬ_СЕКУНД В СОСТ Начало;   
 2979          	}	
 2980          
 2981          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 2982           СОСТ НарушениеСвязи {
 2983              В СОСТ Начало;
 2984           }
 2985          }
 2986          
 2987          
 2988          /*================================================================*/
 2989          /*         Процесс КонтрольСостоянияПитанияШкафаВакуумнойСистемы 380    */
 2990          /*   добавлено  27-го января 2014                                 */
 2991          /*================================================================*/
 2992          ПРОЦ КонтрольСостоянияПитанияШКАФА_ВС{  
 2993          	ИЗ ПРОЦ Инициализация 	К_ШКАФ_ВС_380,
 2994          							Д_ШКАФ_ВС_380,
 2995          							СостояниеПитШкафаВС380,
 2996          							К_Достоверности;
 2997          							
 2998          	СОСТ Начало {
 2999          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ШКАФ_ВС_380 = ВКЛ;  /* для отладки без достоверностей*/
 3000          	    ЕСЛИ (Д_ШКАФ_ВС_380){
 3001          			ЕСЛИ (К_ШКАФ_ВС_380){
 3002          				СостояниеПитШкафаВС380 = ВКЛ; В СОСТ ВключенСообщаем;
 3003          			}
 3004          			ИНАЧЕ{
 3005          				СостояниеПитШкафаВС380 = ВЫК; 	В СОСТ ВыключенСообщаем;
 3006          			}		
 3007          		}
 3008          	}
 3009          	СОСТ ВключенСообщаем{ 
 3010          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЕСТЬ_ПИТАНИЕ_ШКАФА_ВС_380))  В  СОСТ СменаСостоянияВКЛ;
 3011          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3012              }
 3013              СОСТ ВыключенСообщаем{ 
 3014          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_НЕТ_ПИТАНИЕ_ШКАФА_ВС_380))  В СОСТ СменаСостоянияВЫКЛ;
 3015          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3016          	}
 3017              СОСТ СменаСостоянияВКЛ{
 3018          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ШКАФ_ВС_380 = ВКЛ;  /* для отладки без достоверностей*/
 3019          		ЕСЛИ ((!К_ШКАФ_ВС_380)&&(Д_ШКАФ_ВС_380))  В СОСТ Начало;
 3020          	}
 3021          	СОСТ СменаСостоянияВЫКЛ{
 3022          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ШКАФ_ВС_380 = ВКЛ;  /* для отладки без достоверностей*/
 3023          		ЕСЛИ ((К_ШКАФ_ВС_380) && (Д_ШКАФ_ВС_380))  В СОСТ Начало;
 3024          	}  
 3025          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3026          	СОСТ НарушениеСвязи {
 3027          		В СОСТ Начало;
 3028          	} 
 3029          }	
 3030          
 3031          /* 22 сентября 2014 Лях */
 3032          /*================================================================*/
 3033          /*              Процесс контроля оборудования                     */
 3034          /* Работает только тогда, когда включено вакуумирование  		  */
 3035          /*================================================================*/
 3036          /* за запредельной температурой следит процесс  КонтрольАварийнойТемпературыВрубашкеОхлаждения*/
 3037          ПРОЦ КонтрольСостоянияОборудования
 3038          {  
 3039          ИЗ ПРОЦ Инициализация 	ФлагДавленияКомпрессора,
 3040          						К_ОТКР_ЗАТВОР_ВАК , 
 3041          						К_ЗАКР_ЗАТВОР_ВАК ,
 3042          						К_ШКАФ_ВС_380 ,
 3043          						К_САПУН,
 3044          						К_УСТР_ПЛАВ_ПУСКА,
 3045          						К_ПИТ_УПП_ВАК_НАСОСА ,
 3046          						К_ПИТ_ВЕНТИЛЯТОРА,
 3047          						К_ПИТ_РЕГ_Т,
 3048          						К_ПИТ_РЕГ_УР,
 3049          						К_ПИТ_НАСОС_ОХЛ; 
 3050          	СОСТ КонтрольОборудования
 3051          	{
 3052          			ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВКЛ) && /* затвор вакуумный открыт*/
 3053          				(К_ЗАКР_ЗАТВОР_ВАК == ВЫК) &&
 3054          				(К_ШКАФ_ВС_380 == ВКЛ) &&    /* есть питание шкафа*/
 3055          				(К_САПУН == ЗАКР) &&    /* сапун закрыт*/
 3056          				(К_УСТР_ПЛАВ_ПУСКА == ВКЛ) &&    /* есть питание на устройстве плавного пуска */
 3057          				(К_ПИТ_УПП_ВАК_НАСОСА == ВКЛ) &&   /* есть питание вакуумного насоса*/
 3058          				(К_ПИТ_ВЕНТИЛЯТОРА == ВКЛ) &&    /* есть питание вентилятора*/
 3059          				(К_ПИТ_РЕГ_Т == ВКЛ) && /* есть питание регулятора температуры*/     
 3060          				(К_ПИТ_РЕГ_УР == ВКЛ) && /* есть питание регулятора уровня воды*/
 3061          				(К_ПИТ_НАСОС_ОХЛ == ВКЛ)  &&   /* есть питание насоса охлаждения*/ 
 3062          				(ФлагДавленияКомпрессора == НОРМА)  /* давление в компрессоре нормальное*/ 
 3063          			) 
 3064          		{ 			
 3065          			В СОСТ КонтрольОборудования;
 3066          		}
 3067          		ТАЙМАУТ ДВЕ_СЕКУНДЫ В СОСТ СообщениеОбОтказеВакуумирования;   
 3068             }
 3069              СОСТ СообщениеОбОтказеВакуумирования{
 3070                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ_ОТКАЗ_ОБОРУДОВАНИЯ))	В СЛЕДУЮЩЕЕ;
 3071                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 3072           }
 3073          	/*		Сломалось что-то (при включении вак. насоса, например). Пробуем выключить вакуумный насос*/ 
 3074          	/*	 вакуумирование прекращается*/
 3075          	СОСТ ВыключенияВакНасоса{
 3076          		СТАРТ ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ;
 3077          		В СЛЕДУЮЩЕЕ;
 3078          	}	
 3079          	СОСТ КонтрольВыключенияВакНасоса{
 3080          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ПАССИВНОЕ){ 
 3081          			ЕСЛИ (ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ ОШИБКА ) {
 3082          				В СОСТ ВыключениеНаЩиткеКнопарями; /* !!!!!!!!!!!!????? включение вак. системы не сработало штатно*/ 
 3083          			}
 3084          			ИНАЧЕ СТОП;   /* выключилось без ошибок, бежать вниз не надо*/
 3085          		} 
 3086          	} 
 3087          	
 3088            СОСТ ВыключениеНаЩиткеКнопарями{
 3089              СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 3090              ОШИБКА;
 3091           }
 3092            СОСТ НарушениеСвязи {
 3093          	   ОШИБКА;
 3094          	}
 3095          }
 3096          
 3097          
 3098          
 3099          /*=========================================*/
 3100          /*=                                       =*/
 3101          /*=     ПРОЦЕССЫ  УПРАВЛЕНИЯ ВАКУУМНЫМ    =*/
 3102          /*=          ОБОРУДОВАНИЕМ                =*/
 3103          /*=========================================*/
 3104          /*=======================================================*/
 3105          /*=====   Процесс подачи питания на вентилятор		=====*/
 3106          /*=======================================================*/
 3107          ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР{
 3108           ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3109          						У_ПИТ_ВЕНТИЛЯТОРА,
 3110          						Д_ПИТ_ВЕНТИЛЯТОРА,
 3111          						К_Достоверности
 3112          					/*	ОШИБКА_ФУНКЦ_ВЕНТИЛЯТОР */
 3113          						;
 3114           ЛОГ У_Откат ЛОКАЛ;					  
 3115          	СОСТ Начало{
 3116          		У_Откат = У_ПИТ_ВЕНТИЛЯТОРА;
 3117          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР;
 3118          		СТОП ПРОЦ КонтрольСпонтанногоВключенияВентилятора;
 3119          		У_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;
 3120          		В СЛЕДУЮЩЕЕ;      
 3121          	}
 3122          	СОСТ КонтрольВключения{
 3123          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/ 
 3124          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА == ВКЛ) && (Д_ПИТ_ВЕНТИЛЯТОРА))  {
 3125          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияВентилятора;
 3126          			СТОП;  
 3127          		}
 3128          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВЕНТИЛЯТОРА В СОСТ Ошибка;
 3129          	}
 3130            
 3131          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3132          	СОСТ Ошибка {
 3133          		У_ПИТ_ВЕНТИЛЯТОРА = У_Откат;
 3134          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ВЕНТИЛЯТОРА))	ОШИБКА;
 3135          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3136          	}
 3137          	СОСТ НарушениеСвязи {
 3138          	   ОШИБКА;
 3139          	}   
 3140          } /*конец процесса ВКЛ_ПИТ_ВЕНТИЛЯТОР  */
 3141          
 3142          /*=======================================================*/
 3143          /*=====   Процесс отключения питания вентилятора    =====*/
 3144          /*=======================================================*/
 3145          ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР{
 3146           ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3147          						У_ПИТ_ВЕНТИЛЯТОРА,
 3148          						Д_ПИТ_ВЕНТИЛЯТОРА,
 3149          						К_Достоверности;
 3150            ЛОГ У_Откат ЛОКАЛ;
 3151          	СОСТ Начало{
 3152          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР;
 3153          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияВентилятора;
 3154          		У_ПИТ_ВЕНТИЛЯТОРА = ВЫК;
 3155          		В СЛЕДУЮЩЕЕ;      
 3156          	}
 3157          	СОСТ КонтрольВыключения{
 3158          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/
 3159          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА == ВЫК) && (Д_ПИТ_ВЕНТИЛЯТОРА)) {
 3160          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияВентилятора;
 3161          			СТОП;	
 3162          		} 
 3163          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВЕНТИЛЯТОРА В СОСТ Ошибка;
 3164          	}
 3165          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3166          	СОСТ Ошибка {
 3167          		У_ПИТ_ВЕНТИЛЯТОРА = У_Откат;
 3168          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ВЕНТИЛЯТОРА))	ОШИБКА;
 3169          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3170          	}
 3171          	СОСТ НарушениеСвязи {
 3172          	   ОШИБКА;
 3173          	}   
 3174          } /*конец процесса ВЫК_ПИТ_ВЕНТИЛЯТОРА  */
 3175          					  
 3176          /*================================================================*/
 3177          /*         Процесс КонтрольСостоянияПитанияВентилятора  13 декабря     */
 3178          /*================================================================*/
 3179          ПРОЦ КонтрольСостоянияПитанияВентилятора{  
 3180          	ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3181          							Д_ПИТ_ВЕНТИЛЯТОРА,
 3182          							СостояниеВентилятора,
 3183          							К_Достоверности;
 3184          							
 3185          	СОСТ Начало {
 3186          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/
 3187          	   
 3188          
 3189          	   ЕСЛИ (Д_ПИТ_ВЕНТИЛЯТОРА){
 3190          			 ЕСЛИ (К_ПИТ_ВЕНТИЛЯТОРА) 
 3191          			   { 
 3192          					СостояниеВентилятора = ВКЛ;
 3193          					В СОСТ ВключенСообщаем; 
 3194          			   }
 3195          			   ИНАЧЕ      
 3196          			   { 
 3197          					СостояниеВентилятора = ВЫК;
 3198          					В СОСТ ВыключенСообщаем;
 3199          			   }
 3200          		}
 3201          	}
 3202          	СОСТ ВключенСообщаем{ 
 3203          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВЕНТИЛЯТОР_ВКЛЮЧЕН))  В  СОСТ СменаСостоянияВКЛ;
 3204          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3205              }
 3206              СОСТ ВыключенСообщаем{ 
 3207          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВЕНТИЛЯТОР_ВЫКЛЮЧЕН))  В СОСТ СменаСостоянияВЫКЛ;
 3208          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3209          	}
 3210              СОСТ СменаСостоянияВКЛ{
 3211          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/
 3212          		ЕСЛИ ((!К_ПИТ_ВЕНТИЛЯТОРА)&&(Д_ПИТ_ВЕНТИЛЯТОРА))  В СОСТ Начало;
 3213          	}
 3214          	СОСТ СменаСостоянияВЫКЛ{
 3215          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/
 3216          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА) && (Д_ПИТ_ВЕНТИЛЯТОРА))  В СОСТ Начало;
 3217          	}  
 3218          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3219          	СОСТ НарушениеСвязи {
 3220          	   В СОСТ Начало;
 3221          	} 
 3222          }	
 3223          /*========================================================*/
 3224          /*=====   Процесс контроля включенности вентилятора  =====*/
 3225          /*========================================================*/
 3226          ПРОЦ КонтрольСпонтанногоВыключенияВентилятора{
 3227          	ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3228          							У_ПИТ_ВЕНТИЛЯТОРА,
 3229          							Д_ПИТ_ВЕНТИЛЯТОРА,
 3230          							К_Достоверности;
 3231          	СОСТ Контроль {
 3232          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/ 
 3233          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА == ВЫК) && (Д_ПИТ_ВЕНТИЛЯТОРА))
 3234          		{
 3235          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияВентилятора;
 3236          			У_ПИТ_ВЕНТИЛЯТОРА = ВЫК;
 3237          			В СОСТ Ошибка;
 3238          		}
 3239          	}
 3240          	СОСТ Ошибка {
 3241          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_ВЕНТИЛЯТОРА)) ОШИБКА;
 3242          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3243          	}
 3244          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3245          	СОСТ НарушениеСвязи {
 3246          		ОШИБКА;
 3247          	}
 3248          }
 3249          /*=========================================================*/
 3250          /*=====   Процесс контроля выключенности вентилятора  =====*/
 3251          /*=========================================================*/
 3252          ПРОЦ КонтрольСпонтанногоВключенияВентилятора{
 3253          	ИЗ ПРОЦ Инициализация 	К_ПИТ_ВЕНТИЛЯТОРА,
 3254          							Д_ПИТ_ВЕНТИЛЯТОРА,
 3255          							У_ПИТ_ВЕНТИЛЯТОРА,
 3256          							К_Достоверности;
 3257          	
 3258          	СОСТ Контроль {
 3259          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;  /* для отладки без достоверностей*/ 
 3260          		ЕСЛИ ((К_ПИТ_ВЕНТИЛЯТОРА == ВКЛ) && (Д_ПИТ_ВЕНТИЛЯТОРА)) 
 3261          		{	
 3262          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияВентилятора;
 3263          			У_ПИТ_ВЕНТИЛЯТОРА = ВКЛ;
 3264          			В СОСТ Ошибка; 
 3265          		}
 3266          	}
 3267          	СОСТ Ошибка {
 3268          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_ВЕНТИЛЯТОРА)) ОШИБКА;
 3269          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3270          	}
 3271          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 3272          	СОСТ НарушениеСвязи {
 3273          		ОШИБКА;
 3274          	}
 3275          }			  
 3276          /*=========================================================*/
 3277          /* 			КОНТРОЛЬ СОСТОЯНИЯ ЗАТВОРА ВАКУУМНОГО		 */
 3278          /*=========================================================*/
 3279          ПРОЦ КонтрольСостоянияЗатвораВакуумного{  
 3280           ИЗ ПРОЦ Инициализация
 3281                                  К_ОТКР_ЗАТВОР_ВАК,
 3282                                  К_ЗАКР_ЗАТВОР_ВАК,
 3283          						Д_ОТКР_ЗАТВОР_ВАК,
 3284          						Д_ЗАКР_ЗАТВОР_ВАК,
 3285          						КонцевикОткрытияЗатвораВакуумного,
 3286          						КонцевикЗакрытияЗатвораВакуумного,
 3287          						К_Достоверности;
 3288          							
 3289          	СОСТ Начало{
 3290          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/  3291          
 3292          		ЕСЛИ ((Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК)) { 
 3293          			ЕСЛИ ((!К_ОТКР_ЗАТВОР_ВАК) && (!К_ЗАКР_ЗАТВОР_ВАК) ) {  /*ПК_ГУИ_СРЕДНЕЕ_СОСТОЯНИЕ_ЗАТВОРА_ВАКУУМНОГО*/
 3294          				КонцевикОткрытияЗатвораВакуумного = ВЫК;
 3295          				КонцевикЗакрытияЗатвораВакуумного = ВЫК;
 3296          				В СОСТ СообщениеСменаСостоянияСреднего;
 3297          			} ИНАЧЕ {
 3298          				ЕСЛИ ((!К_ОТКР_ЗАТВОР_ВАК)&&(К_ЗАКР_ЗАТВОР_ВАК)) {  /*ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ЗАКРЫТ*/
 3299          					КонцевикОткрытияЗатвораВакуумного = ВЫК;
 3300          					КонцевикЗакрытияЗатвораВакуумного = ВКЛ;
 3301          					В СОСТ СообщениеСменаСостоянияЗакрытия;
 3302          				} ИНАЧЕ {
 3303          					ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК)&&(!К_ЗАКР_ЗАТВОР_ВАК) ) {  /*ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ОТКРЫТ*/
 3304          						КонцевикОткрытияЗатвораВакуумного = ВКЛ;
 3305          						КонцевикЗакрытияЗатвораВакуумного = ВЫК;
 3306          						В СОСТ СообщениеСменаСостоянияОткрытия;
 3307          					} ИНАЧЕ { 										 /*ПК_ГУИ_СОСТОЯНИЕ_ОШИБКИ_ЗАТВОРА_ВАКУУМНОГО*/
 3308          						КонцевикОткрытияЗатвораВакуумного = ВКЛ;  
 3309          						КонцевикЗакрытияЗатвораВакуумного = ВКЛ;
 3310          						В СОСТ СообщениеСменаСостоянияОшибки;
 3311          					}
 3312          				}
 3313          			}
 3314          		}  /* конец проверка на достоверность*/
 3315          	}  /* конец состояния*/
 3316          
 3317          	СОСТ СообщениеСменаСостоянияСреднего{
 3318          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СРЕДНЕЕ_СОСТОЯНИЕ_ЗАТВОРА_ВАКУУМНОГО))В  СОСТ СменаСостоянияСреднего;
 3319          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 3320          	} 
 3321          	СОСТ СообщениеСменаСостоянияЗакрытия{
 3322          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ЗАКРЫТ))В  СОСТ СменаСостоянияЗакрытия;
 3323          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 3324          	} 
 3325          	СОСТ СообщениеСменаСостоянияОткрытия{
 3326          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ЗАТВОР_ВАКУУМНЫЙ_ОТКРЫТ))В  СОСТ СменаСостоянияОткрытия;
 3327          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 3328          	} 
 3329          	СОСТ СообщениеСменаСостоянияОшибки{
 3330          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СОСТОЯНИЕ_ОШИБКИ_ЗАТВОРА_ВАКУУМНОГО))В  СОСТ СменаСостоянияОшибки;
 3331          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;    
 3332          	}
 3333          	
 3334          	СОСТ СменаСостоянияСреднего{
 3335          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/  3336          
 3337                  ЕСЛИ (((К_ОТКР_ЗАТВОР_ВАК) || (К_ЗАКР_ЗАТВОР_ВАК)) && (Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК))  В СОСТ Начало;
 3338          	}
 3339          	СОСТ СменаСостоянияЗакрытия{
 3340          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/  3341          
 3342          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК || (!К_ЗАКР_ЗАТВОР_ВАК))  && (Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК)) В СОСТ Начало;
 3343          	}
 3344          	СОСТ СменаСостоянияОткрытия{
 3345          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/  3346          
 3347          		ЕСЛИ (((!К_ОТКР_ЗАТВОР_ВАК) || К_ЗАКР_ЗАТВОР_ВАК)  && (Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК)) В СОСТ Начало;
 3348          	}
 3349          	СОСТ СменаСостоянияОшибки{
 3350          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ; }/* для отладки без достоверностей*/  3351          
 3352          		ЕСЛИ (((!К_ОТКР_ЗАТВОР_ВАК) || (!К_ЗАКР_ЗАТВОР_ВАК))  && (Д_ОТКР_ЗАТВОР_ВАК) && (Д_ЗАКР_ЗАТВОР_ВАК))  В СОСТ Начало;
 3353          	}
 3354          
 3355          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3356          	СОСТ НарушениеСвязи {
 3357          		В СОСТ Начало;
 3358          	}
 3359          }
 3360          
 3361          /*===========================================================*/
 3362          /*=====   Процесс открытия затвора вакуумного         =======*/
 3363          /*===========================================================*/
 3364          ПРОЦ ОТКР_ЗАТВОР_ВАК{
 3365           ИЗ ПРОЦ Инициализация 	К_ОТКР_ЗАТВОР_ВАК,
 3366          						К_ЗАКР_ЗАТВОР_ВАК,
 3367          						У_ЗАТВОР_ВАК,
 3368          						Д_ОТКР_ЗАТВОР_ВАК,
 3369          						Д_ЗАКР_ЗАТВОР_ВАК,
 3370          						К_Достоверности;
 3371            ЛОГ У_Откат ЛОКАЛ;		
 3372          	СОСТ Начало{
 3373          		У_Откат = У_ЗАТВОР_ВАК;
 3374          		ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ЗАКР_ЗАТВОР_ВАК;
 3375          		СТОП ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного;
 3376          		У_ЗАТВОР_ВАК = ОТКР;
 3377          		В СЛЕДУЮЩЕЕ;      
 3378          	}
 3379          	СОСТ Контроль{ 
 3380          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ;} /* для отладки без достоверностей*/  3381           
 3382          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВКЛ) && (Д_ОТКР_ЗАТВОР_ВАК) &&
 3383          				(К_ЗАКР_ЗАТВОР_ВАК == ВЫК) && (Д_ЗАКР_ЗАТВОР_ВАК)) {
 3384          			СТАРТ ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного;		
 3385          			СТОП;
 3386          		}
 3387          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ЗАТ_ВАК В СОСТ Ошибка;
 3388          	}
 3389          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3390          	СОСТ Ошибка {
 3391          		У_ЗАТВОР_ВАК = У_Откат;
 3392          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ОТКРЫТИЯ_ЗАТВОРА_ВАКУУМНОГО))	ОШИБКА;
 3393          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3394          	}
 3395          	СОСТ НарушениеСвязи {
 3396          	   ОШИБКА;
 3397          	}
 3398          }   /*конец процесса ОТКР_ЗАТВОР_ВАК */
 3399          /*===========================================================*/
 3400          /*=====   Процесс закрытия затвора вакуумного         =======*/
 3401          /*===========================================================*/
 3402          ПРОЦ ЗАКР_ЗАТВОР_ВАК{
 3403           ИЗ ПРОЦ Инициализация 	К_ОТКР_ЗАТВОР_ВАК,
 3404          						К_ЗАКР_ЗАТВОР_ВАК,
 3405          						У_ЗАТВОР_ВАК,
 3406          						Д_ОТКР_ЗАТВОР_ВАК,
 3407          						Д_ЗАКР_ЗАТВОР_ВАК,
 3408          						К_Достоверности;
 3409            ЛОГ У_Откат ЛОКАЛ;
 3410          	СОСТ Начало{
 3411          		У_Откат = У_ЗАТВОР_ВАК;
 3412          		ЕСЛИ (ПРОЦ ОТКР_ЗАТВОР_ВАК В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ОТКР_ЗАТВОР_ВАК;
 3413          		СТОП ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного;
 3414          		У_ЗАТВОР_ВАК = ЗАКР;
 3415          		В СЛЕДУЮЩЕЕ;      
 3416          	}
 3417          	СОСТ Контроль{ 
 3418          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ;} /* для отладки без достоверностей*/  3419           
 3420          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВЫК) && (Д_ОТКР_ЗАТВОР_ВАК) &&
 3421          				(К_ЗАКР_ЗАТВОР_ВАК == ВКЛ) && (Д_ЗАКР_ЗАТВОР_ВАК) ) {
 3422          			СТАРТ ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного;	
 3423          			СТОП;
 3424          		} 
 3425          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ЗАТ_ВАК В СОСТ Ошибка;
 3426          	}
 3427          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3428          	СОСТ Ошибка {
 3429          		У_ЗАТВОР_ВАК = У_Откат;
 3430          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ЗАКРЫТИЯ_ЗАТВОРА_ВАКУУМНОГО))	ОШИБКА;
 3431          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3432          	}
 3433          	СОСТ НарушениеСвязи {
 3434          		ОШИБКА;
 3435          	}
 3436          } /*конец процесса ЗАКР_ЗАТВОР_ВАК */
 3437          
 3438          
 3439          /*========================================================*/
 3440          /*=====  Процесс контроля включенности затвора вак.  =====*/
 3441          /*========================================================*/
 3442          /*  затвор был открыт, но вдруг закрылся */
 3443          ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного{
 3444          	ИЗ ПРОЦ Инициализация 	К_ОТКР_ЗАТВОР_ВАК,
 3445          							К_ЗАКР_ЗАТВОР_ВАК,
 3446          							Д_ОТКР_ЗАТВОР_ВАК,
 3447          							Д_ЗАКР_ЗАТВОР_ВАК,
 3448          							У_ЗАТВОР_ВАК,
 3449          							К_Достоверности;
 3450          
 3451          	СОСТ КонтрольЗакрытия {
 3452          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ;} /* для отладки без достоверностей*/  3453           
 3454          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВЫК) && (Д_ОТКР_ЗАТВОР_ВАК) &&
 3455          				(К_ЗАКР_ЗАТВОР_ВАК == ВКЛ) && (Д_ЗАКР_ЗАТВОР_ВАК) )
 3456          
 3457          		{
 3458          			СТАРТ ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного;
 3459          			У_ЗАТВОР_ВАК = ЗАКР;
 3460          			В СОСТ Ошибка;
 3461          		}
 3462          	}
 3463          	СОСТ Ошибка {
 3464          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ЗАКРЫТИЕ_ЗАТ_ВАКУУМНОГО)) {
 3465          			ОШИБКА; }
 3466          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3467          	}
 3468          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 3469          	СОСТ НарушениеСвязи {
 3470          		ОШИБКА;
 3471          	}
 3472          }	
 3473          /*=========================================================*/
 3474          /*=====   Процесс контроля выключенности затвора вак  =====*/
 3475          /*=========================================================*/
 3476          /*  затвор был закрыт, но вдруг открылся */
 3477          ПРОЦ КонтрольСпонтанногоОткрытияЗатвораВакуумного{
 3478          	ИЗ ПРОЦ Инициализация 	К_ОТКР_ЗАТВОР_ВАК,
 3479          							К_ЗАКР_ЗАТВОР_ВАК,
 3480          							Д_ОТКР_ЗАТВОР_ВАК,
 3481          							Д_ЗАКР_ЗАТВОР_ВАК,
 3482          							У_ЗАТВОР_ВАК,
 3483          							К_Достоверности;
 3484          	
 3485          	СОСТ Контроль {
 3486          		ЕСЛИ (К_Достоверности == Не_проверяются) {Д_ОТКР_ЗАТВОР_ВАК = ВКЛ; Д_ЗАКР_ЗАТВОР_ВАК = ВКЛ;} /* для отладки без достоверностей*/  3487           
 3488          		ЕСЛИ ((К_ОТКР_ЗАТВОР_ВАК == ВКЛ) && (Д_ОТКР_ЗАТВОР_ВАК) &&
 3489          				(К_ЗАКР_ЗАТВОР_ВАК == ВЫК) && (Д_ЗАКР_ЗАТВОР_ВАК) )
 3490          			{
 3491          				СТАРТ ПРОЦ КонтрольСпонтанногоЗакрытияЗатвораВакуумного;
 3492          				У_ЗАТВОР_ВАК = ОТКР;
 3493          				В СОСТ Ошибка;
 3494          			}
 3495          	}
 3496          	СОСТ Ошибка {
 3497          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ОТКРЫТИЕ_ЗАТ_ВАКУУМНОГО))  ОШИБКА;
 3498          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3499          	}
 3500              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 3501          	СОСТ НарушениеСвязи {
 3502          		ОШИБКА;
 3503          	}
 3504          }			  
 3505          /*===========================================================*/
 3506          /*=====   Процесс открытия сапуна                    =======*/
 3507          /*===========================================================*/
 3508          ПРОЦ ОТКР_САПУН{
 3509           ИЗ ПРОЦ Инициализация 	К_САПУН, 
 3510          						У_САПУН,
 3511          						Д_САПУН,
 3512          						К_Достоверности;
 3513            ЛОГ У_Откат ЛОКАЛ;						
 3514          	СОСТ Начало{
 3515          		У_Откат = У_САПУН;
 3516          		ЕСЛИ (ПРОЦ ЗАКР_САПУН В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ЗАКР_САПУН;
 3517          		СТОП ПРОЦ КонтрольСпонтанногоОткрытияСапуна;	
 3518          		У_САПУН = ОТКР;
 3519          		В СЛЕДУЮЩЕЕ;      
 3520          	}
 3521          	СОСТ КонтрольОткрытия{
 3522          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/  
 3523          		ЕСЛИ ((К_САПУН == ОТКР) && (Д_САПУН)){
 3524          			СТАРТ ПРОЦ КонтрольСпонтанногоЗакрытияСапуна;	
 3525          			СТОП;	
 3526          		}
 3527          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_САПУНА В СОСТ Ошибка;  /* здесь надо выдавать код ошибки в ГУИ */
 3528          	}
 3529          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3530          	СОСТ Ошибка {
 3531          		У_САПУН = У_Откат;
 3532          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ОТКРЫТИЯ_САПУНА))	ОШИБКА;
 3533          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3534          	}
 3535            СОСТ НарушениеСвязи {
 3536          	   ОШИБКА;
 3537           }
 3538          }  /*конец процесса ОТКР_САПУН  */
 3539          
 3540          
 3541          /*===========================================================*/
 3542          /*==!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! ==========================*/
 3543          /*=====   Процесс закрытия сапуна                    =======*/
 3544          /*===========================================================*/
 3545          ПРОЦ ЗАКР_САПУН{
 3546           ИЗ ПРОЦ Инициализация 	К_САПУН,
 3547                                	У_САПУН,
 3548          						Д_САПУН,
 3549          						К_Достоверности;
 3550            ЛОГ У_Откат ЛОКАЛ;
 3551          
 3552          	СОСТ Начало{
 3553          	У_Откат = У_САПУН;
 3554          	ЕСЛИ (ПРОЦ ОТКР_САПУН В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ОТКР_САПУН;
 3555          		СТОП ПРОЦ КонтрольСпонтанногоЗакрытияСапуна;   
 3556          		У_САПУН = ЗАКР;
 3557          		В СЛЕДУЮЩЕЕ;      
 3558          	}
 3559          	СОСТ КонтрольЗакрытия{ 
 3560          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/  
 3561          		ЕСЛИ ((К_САПУН == ЗАКР) && (Д_САПУН)){
 3562          			СТАРТ ПРОЦ КонтрольСпонтанногоОткрытияСапуна;	
 3563          			СТОП;	
 3564          		}
 3565          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_САПУНА 	В СОСТ Ошибка;
 3566            
 3567          	}
 3568          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3569          	СОСТ Ошибка {
 3570          		У_САПУН = У_Откат;
 3571          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ЗАКРЫТИЯ_САПУНА))	ОШИБКА;
 3572          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3573          	}
 3574          	СОСТ НарушениеСвязи {
 3575          		ОШИБКА;
 3576          	}
 3577          } /*конец процесса ЗАКР_САПУН  */
 3578          
 3579          
 3580          /*================================================================*/
 3581          /*         Процесс КонтрольСостоянияПитанияСапуна    13 декабря   */
 3582          /*================================================================*/
 3583          ПРОЦ КонтрольСостоянияПитанияСапуна{
 3584          	ИЗ ПРОЦ Инициализация 	К_САПУН,
 3585          							Д_САПУН,
 3586          							СостояниеСапуна,
 3587          							К_Достоверности;
 3588          	СОСТ Начало {
 3589          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/
 3590          	    ЕСЛИ (Д_САПУН){
 3591          			ЕСЛИ (К_САПУН){
 3592          				СостояниеСапуна = ОТКР; В СОСТ ОткрытСообщаем;
 3593          			}
 3594          			ИНАЧЕ{
 3595          				СостояниеСапуна = ЗАКР; 	В СОСТ ЗакрытСообщаем;
 3596          			}		
 3597          		}
 3598          /*	ТАЙМАУТ МАКСИМАЛЬНАЯ_ДЛИТЕЛЬНОСТЬ_ОТСУТСТВИЯ_ДОСТОВЕРНОСТИ В СЛЕДУЮЩЕЕ;??????	*/
 3599          	}							
 3600          	СОСТ ОткрытСообщаем{ 
 3601          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_САПУН_ОТКРЫТ))  В  СОСТ СменаСостоянияОткрыт;
 3602          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3603              }							
 3604              СОСТ ЗакрытСообщаем{ 
 3605          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_САПУН_ЗАКРЫТ))  В СОСТ СменаСостоянияЗакрыт;
 3606          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3607          	}							
 3608              СОСТ СменаСостоянияОткрыт{
 3609          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/
 3610          		ЕСЛИ ((!К_САПУН)&&(Д_САПУН))  В СОСТ Начало;
 3611          	}
 3612          	СОСТ СменаСостоянияЗакрыт{
 3613          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/
 3614          		ЕСЛИ ((К_САПУН) && (Д_САПУН))  В СОСТ Начало;
 3615          	}  							
 3616          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3617           СОСТ НарушениеСвязи {
 3618                В СОСТ Начало;
 3619           }
 3620          }
 3621          /*========================================================*/
 3622          /*=====  Процесс контроля включенности сапуна        =====*/
 3623          /*========================================================*/
 3624          ПРОЦ КонтрольСпонтанногоЗакрытияСапуна{
 3625          	ИЗ ПРОЦ Инициализация 	К_САПУН,
 3626          							Д_САПУН,
 3627          							У_САПУН,
 3628          							К_Достоверности;
 3629          
 3630          	СОСТ КонтрольЗакрытия {
 3631          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/  
 3632          		ЕСЛИ ((К_САПУН == ВЫК) && (Д_САПУН)) 
 3633          			{	
 3634          				СТАРТ ПРОЦ КонтрольСпонтанногоОткрытияСапуна;
 3635          				У_САПУН = ЗАКР;
 3636          				В СОСТ Ошибка;
 3637          			}
 3638          	}
 3639          	СОСТ Ошибка {
 3640          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ЗАКРЫТИЕ_САПУНА)) ОШИБКА;
 3641          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3642          	}
 3643          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 3644          	СОСТ НарушениеСвязи {
 3645          		ОШИБКА;
 3646          	}
 3647          }
 3648          
 3649          	
 3650          /*=========================================================*/
 3651          /*=====   Процесс контроля выключенности сапуна       =====*/
 3652          /*=========================================================*/
 3653          ПРОЦ КонтрольСпонтанногоОткрытияСапуна{
 3654          	ИЗ ПРОЦ Инициализация 	К_САПУН,
 3655          							Д_САПУН,
 3656          							У_САПУН,
 3657          							К_Достоверности;
 3658          	
 3659          	СОСТ Контроль {
 3660          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_САПУН = ВКЛ;  /* для отладки без достоверностей*/ 
 3661          		ЕСЛИ ((К_САПУН == ВКЛ) && (Д_САПУН))
 3662          		{
 3663          			СТАРТ ПРОЦ КонтрольСпонтанногоЗакрытияСапуна;
 3664          			У_САПУН = ОТКР;
 3665          			В СОСТ Ошибка;
 3666          		}
 3667          	}
 3668          	СОСТ Ошибка {
 3669          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ОТКРЫТИЕ_САПУНА)) ОШИБКА;
 3670          				/*  если включился, то и ладно, вакуумирования-то нет !!!!!!!!!!!!!!!!!*/
 3671          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3672          	}
 3673          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 3674          	СОСТ НарушениеСвязи {
 3675          		ОШИБКА;
 3676          	}
 3677          }
 3678          
 3679          
 3680          		  
 3681          /*================================================================*/
 3682          /*              Процесс включить питание вакуумного насоса        */
 3683          /*================================================================*/
 3684          ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА{  
 3685           ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3686          						У_ПИТ_УПП_ВАК_НАСОСА,  
 3687          						Д_ПИТ_УПП_ВАК_НАСОСА,  
 3688          						К_Достоверности;
 3689            ЛОГ У_Откат ЛОКАЛ;
 3690            
 3691          	СОСТ Начало{
 3692          		У_Откат = У_ПИТ_УПП_ВАК_НАСОСА;
 3693          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА;  
 3694          		СТОП ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса;
 3695          		У_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;   
 3696          		В СЛЕДУЮЩЕЕ;      
 3697          	}
 3698          	СОСТ КонтрольВключения{ 
 3699          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/   
 3700          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА == ВКЛ) && (Д_ПИТ_УПП_ВАК_НАСОСА)){        
 3701          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса;
 3702          			СТОП;	
 3703          		}
 3704          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВАК_НАСОСА 	В СОСТ Ошибка;
 3705           } 
 3706          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3707          	СОСТ Ошибка {
 3708          		У_ПИТ_УПП_ВАК_НАСОСА = У_Откат;
 3709          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ПИТАНИЯ_УПП_ВАКУУМНОГО_НАСОСА))	ОШИБКА;
 3710          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3711          	}
 3712          	СОСТ НарушениеСвязи {
 3713          	   ОШИБКА;
 3714          	} 
 3715          } /*конец процесса ВКЛ_ПИТ_УПП_ВАК_НАСОСА  */   
 3716          
 3717          /*================================================================*/
 3718          /*              Процесс выключить питание вакуумного насоса       */
 3719          /*================================================================*/
 3720          ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА{  
 3721           ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3722          						У_ПИТ_УПП_ВАК_НАСОСА,  
 3723          						Д_ПИТ_УПП_ВАК_НАСОСА,  
 3724          						К_Достоверности;
 3725            ЛОГ У_Откат ЛОКАЛ;
 3726            
 3727          	СОСТ Начало{
 3728          		У_Откат = У_ПИТ_УПП_ВАК_НАСОСА;
 3729          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА; 
 3730          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса;
 3731          		У_ПИТ_УПП_ВАК_НАСОСА = ВЫК;   
 3732          		В СЛЕДУЮЩЕЕ;      
 3733          	}
 3734          
 3735          	СОСТ КонтрольВыключения{
 3736          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/ 
 3737          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА == ВЫК) && (Д_ПИТ_УПП_ВАК_НАСОСА)) {  
 3738          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса;
 3739          			СТОП;	
 3740          		}
 3741          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_ВАК_НАСОСА 	В СОСТ Ошибка;
 3742          	} 
 3743          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3744          	СОСТ Ошибка {
 3745          		У_ПИТ_УПП_ВАК_НАСОСА = У_Откат;
 3746          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ПИТАНИЯ_УПП_ВАКУУМНОГО_НАСОСА))	ОШИБКА;
 3747          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3748          	}
 3749          	СОСТ НарушениеСвязи {
 3750          	   ОШИБКА;
 3751          	}
 3752          }  /*конец процесса ВЫК_ПИТ_УПП_ВАК_НАСОСА */  
 3753          
 3754          /*================================================================*/
 3755          /*         Процесс КонтрольСостоянияПитанияУППВакНасоса    13 декабря   */
 3756          /*================================================================*/
 3757          ПРОЦ КонтрольСостоянияПитанияУППВакНасоса{
 3758          	ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3759          							Д_ПИТ_УПП_ВАК_НАСОСА,  
 3760          							СостояниеУППВакуумногоНасоса,
 3761          							К_Достоверности;
 3762          	СОСТ Начало {
 3763          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/
 3764          	    ЕСЛИ (Д_ПИТ_УПП_ВАК_НАСОСА){
 3765          			ЕСЛИ (К_ПИТ_УПП_ВАК_НАСОСА){
 3766          				СостояниеУППВакуумногоНасоса = ВКЛ; В СОСТ ВключенСообщаем;
 3767          			}
 3768          			ИНАЧЕ{
 3769          				СостояниеУППВакуумногоНасоса = ВЫК; 	В СОСТ ВыключенСообщаем;
 3770          			}		
 3771          		}
 3772          	}								
 3773          	СОСТ ВключенСообщаем{ 
 3774          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_УПП_ВАКУУМНОГО_НАСОСА_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 3775          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3776              }							
 3777              СОСТ ВыключенСообщаем{ 
 3778          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_УПП_ВАКУУМНОГО_НАСОСА_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 3779          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3780          	}	
 3781             СОСТ СменаСостоянияВКЛ{
 3782          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/
 3783          		ЕСЛИ ((!К_ПИТ_УПП_ВАК_НАСОСА)&&(Д_ПИТ_УПП_ВАК_НАСОСА))  В СОСТ Начало;
 3784          	}
 3785          	СОСТ СменаСостоянияВЫК{
 3786          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/
 3787          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА) && (Д_ПИТ_УПП_ВАК_НАСОСА))  В СОСТ Начало;
 3788          	}  
 3789          
 3790          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3791          	СОСТ НарушениеСвязи {
 3792                В СОСТ Начало;
 3793          	}
 3794          }
 3795          /*========================================================*/
 3796          /*=====   Процесс контроля спонтанного выключения  =====*/
 3797          /*========================================================*/
 3798          ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса{
 3799          	ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3800          							Д_ПИТ_УПП_ВАК_НАСОСА,
 3801          							У_ПИТ_УПП_ВАК_НАСОСА,
 3802          							К_Достоверности;
 3803          
 3804          	СОСТ Контроль {
 3805          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/	
 3806          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА == ВЫК) && (Д_ПИТ_УПП_ВАК_НАСОСА))
 3807          			{ 
 3808          				СТАРТ ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса;
 3809          				У_ПИТ_УПП_ВАК_НАСОСА = ВЫК;
 3810          				В СОСТ Ошибка;
 3811          			}
 3812          	}
 3813          	СОСТ Ошибка {
 3814          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_УПП_ВАКУУМНОГО_НАСОСА)) ОШИБКА;  
 3815          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3816          	}
 3817          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 3818          	СОСТ НарушениеСвязи {
 3819          		ОШИБКА;
 3820          	}
 3821          }
 3822          /*=========================================================*/
 3823          /*=====   Процесс контроля спонтанного включения  =====*/
 3824          /*=========================================================*/
 3825          ПРОЦ КонтрольСпонтанногоВключенияУППВакНасоса{
 3826          	ИЗ ПРОЦ Инициализация 	К_ПИТ_УПП_ВАК_НАСОСА,  
 3827          							Д_ПИТ_УПП_ВАК_НАСОСА,
 3828          							У_ПИТ_УПП_ВАК_НАСОСА,
 3829          							К_Достоверности;
 3830          	
 3831          	СОСТ Контроль {
 3832          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;  /* для отладки без достоверностей*/
 3833          		ЕСЛИ ((К_ПИТ_УПП_ВАК_НАСОСА == ВКЛ) && (Д_ПИТ_УПП_ВАК_НАСОСА))
 3834          			{	
 3835          				СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияУППВакНасоса;
 3836          				У_ПИТ_УПП_ВАК_НАСОСА = ВКЛ;
 3837          				В СОСТ Ошибка;
 3838          			}
 3839          	}
 3840          	СОСТ Ошибка {
 3841          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_УПП_ВАКУУМНОГО_НАСОСА)) ОШИБКА;
 3842          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3843          	}
 3844              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 3845          	СОСТ НарушениеСвязи {
 3846          		ОШИБКА;
 3847          	}
 3848          }			  
 3849          /*================================================================*/
 3850          /*              Процесс Подать питание на регулятор температуры   */
 3851          /*================================================================*/
 3852          ПРОЦ ВКЛ_ПИТ_РЕГ_Т{
 3853           ИЗ ПРОЦ Инициализация 	У_ПИТ_РЕГ_Т,					
 3854          						К_ПИТ_РЕГ_Т,
 3855          						Д_ПИТ_РЕГ_Т,
 3856          						ФлагГотовУрВодыБО,
 3857          						К_Достоверности;
 3858            ЛОГ У_Откат ЛОКАЛ;
 3859            
 3860          	СОСТ Начало{
 3861          	/*	ЕСЛИ (ФлагГотовУрВодыБО == ВНЕ_НОРМЫ) В СОСТ Ошибка; ????восстановить?????????*/
 3862          	/*	ИНАЧЕ { */
 3863          		У_Откат = У_ПИТ_РЕГ_Т;
 3864          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_РЕГ_Т В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_РЕГ_Т;
 3865          		СТОП ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т;
 3866          		У_ПИТ_РЕГ_Т = ВКЛ;
 3867          		В СЛЕДУЮЩЕЕ;      
 3868          	/*	}	*/
 3869          	}
 3870          	СОСТ КонтрольВключения{
 3871          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/ 
 3872          		ЕСЛИ ((К_ПИТ_РЕГ_Т == ВКЛ) && (Д_ПИТ_РЕГ_Т)) {
 3873          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т;
 3874          		СТОП;	
 3875          		}
 3876          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_Т В СОСТ Ошибка;
 3877           } 
 3878          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3879          	СОСТ Ошибка {
 3880          		У_ПИТ_РЕГ_Т = У_Откат;
 3881          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ))	ОШИБКА;
 3882          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3883          	}
 3884          	СОСТ НарушениеСвязи{
 3885          	   ОШИБКА;
 3886          	} 
 3887          } /*конец процесса ВКЛ_ПИТ_РЕГ_Т */
 3888          
 3889          /*================================================================*/
 3890          /*        Процесс Снять питание с регулятора температуры          */
 3891          /*================================================================*/
 3892          ПРОЦ ВЫК_ПИТ_РЕГ_Т{
 3893           ИЗ ПРОЦ Инициализация 	У_ПИТ_РЕГ_Т,
 3894          						К_ПИТ_РЕГ_Т,
 3895          						Д_ПИТ_РЕГ_Т,
 3896          						К_Достоверности;
 3897             ЛОГ У_Откат ЛОКАЛ;
 3898             
 3899          	СОСТ Начало{
 3900          		У_Откат = У_ПИТ_РЕГ_Т;
 3901          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_РЕГ_Т В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_РЕГ_Т;
 3902          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т;
 3903          		У_ПИТ_РЕГ_Т  = ВЫК;
 3904          		В СЛЕДУЮЩЕЕ;      
 3905          	}
 3906          	СОСТ КонтрольВыключения{ 
 3907          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/  
 3908          		ЕСЛИ ((К_ПИТ_РЕГ_Т == ВЫК) && (Д_ПИТ_РЕГ_Т)) {	
 3909          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т;  
 3910          			СТОП;	
 3911          		} 
 3912          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_Т В СОСТ Ошибка;
 3913          	}
 3914          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3915          	СОСТ Ошибка {
 3916          		У_ПИТ_РЕГ_Т = У_Откат;
 3917          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ))	ОШИБКА;
 3918          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3919          	}
 3920          	СОСТ НарушениеСвязи {
 3921          	   ОШИБКА;
 3922          	} 
 3923          }  /*конец процесса ВЫК_ПИТ_РЕГ_Т */
 3924          
 3925          /*================================================================*/
 3926          /*         Процесс КонтрольСостоянияРегулятораТемпературы       */
 3927          /*================================================================*/
 3928          ПРОЦ КонтрольСостоянияПитанияРЕГ_Т{
 3929          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_Т,
 3930          							Д_ПИТ_РЕГ_Т,
 3931          							СостояниеПИТ_РЕГ_Т,
 3932          							К_Достоверности;
 3933          	СОСТ Начало {
 3934          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 3935          	    ЕСЛИ (Д_ПИТ_РЕГ_Т){
 3936          			ЕСЛИ (К_ПИТ_РЕГ_Т){
 3937          				СостояниеПИТ_РЕГ_Т = ВКЛ;  В СОСТ ВключенСообщаем;
 3938          			}
 3939          			ИНАЧЕ{
 3940          				СостояниеПИТ_РЕГ_Т = ВЫК;  	В СОСТ ВыключенСообщаем;
 3941          			}		
 3942          		}
 3943          	}							
 3944          	СОСТ ВключенСообщаем{ 
 3945          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 3946          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3947              }							
 3948              СОСТ ВыключенСообщаем{ 
 3949          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 3950          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 3951          	}								
 3952             СОСТ СменаСостоянияВКЛ{
 3953          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 3954          		ЕСЛИ ((!К_ПИТ_РЕГ_Т)&&(Д_ПИТ_РЕГ_Т))  В СОСТ Начало;
 3955          	}
 3956          	СОСТ СменаСостоянияВЫК{
 3957          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 3958          		ЕСЛИ ((К_ПИТ_РЕГ_Т) && (Д_ПИТ_РЕГ_Т))  В СОСТ Начало;
 3959          	} 							
 3960          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 3961          	СОСТ НарушениеСвязи {
 3962                В СОСТ Начало;
 3963          	}
 3964          }
 3965          /*========================================================*/
 3966          /*=====   Процесс контроля спонтанного выключения  =====*/
 3967          /*========================================================*/
 3968          ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т{
 3969          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_Т,
 3970          							Д_ПИТ_РЕГ_Т,
 3971          							У_ПИТ_РЕГ_Т,
 3972          							К_Достоверности;
 3973          
 3974          	СОСТ Контроль {
 3975          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 3976          		ЕСЛИ ((К_ПИТ_РЕГ_Т == ВЫК) && (Д_ПИТ_РЕГ_Т)) 
 3977          		{
 3978          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т;
 3979          			У_ПИТ_РЕГ_Т = ВЫК;
 3980          			В СОСТ Ошибка;
 3981          		}
 3982          	}
 3983          	СОСТ Ошибка {
 3984          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ)) ОШИБКА;
 3985          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 3986          	}
 3987          	
 3988              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 3989          	СОСТ НарушениеСвязи {
 3990          		ОШИБКА;
 3991          	}
 3992          }	
 3993          /*=========================================================*/
 3994          /*=====   Процесс контроля спонтанного включения  =====*/
 3995          /*=========================================================*/
 3996          ПРОЦ КонтрольСпонтанногоВключенияРЕГ_Т{
 3997          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_Т,
 3998          							Д_ПИТ_РЕГ_Т, 
 3999          							У_ПИТ_РЕГ_Т,
 4000          							К_Достоверности;
 4001          	
 4002          	СОСТ Контроль {
 4003          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_Т = ВКЛ;  /* для отладки без достоверностей*/
 4004          		ЕСЛИ ((К_ПИТ_РЕГ_Т == ВКЛ) && (Д_ПИТ_РЕГ_Т)) 
 4005          		{
 4006          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_Т;
 4007          			У_ПИТ_РЕГ_Т = ВКЛ;
 4008          			В СОСТ Ошибка;
 4009          		}
 4010          	}
 4011          	СОСТ Ошибка {
 4012          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_РЕГУЛЯТОРА_ТЕМПЕРАТУРЫ)) ОШИБКА;
 4013          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4014          	}
 4015          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 4016          	СОСТ НарушениеСвязи {
 4017          		ОШИБКА;
 4018          	}
 4019          }			  
 4020          /*================================================================*/
 4021          /*        Процесс Подать питание на регулятор уровня воды         */
 4022          /*================================================================*/
 4023          ПРОЦ ВКЛ_ПИТ_РЕГ_УР{
 4024           ИЗ ПРОЦ Инициализация 	У_ПИТ_РЕГ_УР,
 4025          						К_ПИТ_РЕГ_УР,
 4026          						Д_ПИТ_РЕГ_УР,
 4027          						К_Достоверности;
 4028             ЛОГ У_Откат ЛОКАЛ;
 4029             
 4030          	СОСТ Начало{
 4031          		У_Откат = У_ПИТ_РЕГ_УР;
 4032          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_РЕГ_УР В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_РЕГ_УР;
 4033          		СТОП ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР;
 4034          		У_ПИТ_РЕГ_УР = ВКЛ;
 4035          		В СЛЕДУЮЩЕЕ;      
 4036          	}
 4037          	СОСТ Контроль{
 4038          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/ 
 4039          		ЕСЛИ ((К_ПИТ_РЕГ_УР == ВКЛ) && (Д_ПИТ_РЕГ_УР)){
 4040          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР;
 4041          		СТОП;	
 4042          		} 
 4043          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_УР В СОСТ Ошибка; 
 4044          	}
 4045          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4046          	СОСТ Ошибка {
 4047          		У_ПИТ_РЕГ_УР = У_Откат;
 4048          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_РЕГУЛЯТОРА_УРОВНЯ))	ОШИБКА;
 4049          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4050          	}
 4051          	СОСТ НарушениеСвязи {
 4052          	   ОШИБКА;
 4053          	} 
 4054          }  /*конец процесса ВКЛ_ПИТ_РЕГ_УР */
 4055          
 4056          /*================================================================*/
 4057          /*        Процесс Снять питание с регулятора уровня воды          */
 4058          /*================================================================*/
 4059          ПРОЦ ВЫК_ПИТ_РЕГ_УР{
 4060           ИЗ ПРОЦ Инициализация 	У_ПИТ_РЕГ_УР,
 4061          						К_ПИТ_РЕГ_УР,
 4062          						Д_ПИТ_РЕГ_УР,
 4063          						К_Достоверности;
 4064             ЛОГ У_Откат ЛОКАЛ;
 4065             
 4066          	СОСТ Начало{
 4067          		У_Откат = У_ПИТ_РЕГ_УР;
 4068          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_РЕГ_УР В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_РЕГ_УР;
 4069          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР;
 4070          		У_ПИТ_РЕГ_УР = ВЫК;
 4071          		В СЛЕДУЮЩЕЕ;      
 4072          	}
 4073          
 4074          	СОСТ Контроль{ 
 4075          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/  
 4076          		ЕСЛИ ((К_ПИТ_РЕГ_УР == ВЫК) && (Д_ПИТ_РЕГ_УР)){
 4077          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР;
 4078          			СТОП;	
 4079          		} 
 4080          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_РЕГ_УР 	В СОСТ Ошибка; 
 4081          	}
 4082          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4083          	СОСТ Ошибка {
 4084          		У_ПИТ_РЕГ_УР = У_Откат;
 4085          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_РЕГУЛЯТОРА_УРОВНЯ))	ОШИБКА;
 4086          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4087          	}
 4088          	СОСТ НарушениеСвязи {
 4089          	   ОШИБКА;
 4090          	} 
 4091          }  /*конец процесса ВЫК_ПИТ_РЕГ_УР */
 4092          
 4093          /*================================================================*/
 4094          /*         Процесс КонтрольСостоянияРегулятораУровня    13 декабря   */
 4095          /*================================================================*/
 4096          ПРОЦ КонтрольСостоянияПитанияРЕГ_УР{
 4097          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_УР,
 4098          							Д_ПИТ_РЕГ_УР,
 4099          							СостояниеПИТ_РЕГ_УР,
 4100          							К_Достоверности;
 4101          	СОСТ Начало {
 4102          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/
 4103          	    ЕСЛИ (Д_ПИТ_РЕГ_УР){
 4104          			ЕСЛИ (К_ПИТ_РЕГ_УР){
 4105          				СостояниеПИТ_РЕГ_УР = ВКЛ;  В СОСТ ВключенСообщаем;
 4106          			}
 4107          			ИНАЧЕ{
 4108          				СостояниеПИТ_РЕГ_УР = ВЫК;  	В СОСТ ВыключенСообщаем;
 4109          			}		
 4110          		}
 4111          	}							
 4112          	СОСТ ВключенСообщаем{ 
 4113          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_УРОВНЯ_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 4114          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4115              }							
 4116              СОСТ ВыключенСообщаем{ 
 4117          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_РЕГУЛЯТОРА_УРОВНЯ_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 4118          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4119          	}
 4120             СОСТ СменаСостоянияВКЛ{
 4121          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/
 4122          		ЕСЛИ ((!К_ПИТ_РЕГ_УР)&&(Д_ПИТ_РЕГ_УР))  В СОСТ Начало;
 4123          	}
 4124          	СОСТ СменаСостоянияВЫК{
 4125          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/
 4126          		ЕСЛИ ((К_ПИТ_РЕГ_УР) && (Д_ПИТ_РЕГ_УР))  В СОСТ Начало;
 4127          	} 	
 4128          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4129          	СОСТ НарушениеСвязи {
 4130                В СОСТ Начало;
 4131          	}
 4132          }	
 4133          /*========================================================*/
 4134          /*=====   Процесс контроля спонтанного выключения  =====*/
 4135          /*========================================================*/
 4136          ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР{
 4137          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_УР,
 4138          							Д_ПИТ_РЕГ_УР,
 4139          							У_ПИТ_РЕГ_УР,
 4140          							К_Достоверности;
 4141          
 4142          	СОСТ Контроль {
 4143          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/	
 4144          		ЕСЛИ ((К_ПИТ_РЕГ_УР == ВЫК) && (Д_ПИТ_РЕГ_УР))
 4145          		{
 4146          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР;
 4147          			У_ПИТ_РЕГ_УР = ВЫК;
 4148          			В СОСТ Ошибка;
 4149          		}
 4150          	}
 4151          	СОСТ Ошибка {
 4152          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_РЕГУЛЯТОРА_УРОВНЯ)) ОШИБКА;
 4153          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4154          	}
 4155          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 4156          	СОСТ НарушениеСвязи {
 4157          		ОШИБКА;
 4158          	}
 4159          }	
 4160          /*=========================================================*/
 4161          /*=====   Процесс контроля спонтанного включения  =====*/
 4162          /*=========================================================*/
 4163          ПРОЦ КонтрольСпонтанногоВключенияРЕГ_УР{
 4164          	ИЗ ПРОЦ Инициализация 	К_ПИТ_РЕГ_УР,
 4165          							Д_ПИТ_РЕГ_УР,
 4166          							У_ПИТ_РЕГ_УР,
 4167          							К_Достоверности;
 4168          	
 4169          	СОСТ Контроль {
 4170          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_РЕГ_УР = ВКЛ;  /* для отладки без достоверностей*/	
 4171          		ЕСЛИ ((К_ПИТ_РЕГ_УР == ВКЛ) && (Д_ПИТ_РЕГ_УР))
 4172          		{
 4173          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияРЕГ_УР;
 4174          			У_ПИТ_РЕГ_УР = ВКЛ;
 4175          			В СОСТ Ошибка;
 4176          		}
 4177          	}
 4178          	СОСТ Ошибка {
 4179          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_РЕГУЛЯТОРА_УРОВНЯ)) ОШИБКА;
 4180          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4181          	}
 4182          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 4183          	СОСТ НарушениеСвязи {
 4184          		ОШИБКА;
 4185          	}
 4186          }	
 4187          /*================================================================*/
 4188          /*              Процесс Подать питание на насос охлаждения        */
 4189          /*================================================================*/
 4190          ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ{
 4191           ИЗ ПРОЦ Инициализация 	У_ПИТ_НАС_ОХЛ,
 4192          						К_ПИТ_НАСОС_ОХЛ,
 4193          						ФлагГотовУрВодыБО,
 4194          						ФлагГотовТемпВодыБО,
 4195          						Д_ПИТ_НАСОС_ОХЛ,
 4196          						К_Достоверности
 4197          						;
 4198             ЛОГ У_Откат ЛОКАЛ;
 4199             
 4200          
 4201          	СОСТ Начало{
 4202          		У_Откат = У_ПИТ_НАС_ОХЛ;
 4203          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_НАС_ОХЛ В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ПИТ_НАС_ОХЛ;
 4204          		СТОП ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения;   
 4205          		У_ПИТ_НАС_ОХЛ = ВКЛ;
 4206          		В СЛЕДУЮЩЕЕ;      
 4207          	 }
 4208          	СОСТ Контроль{
 4209          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/	 
 4210          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ == ВКЛ) && (Д_ПИТ_НАСОС_ОХЛ)) {
 4211          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения;
 4212          			СТОП;	
 4213          		} 
 4214          	ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_НАСОС_ОХЛ В СОСТ Ошибка;
 4215          	}    
 4216          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4217          	СОСТ Ошибка {
 4218          		У_ПИТ_НАС_ОХЛ = У_Откат;
 4219          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_НАСОСА_ОХЛАЖДЕНИЯ))	ОШИБКА;
 4220          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4221          	}
 4222          	СОСТ НарушениеСвязи {
 4223          		ОШИБКА;
 4224          	 } 
 4225          } /*конец процесса ВКЛ_ПИТ_НАС_ОХЛАЖДЕНИЯ */
 4226          /*================================================================*/
 4227          /*             Процесс Снять питание с насоса охлаждения          */
 4228          /*================================================================*/
 4229          ПРОЦ ВЫК_ПИТ_НАС_ОХЛ{
 4230           ИЗ ПРОЦ Инициализация 	У_ПИТ_НАС_ОХЛ,
 4231          						К_ПИТ_НАСОС_ОХЛ,
 4232          						Д_ПИТ_НАСОС_ОХЛ,
 4233          						К_Достоверности
 4234          						;
 4235             ЛОГ У_Откат ЛОКАЛ;
 4236             
 4237          	СОСТ Начало{
 4238          		У_Откат = У_ПИТ_НАС_ОХЛ;	
 4239          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;
 4240          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения;
 4241          		У_ПИТ_НАС_ОХЛ = ВЫК;
 4242          		В СЛЕДУЮЩЕЕ;      
 4243          	}
 4244          	СОСТ Контроль{
 4245          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/ 
 4246          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ == ВЫК) && (Д_ПИТ_НАСОС_ОХЛ)) {
 4247          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения;
 4248          			СТОП;	
 4249          		}
 4250          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_НАСОС_ОХЛ В СОСТ Ошибка; 
 4251          	}
 4252          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4253          	СОСТ Ошибка {
 4254          		У_ПИТ_НАС_ОХЛ = У_Откат;
 4255          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_НАСОСА_ОХЛАЖДЕНИЯ))	ОШИБКА;
 4256          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4257          	}
 4258          	СОСТ НарушениеСвязи {
 4259          	   ОШИБКА;
 4260          	} 
 4261          } /*конец процесса ВЫК_ПИТ_НАС_ОХЛАЖДЕНИЯ */
 4262          /*================================================================*/
 4263          /*         Процесс КонтрольСостоянияНасосаОхлаждения     13 декабря  */
 4264          /*================================================================*/
 4265          ПРОЦ КонтрольСостоянияПитанияНАС_ОХЛ{
 4266          	ИЗ ПРОЦ Инициализация 	К_ПИТ_НАСОС_ОХЛ,
 4267          							Д_ПИТ_НАСОС_ОХЛ,
 4268          							СостояниеПИТ_НАСОС_ОХЛ,
 4269          							К_Достоверности;
 4270          	СОСТ Начало {
 4271          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4272          	    ЕСЛИ (Д_ПИТ_НАСОС_ОХЛ){
 4273          			ЕСЛИ (К_ПИТ_НАСОС_ОХЛ){
 4274          				СостояниеПИТ_НАСОС_ОХЛ = ВКЛ;  В СОСТ ВключенСообщаем;
 4275          			}
 4276          			ИНАЧЕ{
 4277          				СостояниеПИТ_НАСОС_ОХЛ = ВЫК;  В СОСТ ВыключенСообщаем;
 4278          			}		
 4279          		}
 4280          	}							
 4281          	СОСТ ВключенСообщаем{ 
 4282          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_НАСОСА_ОХЛАЖДЕНИЯ_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 4283          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4284              }							
 4285              СОСТ ВыключенСообщаем{ 
 4286          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ПИТАНИЕ_НАСОСА_ОХЛАЖДЕНИЯ_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 4287          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4288          	}							
 4289             СОСТ СменаСостоянияВКЛ{
 4290          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4291          		ЕСЛИ ((!К_ПИТ_НАСОС_ОХЛ)&&(Д_ПИТ_НАСОС_ОХЛ))  В СОСТ Начало;
 4292          	}
 4293          	СОСТ СменаСостоянияВЫК{
 4294          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4295          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ) && (Д_ПИТ_НАСОС_ОХЛ))  В СОСТ Начало;
 4296          	} 	
 4297          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4298          	СОСТ НарушениеСвязи {
 4299                В СОСТ Начало;
 4300          	}
 4301          }
 4302          /*========================================================*/
 4303          /*=====   Процесс контроля спонтанного выключения  =====*/
 4304          /*========================================================*/
 4305          ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения{
 4306          	ИЗ ПРОЦ Инициализация 	К_ПИТ_НАСОС_ОХЛ,
 4307          							Д_ПИТ_НАСОС_ОХЛ,
 4308          							У_ПИТ_НАС_ОХЛ,
 4309          							К_Достоверности;
 4310          
 4311          	СОСТ Контроль {
 4312          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4313          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ == ВЫК) && (Д_ПИТ_НАСОС_ОХЛ))
 4314          			{
 4315          				СТАРТ ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения;
 4316          				У_ПИТ_НАС_ОХЛ = ВЫК;
 4317          				В СОСТ Ошибка;
 4318          			}
 4319          	}
 4320          	СОСТ Ошибка {
 4321          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_НАСОСА_ОХЛАЖДЕНИЯ)) ОШИБКА;
 4322          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4323          	}
 4324          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 4325          	СОСТ НарушениеСвязи {
 4326          		ОШИБКА;
 4327          	}
 4328          }	
 4329          /*=========================================================*/
 4330          /*=====   Процесс контроля спонтанного включения  =====*/
 4331          /*=========================================================*/
 4332          ПРОЦ КонтрольСпонтанногоВключенияНасосаОхлаждения{
 4333          	ИЗ ПРОЦ Инициализация 	К_ПИТ_НАСОС_ОХЛ,
 4334          							Д_ПИТ_НАСОС_ОХЛ,
 4335          							У_ПИТ_НАС_ОХЛ,
 4336          							К_Достоверности;
 4337          	
 4338          	СОСТ Контроль {
 4339          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_ПИТ_НАСОС_ОХЛ = ВКЛ;  /* для отладки без достоверностей*/
 4340          		ЕСЛИ ((К_ПИТ_НАСОС_ОХЛ == ВКЛ) && (Д_ПИТ_НАСОС_ОХЛ)) 
 4341          		{ 
 4342          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияНасосаОхлаждения;
 4343          			У_ПИТ_НАС_ОХЛ = ВКЛ;
 4344          			В СОСТ Ошибка;
 4345          		}
 4346          	}
 4347          	СОСТ Ошибка {
 4348          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_НАСОСА_ОХЛАЖДЕНИЯ)) ОШИБКА;
 4349          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4350          	}
 4351              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 4352          	СОСТ НарушениеСвязи {
 4353          		ОШИБКА;
 4354          	}
 4355          }	
 4356          /*=========================================================++++++++++++======*/
 4357          /*==   Процесс  ВКЛЮЧИТЬ Устройство плавного пуска (запуск вакуумирования)   */
 4358          /*== это означает что вакуумного насос начнет работать          			 */
 4359          /*==========================================================++++++++++++=====*/
 4360          ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА{
 4361           ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4362          						У_УСТР_ПЛАВ_ПУСКА,
 4363          						Д_УСТР_ПЛАВ_ПУСКА,
 4364          						К_Достоверности;
 4365             ЛОГ У_Откат ЛОКАЛ;
 4366             
 4367          	СОСТ Начало{
 4368          		У_Откат = У_УСТР_ПЛАВ_ПУСКА;
 4369          		ЕСЛИ (ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА;
 4370          		СТОП ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска;
 4371          		У_УСТР_ПЛАВ_ПУСКА = ВКЛ;
 4372          		В СЛЕДУЮЩЕЕ;      
 4373          	}
 4374          	СОСТ Контроль{
 4375          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/	
 4376          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА == ВКЛ) && (Д_УСТР_ПЛАВ_ПУСКА)) {
 4377          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска;  
 4378          			СТОП;	
 4379          		}
 4380          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_УСТР_ПЛАВ_ПУСКА  	В СОСТ Ошибка;
 4381          	} 
 4382          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4383          	СОСТ Ошибка {
 4384          		У_УСТР_ПЛАВ_ПУСКА = У_Откат;
 4385          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_УСТР_ПЛАВ_ПУСКА))	ОШИБКА;
 4386          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4387          	}
 4388          	СОСТ НарушениеСвязи {
 4389          		ОШИБКА;
 4390          	} 
 4391          }  /*конец процесса ВКЛ_УСТР_ПЛАВ_ПУСКА  */
 4392          /*===============================================================*/
 4393          /*==   Процесс  ВЫКЛЮЧИТЬ Устройство плавного пуска                  */
 4394          /*===============================================================*/
 4395          ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА{
 4396           ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4397          						У_УСТР_ПЛАВ_ПУСКА,
 4398          						Д_УСТР_ПЛАВ_ПУСКА,
 4399          						К_Достоверности;
 4400             ЛОГ У_Откат ЛОКАЛ;
 4401          						
 4402          	СОСТ Начало{
 4403          		У_Откат = У_УСТР_ПЛАВ_ПУСКА;	
 4404          		ЕСЛИ (ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА;
 4405          		СТОП ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска;	
 4406          		У_УСТР_ПЛАВ_ПУСКА = ВЫК;	
 4407          		В СЛЕДУЮЩЕЕ;      
 4408          	}
 4409          	СОСТ КонтрольВыключения{
 4410          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/	
 4411          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА == ВЫК) && (Д_УСТР_ПЛАВ_ПУСКА)) {
 4412          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска;
 4413          			СТОП;	
 4414          		}
 4415          		ТАЙМАУТ ТАЙМАУТ_НА_СРАБАТЫВАНИЕ_УСТР_ПЛАВ_ПУСКА 	В СОСТ Ошибка;
 4416          	}
 4417          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4418          	СОСТ Ошибка {
 4419          		У_УСТР_ПЛАВ_ПУСКА = У_Откат;
 4420          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_УСТР_ПЛАВ_ПУСКА))	ОШИБКА;
 4421          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4422          	}
 4423          	СОСТ НарушениеСвязи {
 4424          		ОШИБКА;
 4425          	} 
 4426          } /*конец процесса ВЫК_УСТР_ПЛАВ_ПУСКА  */
 4427          /*================================================================*/
 4428          /*         Процесс КонтрольСостоянияУстройстваПлавногоПуска   13 декабря   */
 4429          /*================================================================*/
 4430          ПРОЦ КонтрольСостоянияПитанияПЛАВ_ПУСКА{
 4431          	ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4432          							Д_УСТР_ПЛАВ_ПУСКА,
 4433          							СостояниеУСТР_ПЛАВ_ПУСКА,
 4434          							К_Достоверности;
 4435          
 4436          	СОСТ Начало {
 4437          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4438          	    ЕСЛИ (Д_УСТР_ПЛАВ_ПУСКА){
 4439          			ЕСЛИ (К_УСТР_ПЛАВ_ПУСКА){
 4440          				СостояниеУСТР_ПЛАВ_ПУСКА = ВКЛ;  В СОСТ ВключенСообщаем;
 4441          			}
 4442          			ИНАЧЕ{
 4443          				СостояниеУСТР_ПЛАВ_ПУСКА = ВЫК;  В СОСТ ВыключенСообщаем;
 4444          			}		
 4445          		}
 4446          	}
 4447          	СОСТ ВключенСообщаем{ 
 4448          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УСТРОЙСТВО_ПЛАВНОГО_ПУСКА_ВКЛЮЧЕНО))  В  СОСТ СменаСостоянияВКЛ;
 4449          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4450              }							
 4451              СОСТ ВыключенСообщаем{ 
 4452          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_УСТРОЙСТВО_ПЛАВНОГО_ПУСКА_ВЫКЛЮЧЕНО))  В СОСТ СменаСостоянияВЫК;
 4453          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;   
 4454          	}
 4455             СОСТ СменаСостоянияВКЛ{
 4456          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4457          		ЕСЛИ ((!К_УСТР_ПЛАВ_ПУСКА)&&(Д_УСТР_ПЛАВ_ПУСКА))  В СОСТ Начало;
 4458          	}
 4459          	СОСТ СменаСостоянияВЫК{
 4460          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4461          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА) && (Д_УСТР_ПЛАВ_ПУСКА))  В СОСТ Начало;
 4462          	} 
 4463          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4464          	СОСТ НарушениеСвязи {
 4465                В СОСТ Начало;
 4466          	}
 4467          }
 4468          
 4469          /*========================================================*/
 4470          /*=====   Процесс контроля спонтанного выключения  =====*/
 4471          /*========================================================*/
 4472          ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска{
 4473          	ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4474          							Д_УСТР_ПЛАВ_ПУСКА,
 4475          							У_УСТР_ПЛАВ_ПУСКА,
 4476          							К_Достоверности;
 4477          
 4478          	СОСТ Контроль {
 4479          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4480          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА == ВЫК) && (Д_УСТР_ПЛАВ_ПУСКА)) 
 4481          		{	
 4482          			СТАРТ ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска;
 4483          			У_УСТР_ПЛАВ_ПУСКА = ВЫК;
 4484          			В СОСТ Ошибка;
 4485          		}
 4486          	}
 4487          	СОСТ Ошибка {
 4488          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВЫКЛЮЧЕНИЕ_УСТРОЙСТВА_ПЛАВНОГО_ПУСКА)) ОШИБКА;
 4489          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4490          	}
 4491          /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/	
 4492          	СОСТ НарушениеСвязи {
 4493          		ОШИБКА;
 4494          	}
 4495          }	
 4496          /*=========================================================*/
 4497          /*=====   Процесс контроля спонтанного включения  =====*/
 4498          /*=========================================================*/
 4499          ПРОЦ КонтрольСпонтанногоВключенияПлавнПуска{
 4500          	ИЗ ПРОЦ Инициализация 	К_УСТР_ПЛАВ_ПУСКА,
 4501          							Д_УСТР_ПЛАВ_ПУСКА,
 4502          							У_УСТР_ПЛАВ_ПУСКА,
 4503          							К_Достоверности;
 4504          	
 4505          	СОСТ Контроль {
 4506          		ЕСЛИ (К_Достоверности == Не_проверяются) Д_УСТР_ПЛАВ_ПУСКА = ВКЛ;  /* для отладки без достоверностей*/
 4507          		ЕСЛИ ((К_УСТР_ПЛАВ_ПУСКА == ВКЛ) && (Д_УСТР_ПЛАВ_ПУСКА)) {
 4508          			СТАРТ ПРОЦ КонтрольСпонтанногоВыключенияПлавнПуска;
 4509          			У_УСТР_ПЛАВ_ПУСКА = ВКЛ;
 4510          			В СОСТ Ошибка;
 4511          		}
 4512          	}
 4513          	СОСТ Ошибка {
 4514          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СПОНТАННОЕ_ВКЛЮЧЕНИЕ_УСТРОЙСТВА_ПЛАВНОГО_ПУСКА)) ОШИБКА;
 4515          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4516          	}
 4517              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/		
 4518          	СОСТ НарушениеСвязи {
 4519          		ОШИБКА;
 4520          	}
 4521          }	
 4522          /*====================================================================*/
 4523          /*              Процесс ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ 				      */
 4524          /* Процесс смотрит готовность вакуума, если в норме, то приостанавливается на одну минуту. */
 4525          /* иначе запускает процесс ВКЛ_ВАКУУМНЫЙ_НАСОС, и контролирует   */
 4526          /* глубину откачки вак-ной трубы , как только вакуумирование          */
 4527          /*  достигнет нормы ( нужный вакуум есть) процесс                     */
 4528          /*  через одну минуту снова проверяет давление в вакуумной трубе. Насос вакуумный выключается             */
 4529          /*  Если вакуумирование  не пошло или                                 */
 4530          /*  откачка не на уровне, данный процесс завершается с ошибкой  и     */
 4531          /* насос вакуумный выключается.                                       */
 4532          /*====================================================================*/
 4533          ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ{
 4534           ИЗ ПРОЦ Инициализация 	ФлагГотовВакуумаВТ,
 4535          						ФлагОткачкиТрубыСидеростата,
 4536          						ФлагДавленияКомпрессора,
 4537          						ФП_P_ВтрубеСидер,
 4538          						ФП_T_Врубашке,
 4539          						НП_ЗД_P_ВтрубеСидер,
 4540          						К_ОТКР_ЗАТВОР_ВАК , 
 4541          						К_ЗАКР_ЗАТВОР_ВАК ,
 4542          						К_ШКАФ_ВС_380 ,
 4543          						К_САПУН,
 4544          						К_УСТР_ПЛАВ_ПУСКА,
 4545          						К_ПИТ_УПП_ВАК_НАСОСА ,
 4546          						К_ПИТ_ВЕНТИЛЯТОРА,
 4547          						К_ПИТ_РЕГ_Т,
 4548          						К_ПИТ_РЕГ_УР,
 4549          						К_ПИТ_НАСОС_ОХЛ,
 4550          						НП_ЗД_Гист_P_ВтрубеСидерНиж,
 4551          						НП_ЗД_ПериодаКонтрP_ПриНатекании,
 4552          						НП_ЗД_ПериодаКонтрP_ПриОткачке;
 4553          			
 4554           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 4555          
 4556           СОСТ Начало{
 4557          	ЕСЛИ (ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ  В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ;
 4558          	ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;
 4559          	В СЛЕДУЮЩЕЕ;
 4560           }
 4561           
 4562           СОСТ ПроверкаНеобходимостиВакуумирования{
 4563             ЕСЛИ (ФлагГотовВакуумаВТ == НОРМА) СТОП; /*22 сентября Лях*/ 
 4564             /* В СОСТ ПаузаНаРазвакуумированиеТрубы; */
 4565             ИНАЧЕ {  
 4566          	СТАРТ ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС;    /* в этом процессе */
 4567          	В СЛЕДУЮЩЕЕ;
 4568          	} 
 4569           }
 4570            СОСТ ПередачаСообщения { /* 14 декабря */
 4571          	ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВКЛЮЧЕНО)) В СЛЕДУЮЩЕЕ;
 4572          	ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4573           }
 4574          	СОСТ КонтрольВключенияВакПодсистемы{
 4575          		ЕСЛИ ( ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ){ 
 4576          			ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ ОШИБКА ) {
 4577          				В СОСТ СообщениеОбОтказеВакуумирования; /* !!!!!!!!!!!!????? включение вак. системы не сработало штатно*/ 
 4578          			}
 4579          			ИНАЧЕ
 4580          			{
 4581          				СТАРТ ПРОЦ КонтрольСостоянияОборудования;
 4582          				В СОСТ ЗапоминаемДавлениеВвакуумнойТрубе;
 4583          			}				
 4584          		} 
 4585          	} 
 4586          	СОСТ ЗапоминаемДавлениеВвакуумнойТрубе{
 4587          			ЛП_Предыдущее = ФП_P_ВтрубеСидер;
 4588          			В СЛЕДУЮЩЕЕ;
 4589          	}
 4590          	
 4591          	СОСТ КонтрольДавления{  
 4592          		ЕСЛИ (ФП_P_ВтрубеСидер < (НП_ЗД_P_ВтрубеСидер - НП_ЗД_Гист_P_ВтрубеСидерНиж) )  {  /*достигли нужного давления */
 4593          /*		ЕСЛИ (ФП_P_ВтрубеСидер < (НП_ЗД_P_ВтрубеСидер) ) { */ /*достигли нужного давления */
 4594          			СТОП ПРОЦ КонтрольСостоянияОборудования;
 4595          			СТАРТ ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;   /*222222222*/ 
 4596          			В СЛЕДУЮЩЕЕ;
 4597          		}
 4598          		ИНАЧЕ В СОСТ ПаузаНаОткачкуВвакуумнойТрубе;
 4599          	}
 4600          	
 4601          	СОСТ КонтрольВыключенияВакПодсистемы{
 4602          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ){ 
 4603          			ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ОШИБКА ) {
 4604          				В СОСТ СообщениеПриНеудачномВыкВакНасоса; /* !!!!!!!!!!!! выключение вак. системы не сработало штатно*/ 
 4605          			}
 4606          			ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4607          		} 
 4608          	} 	
 4609          	СОСТ СообщениеОКонцеВакуумирования{
 4610          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВАКУУМИРОВАНИЕ_УСПЕШНО_ЗАВЕРШЕНО)) СТОП; /*22 сентября Лях*/ 
 4611          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ ОШИБКА;
 4612          	}
 4613          	/* данное состояние определяет паузу, после которой надо проверить */
 4614          	/*необходимость вакуумирования */
 4615          /*	СОСТ ПаузаНаРазвакуумированиеТрубы{ */
 4616           /*    ТАЙМАУТ НП_ЗД_ПериодаКонтрP_ПриНатекании В СОСТ ПроверкаНеобходимостиВакуумирования;*/   /*   НП надо сделать ??????? */
 4617          	/* ТАЙМАУТ ПЯТНАДЦАТЬ_МИНУТ В СОСТ ПроверкаНеобходимостиВакуумирования; */
 4618          	/*}*/
 4619          	/* а здесь задерживаемся типа на две минуты, а потом проверяем не достигли мы вакуума*/
 4620          	СОСТ ПаузаНаОткачкуВвакуумнойТрубе{  
 4621          /*		ТАЙМАУТ НП_ЗД_ПериодаКонтрP_ПриОткачке В СЛЕДУЮЩЕЕ;*/
 4622          	ТАЙМАУТ ПЯТЬ_МИНУТ В СЛЕДУЮЩЕЕ;
 4623          	}	
 4624          	СОСТ ПроверкаУменьшенияДавленияВпатрубке{  
 4625          		ЕСЛИ(ФП_P_ВтрубеСидер < ЛП_Предыдущее) В СОСТ ЗапоминаемДавлениеВвакуумнойТрубе;
 4626                  ИНАЧЕ В СОСТ ОткачкаОтсутствует;	
 4627          	} 
 4628          /*====== НЕНОРМАЛЬНЫЕ СИТУАЦИИ =========*/
 4629           СОСТ ОткачкаОтсутствует {
 4630                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_ВАК_ТРУБЕ_НЕ_УМЕНЬШАЕТСЯ))	В СЛЕДУЮЩЕЕ;
 4631                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4632           }
 4633           
 4634           СОСТ СообщениеОбОтказеВакуумирования{
 4635                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ))	В СЛЕДУЮЩЕЕ;
 4636                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 4637           }
 4638          	/*		Сломалось что-то (при включении вак. насоса, например). Пробуем выключить вакуумный насос*/ 
 4639          	/*	 вакуумирование прекращается*/
 4640          	СОСТ ВыключенияВакНасоса{
 4641          		СТАРТ ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;
 4642          		В СЛЕДУЮЩЕЕ;
 4643          	}	
 4644          	СОСТ КонтрольВыключенияВакНасоса{
 4645          		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ){ 
 4646          			ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ОШИБКА ) {
 4647          				В СОСТ ВыключениеНаЩиткеКнопарями; /* !!!!!!!!!!!!????? включение вак. системы не сработало штатно*/ 
 4648          			}
 4649          			ИНАЧЕ СТОП;   /* выключилось без ошибок, бежать вниз не надо*/
 4650          		} 
 4651          	} 
 4652          
 4653          	/* Отработка ситуации, когда при выключении вакуумного насоса при вакуумировании ошибка произошла*/
 4654          	СОСТ СообщениеПриНеудачномВыкВакНасоса{
 4655          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВАКУУМИРОВАНИЯ))	В СЛЕДУЮЩЕЕ;
 4656          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 	
 4657          	}
 4658          	
 4659            СОСТ ВыключениеНаЩиткеКнопарями{
 4660              СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 4661              ОШИБКА;
 4662           }
 4663            СОСТ НарушениеСвязи {
 4664          	   ОШИБКА;
 4665          	}
 4666           } /*конец процесса ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ */
 4667          
 4668          
 4669          /*====================================================================*/
 4670          /*              Процесс ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ 				      */
 4671          /*====================================================================*/
 4672          ПРОЦ ВЫК_ВАКУУМИРОВАНИЕ_ТРУБЫ{ /* ! 12 декабря */
 4673           СОСТ Начало{
 4674          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ;  /*в ошибку уходим??? */
 4675          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ АКТИВНОЕ)	ОШИБКА ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС;
 4676          		В СЛЕДУЮЩЕЕ;
 4677          	}
 4678          	
 4679           СОСТ ПередачаОтладочногоСообщения { /* 23 сентября ЛЯХ */
 4680          	ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СТАРТ_ВЫКЛЮЧЕНИЯ_ВАКУУМИРОВАНИЯ_ТРУБЫ)) В СЛЕДУЮЩЕЕ;
 4681          	ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4682           }
 4683           СОСТ АктивенЛиПроцВыключенияВакНасоса{
 4684          		ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ) {
 4685          			СТАРТ ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;
 4686          			В СЛЕДУЮЩЕЕ;
 4687          		}
 4688          		ИНАЧЕ В СЛЕДУЮЩЕЕ;  /*работает процесс выключения*/
 4689           }	
 4690           СОСТ ПроверкаВыключенияВакНасоса{
 4691           		ЕСЛИ ( ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ПАССИВНОЕ){ 
 4692          				ЕСЛИ (ПРОЦ  ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ ОШИБКА ) {
 4693          					ЕСЛИ (!(ПРОЦ ОтлючитьВакуумированиеВручную В СОСТ АКТИВНОЕ))	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;
 4694          					ОШИБКА;  /* процесс будет все равно остановлен при откате*/
 4695          				}
 4696          				ИНАЧЕ  В СОСТ ПередачаСообщения;  /* это значит, что нет необходимости останова всех процессов*/
 4697          		}
 4698          	}  
 4699           СОСТ ПередачаСообщения { /* 14 декабря */
 4700          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ВАКУУМИРОВАНИЕ_ТРУБЫ_ВЫКЛЮЧЕНО)) СТОП;
 4701          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4702           }
 4703           /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4704           	СОСТ НарушениеСвязи {			/* 14 декабря */
 4705          	   ОШИБКА;
 4706          	}
 4707          }
 4708           
 4709          /*======================================================================*/
 4710          /*              Процесс Включить вакуумный насос                        */
 4711          /*   Этапы включения вакуумного насоса:                                 */ 
 4712          /*   1. Проверяем допустимое давление в компрессоре. Норма - идем дальше */  
 4713          /*   2. Проверяем температуру и уровень воды в баке охлаждения          */ 
 4714          /*      норма - идем дальше   											*/ 
 4715          /*   3. Включаем питание вентилятора                                    */ 
 4716          /*   4. Включаем питание насоса охлаждения                              */  
 4717          /*   5. Закрываем затвор вакуумный                                      */ 
 4718          /*   6. Открываем сапун                                                 */ 
 4719          /*   7. Контролируем температуру воды в рубашке, если норма             */
 4720          /*                                    - идем дальше                     */ 
 4721          /*   8. Включаем питание вакуумного насоса                              */ 
 4722          /*   9. Включаем устройство плавного пуска                              */ 
 4723          /*   10. Выдерживаем одну минуту и закрываем сапун                      */ 
 4724          /*   11. Если ФП_P_ВтрубеСидер >= ФП_P_Впатрубке - открываем затвор     */
 4725          /*       вакуумный. Пошло вакуумирование. Иначе - даем 2 минуты  		*/
 4726          /*		на откачку из патрубка, и      									*/  
 4727          /*       если откачки нет, то                                           */
 4728          /*       и уходим в ошибку .  											*/
 4729          /*======================================================================*/
 4730          ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС{
 4731           ИЗ ПРОЦ Инициализация 	
 4732          						ФП_P_Впатрубке,		
 4733          						ФП_P_ВтрубеСидер,
 4734          						ФлагГотовTВодыРО,
 4735          						ФлагГотовТемпВодыБО,
 4736          						ФлагГотовУрВодыБО,
 4737          						ФП_P_ВбакеКомпрессора,
 4738          						ФП_T_Вбаке,
 4739          						ФлагДавленияКомпрессора;
 4740          					/* установить таймауты и кирдык где возможно зависание */
 4741           ПЛАВ ЛП_Предыдущее ЛОКАЛ;
 4742           
 4743          	СОСТ Начало{
 4744          	/* 12 декабря восстановлено !*/
 4745          		ЕСЛИ (ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС;  
 4746          		/* нельзя включать насос вакуумный, если давление в компрессоре < 2 атмосфер*/
 4747          		ЕСЛИ (ФлагДавленияКомпрессора != НОРМА) В СОСТ СообщениеОбОтказеВакуумирования;
 4748          		ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4749          	}
 4750          	СОСТ ВключениеПитанияРегУровня{	  
 4751          		СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_УР;
 4752          		В СЛЕДУЮЩЕЕ;
 4753          	}
 4754          	СОСТ КонтрольВключенияПитРегУр{	/*	добавлено 9 декабря	*/
 4755          		ЕСЛИ ( ПРОЦ ВКЛ_ПИТ_РЕГ_УР В СОСТ ПАССИВНОЕ){ 
 4756          				ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_РЕГ_УР В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4757          				ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4758          		}
 4759          	}
 4760          	СОСТ КонтрольГотовностиУровняВодыБО{	/*  14 декабря */
 4761          		ЕСЛИ (ФлагГотовУрВодыБО == НОРМА) В СОСТ ВключениеРегТ;
 4762          		ИНАЧЕ В СОСТ СообщениеОбОтказеВакуумирования;	
 4763          	}
 4764            	
 4765          	СОСТ ВключениеРегТ{ /*	  14 декабря */	
 4766          		СТАРТ ПРОЦ ВКЛ_ПИТ_РЕГ_Т;   /* питание всегда включено. На всякий случай */
 4767          		В СЛЕДУЮЩЕЕ;			
 4768          	}
 4769          	СОСТ КонтрольВключенияРегТ{	/*	добавлено 11 декабря	*/
 4770          		ЕСЛИ ( ПРОЦ ВКЛ_ПИТ_РЕГ_Т В СОСТ ПАССИВНОЕ){ 
 4771          				ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_РЕГ_Т В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4772          				ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4773          		}
 4774          	}
 4775          	/* за перегревом воды в баке охлаждения следит процесс ПРОЦ КонтрольАварийнойТемпературыВбакеОхлаждения*/
 4776          	
 4777          	СОСТ КонтрольГотовностиТемпературыВодыБО{
 4778          		ЕСЛИ (ФлагГотовТемпВодыБО == НОРМА) В СОСТ ВключаемВентилятор;
 4779          		ИНАЧЕ В СОСТ СообщениеОбОтказеВакуумирования;	/*  14 декабря */
 4780          	}
 4781          	СОСТ ВключаемВентилятор{
 4782          		СТАРТ ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР;
 4783          		В СЛЕДУЮЩЕЕ;
 4784          	}
 4785          	СОСТ КонтрольВключенияВентилятора{
 4786          		ЕСЛИ ( ПРОЦ ВКЛ_ПИТ_ВЕНТИЛЯТОР В СОСТ ПАССИВНОЕ){ 
 4787          				ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_ВЕНТИЛЯТОР В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4788          				ИНАЧЕ {
 4789          					СТАРТ ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ;   
 4790          					В СОСТ КонтрольВключенияПитанияНасосаОхлаждения;
 4791          				}
 4792          		}
 4793          	}
 4794          	СОСТ КонтрольВключенияПитанияНасосаОхлаждения{
 4795          		ЕСЛИ (ПРОЦ ВКЛ_ПИТ_НАС_ОХЛ В СОСТ ПАССИВНОЕ){ 
 4796          				ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_НАС_ОХЛ В СОСТ ОШИБКА) В СОСТ СообщениеОбОтказеВакуумирования;
 4797          				ИНАЧЕ {
 4798          					СТАРТ ПРОЦ ЗАКР_ЗАТВОР_ВАК ;
 4799          					В СОСТ КонтрольЗакрытияЗатвораВакуумного;
 4800          				}
 4801          		}
 4802          	}
 4803          	СОСТ КонтрольЗакрытияЗатвораВакуумного{
 4804          		ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ ПАССИВНОЕ){ 
 4805          			ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4806          			ИНАЧЕ {
 4807          				СТАРТ ПРОЦ ОТКР_САПУН;
 4808          				В СОСТ КонтрольОткрытияСапуна;
 4809          			}
 4810          		} 
 4811          	}
 4812          	СОСТ КонтрольОткрытияСапуна{
 4813          		ЕСЛИ ( ПРОЦ ОТКР_САПУН В СОСТ ПАССИВНОЕ){ 
 4814          			ЕСЛИ (ПРОЦ ОТКР_САПУН В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4815          			ИНАЧЕ В СОСТ КонтрольТемпературыРубашки;
 4816          		} 
 4817          	}
 4818          	/* за перегревом и охлаждением воды в рубашке охлаждения следит процесс КонтрольАварийнойТемпературыВрубашкеОхлаждения */
 4819          
 4820          /*ЛЯХ - 25е сентября 2014  - модификация процесса*/
 4821          	СОСТ КонтрольТемпературыРубашки{
 4822          		ЕСЛИ (ФлагГотовTВодыРО == НОРМА) В СЛЕДУЮЩЕЕ;  
 4823          		ИНАЧЕ ЕСЛИ (ФлагГотовTВодыРО == ВЫШЕ_НОРМЫ) В СОСТ СообщениеОбОтказеВакуумирования;
 4824          		ТАЙМАУТ ДЕСЯТЬ_МИНУТ В СОСТ СообщениеОбОтказеВакуумирования;
 4825          	}
 4826          	СОСТ ПодачаПитанияНаУППвакНасоса{
 4827          		СТАРТ ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА;  
 4828          		В СЛЕДУЮЩЕЕ;
 4829          	}	
 4830          	СОСТ КонтрольПодачиПитанияНаУППвакНасоса{
 4831          		ЕСЛИ ( ПРОЦ ВКЛ_ПИТ_УПП_ВАК_НАСОСА В СОСТ ПАССИВНОЕ){ 
 4832          			ЕСЛИ (ПРОЦ  ВКЛ_ПИТ_УПП_ВАК_НАСОСА В СОСТ ОШИБКА) В СОСТ СообщениеОбОтказеВакуумирования;
 4833          			ИНАЧЕ  В СЛЕДУЮЩЕЕ;
 4834          		} 
 4835          	}
 4836          	СОСТ ВключениеУстройстваПлавногоПуска{
 4837          		СТАРТ ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА;
 4838          		В СЛЕДУЮЩЕЕ;
 4839          	}
 4840          	СОСТ КонтрольВключенияПлавногоПуска{
 4841          		ЕСЛИ (ПРОЦ ВКЛ_УСТР_ПЛАВ_ПУСКА В СОСТ ПАССИВНОЕ){ 
 4842          			ЕСЛИ (ПРОЦ  ВКЛ_УСТР_ПЛАВ_ПУСКА В СОСТ ОШИБКА) В СОСТ СообщениеОбОтказеВакуумирования;
 4843          			ИНАЧЕ  В СЛЕДУЮЩЕЕ;
 4844          		} 
 4845          	} 
 4846          	СОСТ ТаймаутПередЗакрытиемСапуна{  /*насос должен разогнаться*/
 4847           		ТАЙМАУТ ОДНА_МИНУТА  В СЛЕДУЮЩЕЕ; /*19 сентября 2014 года - Лях*/
 4848          	}  
 4849          	СОСТ ЗакрытиеСапуна{  
 4850          		СТАРТ ПРОЦ ЗАКР_САПУН;
 4851          		В СЛЕДУЮЩЕЕ; 
 4852          	} 
 4853          	СОСТ КонтрольЗакрытияСапуна{
 4854          		ЕСЛИ ( ПРОЦ ЗАКР_САПУН В СОСТ ПАССИВНОЕ){ 
 4855          			ЕСЛИ (ПРОЦ ЗАКР_САПУН В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4856          			ИНАЧЕ В СОСТ ЗапоминаемДавлениеВпатрубке;
 4857          		} 
 4858          	}
 4859          	СОСТ ЗапоминаемДавлениеВпатрубке{
 4860          			ЛП_Предыдущее = ФП_P_Впатрубке;
 4861          			В СЛЕДУЮЩЕЕ;
 4862          	}
 4863          	СОСТ КонтрольДавления{  
 4864          		ЕСЛИ (ФП_P_Впатрубке <= ФП_P_ВтрубеСидер) {
 4865          			СТАРТ ПРОЦ ОТКР_ЗАТВОР_ВАК; 
 4866          			В СОСТ КонтрольОткрытияЗВ;
 4867          		}
 4868          		ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4869          	} 
 4870          
 4871          	СОСТ ПаузаНаОткачкуВпатрубке{  
 4872          /*		ТАЙМАУТ ДВЕ_МИНУТЫ В СЛЕДУЮЩЕЕ;  */ /*????? М.Б. меньше надо сделать*/
 4873          		ТАЙМАУТ ТРИ_СЕКУНДЫ В СЛЕДУЮЩЕЕ; 
 4874          	}  
 4875          	СОСТ ПроверкаУменьшенияДавленияВпатрубке{  
 4876          		ЕСЛИ(ФП_P_Впатрубке < ЛП_Предыдущее) В СОСТ ЗапоминаемДавлениеВпатрубке;
 4877                  ИНАЧЕ В СОСТ НетОткачки;
 4878          	} 	
 4879          	СОСТ КонтрольОткрытияЗВ{
 4880          		ЕСЛИ ( ПРОЦ ОТКР_ЗАТВОР_ВАК В СОСТ ПАССИВНОЕ){ 
 4881          			ЕСЛИ (ПРОЦ ОТКР_ЗАТВОР_ВАК В СОСТ ОШИБКА ) В СОСТ СообщениеОбОтказеВакуумирования;
 4882          			ИНАЧЕ { 
 4883          				/* Лях 24 сентября 2014 */	
 4884          				/* СТАРТ ПРОЦ КонтрольВеличиныОткачкиВауумнойТрубыСидеростата; */
 4885          				СТОП;
 4886          			}
 4887          		} 
 4888          	}
 4889              /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4890           СОСТ НетОткачки {
 4891                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ДАВЛЕНИЕ_В_ПАТРУБКЕ_НЕ_УМЕНЬШАЕТСЯ))	В СЛЕДУЮЩЕЕ;
 4892                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4893           }
 4894           СОСТ СообщениеОбОтказеВакуумирования{
 4895                 ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВКЛЮЧЕНИЯ_ВАКУУМНОЙ_ПОДСИСТЕМЫ))	ОШИБКА;
 4896                ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 4897           } 
 4898           СОСТ НарушениеСвязи {
 4899          	   ОШИБКА;
 4900           }    
 4901          }
 4902          /*================================================================*/
 4903          /*          Процесс Выключить вакуумную подсистему                */
 4904          /*   Этапы выключения вакуумного насоса:                          */
 4905          /*    1. Закрывается затвор вакуумный                             */
 4906          /*    2. Открывается сапун                                        */
 4907          /*    3. Ничего не делаем 20 секунд                               */
 4908          /*    4. Выключаем устройство плавного пуска                      */
 4909          /*    5. Выключаем питание вакуумного насоса                      */
 4910          /*    6. Выключаем питание насоса охлаждения                      */
 4911          /*    7. Выключаем питание вентилятора                            */
 4912          /*================================================================*/
 4913          ПРОЦ ВЫК_ВАКУУМНЫЙ_НАСОС{
 4914           ЛОГ ФлагОшибки ЛОКАЛ;
 4915           
 4916          	СОСТ Начало{
 4917          		ФлагОшибки = 0;   /* пока ошибок нет*/
 4918          
 4919          		ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ВАКУУМНЫЙ_НАСОС;
 4920          		/* ! 12 декабря */ /* ЕСЛИ (ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ В СОСТ АКТИВНОЕ) ОШИБКА ПРОЦ ВКЛ_ВАКУУМИРОВАНИЕ_ТРУБЫ;  /*в ошибку уход 4921          им??? и кранты*/
 4922           		СТАРТ ПРОЦ ЗАКР_ЗАТВОР_ВАК;
 4923          		СТОП ПРОЦ КонтрольВеличиныОткачкиВауумнойТрубыСидеростата;
 4924          		В СЛЕДУЮЩЕЕ;
 4925          	}  
 4926          	СОСТ ПередачаОтладочногоСообщения { /* 23 сентября ЛЯХ */
 4927          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_СТАРТ_ВЫКЛЮЧЕНИЯ_ВАКУУМНОГО_НАСОСА)) В СЛЕДУЮЩЕЕ;
 4928          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи;
 4929          	}
 4930          	СОСТ КонтрольЗакрытияЗатвораВакуумного{
 4931          		ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ ПАССИВНОЕ){ 
 4932          			ЕСЛИ (ПРОЦ ЗАКР_ЗАТВОР_ВАК В СОСТ ОШИБКА ) {
 4933          			/*	СТАРТ ПРОЦ ОтлючитьВакуумированиеВручную;  */
 4934          				В СОСТ СообщениеОбОтказеВыклВакСистемы;
 4935          			}
 4936          			ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4937          		} 
 4938          	} 	
 4939          	СОСТ ОткрытьСапун{
 4940          		СТАРТ ПРОЦ ОТКР_САПУН;
 4941          		В СЛЕДУЮЩЕЕ;
 4942          	}	
 4943          	СОСТ КонтрольОткрытияСапуна{
 4944          		ЕСЛИ (ПРОЦ ОТКР_САПУН В СОСТ ПАССИВНОЕ){ 
 4945          			ЕСЛИ (ПРОЦ ОТКР_САПУН В СОСТ ОШИБКА ) {
 4946          				ФлагОшибки = 1;
 4947          				В СОСТ ВыключаемУстройствоПлавногоПуска;
 4948          			}
 4949          			ИНАЧЕ В СЛЕДУЮЩЕЕ;
 4950          		} 
 4951          	} 	
 4952          	СОСТ ТаймаутПередВыключениемПитанияВакуумногоНасоса{  
 4953          		ТАЙМАУТ ДВАДЦАТЬ_СЕКУНД В СЛЕДУЮЩЕЕ; 
 4954          	}
 4955          	СОСТ ВыключаемУстройствоПлавногоПуска{  
 4956          		СТАРТ ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА; В СЛЕДУЮЩЕЕ; 
 4957          	}
 4958          	СОСТ КонтрольВыключенияПлавногоПуска{  
 4959          		ЕСЛИ (ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА В СОСТ ПАССИВНОЕ){ 
 4960          			ЕСЛИ (ПРОЦ ВЫК_УСТР_ПЛАВ_ПУСКА В СОСТ ОШИБКА ) 	ФлагОшибки = 1;
 4961          			В СОСТ ВыключаемПитаниеПлавногоПуска;
 4962          		}		 
 4963          	}
 4964          	СОСТ ВыключаемПитаниеПлавногоПуска{  
 4965          		СТАРТ ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА; В СЛЕДУЮЩЕЕ; 
 4966          	}
 4967          
 4968          	СОСТ КонтрольВыключенияПитанияПлавногоПуска{  
 4969          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА В СОСТ ПАССИВНОЕ){ 
 4970          			ЕСЛИ (ПРОЦ ВЫК_ПИТ_УПП_ВАК_НАСОСА В СОСТ ОШИБКА ) 	ФлагОшибки = 1;
 4971          			В СОСТ ВыключаемПитаниеНасосаОхлаждения;
 4972          		}		 
 4973          	}
 4974          	СОСТ ВыключаемПитаниеНасосаОхлаждения{  
 4975          		СТАРТ ПРОЦ ВЫК_ПИТ_НАС_ОХЛ; В СЛЕДУЮЩЕЕ; 
 4976          	}
 4977          	СОСТ КонтрольВыключенияНасосаОхлаждения{  
 4978          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_НАС_ОХЛ В СОСТ ПАССИВНОЕ){ 
 4979          			ЕСЛИ (ПРОЦ ВЫК_ПИТ_НАС_ОХЛ В СОСТ ОШИБКА ) 	ФлагОшибки = 1;
 4980          			В СОСТ ВыключаемВентилятор;
 4981          		}		 
 4982          	}
 4983          	СОСТ ВыключаемВентилятор{  
 4984          		СТАРТ ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР; В СЛЕДУЮЩЕЕ; 
 4985          	}
 4986          	СОСТ КонтрольВыключенияВентилятора{  
 4987          		ЕСЛИ (ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР В СОСТ ПАССИВНОЕ){ 
 4988          			ЕСЛИ (ПРОЦ ВЫК_ПИТ_ВЕНТИЛЯТОР В СОСТ ОШИБКА ) 	ФлагОшибки = 1;
 4989          			В СЛЕДУЮЩЕЕ;
 4990          		}		 
 4991          	}	
 4992          	СОСТ АнализПризнакаОшибки{ 
 4993          		ЕСЛИ (ФлагОшибки == 1) В СОСТ СообщениеОбОтказеВыклВакСистемы;  /* ошибки есть */
 4994          		ИНАЧЕ СТОП;
 4995          	}
 4996          
 4997            /*= НЕНОРМАЛЬНЫЕ СИТУАЦИИ: ================*/
 4998          	СОСТ СообщениеОбОтказеВыклВакСистемы{
 4999          		ЕСЛИ (SendMsgGUICode(ПК_ГУИ_ОТКАЗ_ВЫКЛЮЧЕНИЯ_ВАКУУМНОЙ_ПОДСИСТЕМЫ))	ОШИБКА;
 5000          		ТАЙМАУТ ТАЙМАУТ_НА_СВЯЗЬ_С_ГУИ В СОСТ НарушениеСвязи; 
 5001          	} 
 5002          	СОСТ НарушениеСвязи {
 5003          		ОШИБКА;
 5004          	}  
 5005          	
 5006          } /*конец процесса ВЫК_ВАКУУМНЫЙ_НАСОС */
 5007          
 5008          
 5009           
 5010          }  /* \КОНЕЦ Прогр */

%RCSL-I-SUMMARY, Completed with 0 error(s).
%RCSL-I-SUMMARY, Completed with 0 warning(s).

 %RCSL-I-SUMMARY, Completed with 0 error(s).